(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1242,e=>{"use strict";var t=e.i(66497),a=e.i(10977),s=e.i(99681);let l=a.forwardRef(({className:e,type:a,...l},i)=>(0,t.jsx)("input",{type:a,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...l}));l.displayName="Input",e.s(["Input",()=>l])},97928,e=>{"use strict";var t=e.i(66497),a=e.i(10977),s=e.i(57445),l=e.i(1242);let i="https://lms-v4tz.onrender.com";function n(){let[e,n]=(0,a.useState)([]),[o,r]=(0,a.useState)(!0),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),[h,x]=(0,a.useState)(null),[p,f]=(0,a.useState)(1),[b]=(0,a.useState)(5),[y,g]=(0,a.useState)(0),[j,v]=(0,a.useState)({name:"",bio:""}),N=async()=>{try{let e=(p-1)*b,t=await fetch(`${i}/chat-buddy?skip=${e}&limit=${b}`),a=await t.json();n(a.buddies||[]),g(a.total||0)}catch(e){console.error(e)}finally{r(!1)}};(0,a.useEffect)(()=>{N()},[p]);let w=()=>{v({name:"",bio:""}),x(null),m(null),c(!1)},C=async e=>{e.preventDefault();let t=new FormData;t.append("name",j.name),t.append("bio",j.bio),h&&t.append("photo",h);let a=u?`${i}/chat-buddy/${u}`:`${i}/chat-buddy`;(await fetch(a,{method:u?"PATCH":"POST",body:t})).ok?(w(),N(),f(1)):alert("Something went wrong")},S=async e=>{if(confirm("Are you sure you want to delete this chat buddy?"))try{if(!(await fetch(`${i}/chat-buddy/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete");n(t=>t.filter(t=>t._id!==e)),g(e=>e-1)}catch(e){console.error(e),alert("Failed to delete buddy")}},B=async e=>{if(confirm("Remove one booked slot?"))try{if(!(await fetch(`${i}/chat-buddy/${e}/remove-slot`,{method:"PATCH"})).ok)throw Error("Failed");N()}catch(e){console.error(e),alert("Failed to remove slot")}},k=({bookedSlots:e,maxSlots:a})=>(0,t.jsx)("div",{className:"flex gap-1 mt-2",children:Array.from({length:a}).map((a,s)=>(0,t.jsx)("span",{className:`w-4 h-4 rounded-full border flex items-center justify-center
            ${s<e?"bg-green-500 border-green-500":"bg-gray-100 border-gray-300"}`,children:s<e&&(0,t.jsx)("span",{className:"text-white text-xs",children:"âœ“"})},s))});return(0,t.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold",children:"Chat Buddies"}),(0,t.jsx)(s.Button,{onClick:()=>{d?w():c(!0)},children:d?"Close Form":"Add Chat Buddy"})]}),d&&(0,t.jsxs)("form",{onSubmit:C,className:"bg-white p-6 rounded-lg shadow space-y-4",children:[(0,t.jsx)("h3",{className:"text-xl font-semibold",children:u?"Edit Chat Buddy":"Add Chat Buddy"}),(0,t.jsx)(l.Input,{placeholder:"Name",required:!0,value:j.name,onChange:e=>v({...j,name:e.target.value})}),(0,t.jsx)("textarea",{className:"w-full border rounded px-3 py-2",placeholder:"Bio",value:j.bio,onChange:e=>v({...j,bio:e.target.value})}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>x(e.target.files?.[0]||null)}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)(s.Button,{type:"submit",children:u?"Update Buddy":"Create Buddy"}),(0,t.jsx)(s.Button,{type:"button",variant:"outline",onClick:w,children:"Cancel"})]})]}),(0,t.jsx)("div",{className:"space-y-4",children:o?(0,t.jsx)("p",{children:"Loading..."}):0===e.length?(0,t.jsx)("p",{children:"No chat buddies found"}):e.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 flex gap-4",children:[(0,t.jsx)("img",{src:e.photo||"/placeholder-avatar.png",className:"w-14 h-14 rounded-full object-cover",alt:e.name}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsx)("h3",{className:"font-semibold",children:e.name}),(0,t.jsx)("span",{className:"text-xs px-2 py-1 rounded bg-gray-100",children:e.status})]}),e.bio&&(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.bio}),(0,t.jsx)(k,{bookedSlots:e.bookedSlots,maxSlots:e.maxSlots}),(0,t.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,t.jsx)(s.Button,{size:"sm",variant:"outline",onClick:()=>{m(e._id),v({name:e.name,bio:e.bio||""}),c(!0)},children:"Edit"}),(0,t.jsx)(s.Button,{size:"sm",variant:"destructive",onClick:()=>S(e._id),children:"Delete"}),e.bookedSlots>0&&(0,t.jsx)(s.Button,{size:"sm",variant:"secondary",onClick:()=>B(e._id),children:"Remove Slot"})]})]})]},e._id))}),e.length>0&&(0,t.jsxs)("div",{className:"flex justify-center items-center gap-3",children:[(0,t.jsx)(s.Button,{onClick:()=>f(e=>Math.max(e-1,1)),disabled:1===p,variant:"outline",children:"Previous"}),(0,t.jsx)("div",{className:"flex gap-1",children:Array.from({length:Math.ceil(y/b)}).map((e,a)=>(0,t.jsx)(s.Button,{onClick:()=>f(a+1),variant:p===a+1?"default":"outline",size:"sm",children:a+1},a+1))}),(0,t.jsx)(s.Button,{onClick:()=>f(e=>Math.min(e+1,Math.ceil(y/b))),disabled:p===Math.ceil(y/b),variant:"outline",children:"Next"}),(0,t.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:["Page ",p," of ",Math.ceil(y/b)," | Total: ",y]})]})]})}e.s(["default",()=>n])}]);