(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1242,e=>{"use strict";var t=e.i(66497),r=e.i(10977),s=e.i(99681);let a=r.forwardRef(({className:e,type:r,...a},i)=>(0,t.jsx)("input",{type:r,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...a}));a.displayName="Input",e.s(["Input",()=>a])},82133,e=>{"use strict";var t=e.i(66497),r=e.i(10977),s=e.i(28873),a=r.forwardRef((e,r)=>(0,t.jsx)(s.Primitive.label,{...e,ref:r,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));a.displayName="Label";var i=e.i(47418),n=e.i(99681);let l=(0,i.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(a,{ref:s,className:(0,n.cn)(l(),e),...r}));o.displayName=a.displayName,e.s(["Label",()=>o],82133)},17548,e=>{"use strict";var t=e.i(10977),r=e.i(72721),s=e.i(95349),a=e.i(39314),i=e.i(20215),n=class extends a.Subscribable{#e;#t=void 0;#r;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,i.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,i.hashKey)(t.mutationKey)!==(0,i.hashKey)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#a(),this.#i()}mutate(e,t){return this.#s=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#a(){let e=this.#r?.state??(0,r.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){s.notifyManager.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#s.onSuccess?.(e.data,t,r,s),this.#s.onSettled?.(e.data,null,t,r,s)):e?.type==="error"&&(this.#s.onError?.(e.error,t,r,s),this.#s.onSettled?.(void 0,e.error,t,r,s))}this.listeners.forEach(e=>{e(this.#t)})})}},l=e.i(36109);function o(e,r){let a=(0,l.useQueryClient)(r),[o]=t.useState(()=>new n(a,e));t.useEffect(()=>{o.setOptions(e)},[o,e]);let u=t.useSyncExternalStore(t.useCallback(e=>o.subscribe(s.notifyManager.batchCalls(e)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),d=t.useCallback((e,t)=>{o.mutate(e,t).catch(i.noop)},[o]);if(u.error&&(0,i.shouldThrowError)(o.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:d,mutateAsync:u.mutate}}e.s(["useMutation",()=>o],17548)},2679,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let s=e.r(67228);function a({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new s.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},27639,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return l}});let s=e.r(66497),a=e.r(16568),i=e.r(8511),n=e.r(82719);function l({moduleIds:e}){if("undefined"!=typeof window)return null;let t=i.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let s=t.reactLoadableManifest;for(let t of e){if(!s[t])continue;let e=s[t].files;r.push(...e)}}return 0===r.length?null:(0,s.jsx)(s.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,n.encodeURIPath)(e)}`;return e.endsWith(".css")?(0,s.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,a.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},27611,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return u}});let s=e.r(66497),a=e.r(10977),i=e.r(2679),n=e.r(27639);function l(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},u=function(e){let t={...o,...e},r=(0,a.lazy)(()=>t.loader().then(l)),u=t.loading;function d(e){let l=u?(0,s.jsx)(u,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,d=o?a.Suspense:a.Fragment,c=t.ssr?(0,s.jsxs)(s.Fragment,{children:["undefined"==typeof window?(0,s.jsx)(n.PreloadChunks,{moduleIds:t.modules}):null,(0,s.jsx)(r,{...e})]}):(0,s.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,s.jsx)(r,{...e})});return(0,s.jsx)(d,{...o?{fallback:l}:{},children:c})}return d.displayName="LoadableComponent",d}},84185,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return a}});let s=e.r(51432)._(e.r(27611));function a(e,t){let r={};"function"==typeof e&&(r.loader=e);let a={...r,...t};return(0,s.default)({...a,modules:a.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},70040,e=>{"use strict";let t=(0,e.i(43184).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);e.s(["Upload",()=>t],70040)},41793,e=>{"use strict";var t=e.i(49675),r=e.i(17548),s=e.i(36109);e.i(93677);var a=e.i(44506);let i="https://lms-v4tz.onrender.com/blogs",n=async(e,t)=>{try{let r=new FormData;r.append("title",e.title),r.append("content",e.content),r.append("authorId",e.authorId),e.excerpt&&r.append("excerpt",e.excerpt),e.category&&r.append("category",e.category),e.tags&&e.tags.length>0&&r.append("tags",JSON.stringify(e.tags)),t&&r.append("thumbnail",t);let{data:s}=await a.default.post(`${i}`,r,{headers:{"Content-Type":"multipart/form-data"}});return s}catch(e){throw Error(e.response?.data?.message||"Failed to create blog")}},l=async(e=1,t=10)=>{try{let{data:r}=await a.default.get(`${i}`,{params:{page:e,limit:t}});return r}catch(e){throw Error(e.response?.data?.message||"Failed to fetch blogs")}},o=async(e=1,t=10)=>{try{let{data:r}=await a.default.get(`${i}/published`,{params:{page:e,limit:t}});return r}catch(e){throw Error(e.response?.data?.message||"Failed to fetch published blogs")}},u=async e=>{try{let{data:t}=await a.default.get(`${i}/${e}`);return t}catch(e){throw Error(e.response?.data?.message||"Failed to fetch blog")}},d=async(e,t,r)=>{try{let s=new FormData;Object.keys(t).forEach(e=>{let r=t[e];void 0!==r&&(Array.isArray(r)?s.append(e,JSON.stringify(r)):s.append(e,r))}),r&&s.append("thumbnail",r);let{data:n}=await a.default.patch(`${i}/${e}`,s,{headers:{"Content-Type":"multipart/form-data"}});return n}catch(e){throw Error(e.response?.data?.message||"Failed to update blog")}},c=async e=>{try{let{data:t}=await a.default.delete(`${i}/${e}`);return t}catch(e){throw Error(e.response?.data?.message||"Failed to delete blog")}},h=async(e,t)=>{try{return(await a.default.put(`${i}/${e}/toggle-publish`,null,{params:{publish:t.toString()}})).data.message}catch(e){throw Error(e.response?.data?.message||"Failed to toggle publish status")}},p=async(e,t=1,r=10,s)=>{try{let{data:n}=await a.default.get(`${i}/author/${e}`,{params:{page:t,limit:r,...void 0!==s&&{published:s.toString()}}});return n}catch(e){throw Error(e.response?.data?.message||"Failed to fetch blogs by author")}};e.s(["useBlogById",0,e=>(0,t.useQuery)({queryKey:["blog",e],queryFn:()=>u(e),enabled:!!e}),"useBlogs",0,(e=1,r=10)=>(0,t.useQuery)({queryKey:["blogs",e,r],queryFn:()=>l(e,r)}),"useBlogsByAuthorId",0,(e,r=1,s=10,a)=>(0,t.useQuery)({queryKey:["blogs","author",e,r,s,a],queryFn:()=>p(e,r,s,a),enabled:!!e}),"useCreateBlog",0,()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:({blogData:e,thumbnail:t})=>n(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["blogs"]})}})},"useDeleteBlog",0,()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:e=>c(e),onSuccess:()=>{e.invalidateQueries({queryKey:["blogs"]})}})},"usePublishedBlogs",0,(e=1,r=50)=>(0,t.useQuery)({queryKey:["publishedBlogs",e,r],queryFn:()=>o(e,r)}),"useTogglePublishBlog",0,()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:({blogId:e,publish:t})=>h(e,t),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["blogs"]}),e.invalidateQueries({queryKey:["blog",r.blogId]})}})},"useUpdateBlog",0,()=>{let e=(0,s.useQueryClient)();return(0,r.useMutation)({mutationFn:({blogId:e,data:t,thumbnail:r})=>d(e,t,r),onSuccess:(t,r)=>{e.invalidateQueries({queryKey:["blogs"]}),e.invalidateQueries({queryKey:["blog",r.blogId]})}})}],41793)},58168,e=>{"use strict";var t=e.i(66497),r=e.i(10977),s=e.i(99681);let a=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("textarea",{className:(0,s.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...r}));a.displayName="Textarea",e.s(["Textarea",()=>a])},82719,(e,t,r)=>{"use strict";function s(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return s}})},68933,e=>{"use strict";var t=e.i(10977);function r(e){let r=t.useRef({value:e,previous:e});return t.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}e.s(["usePrevious",()=>r])},32133,e=>{"use strict";var t=e.i(66497),r=e.i(10977),s=e.i(81484),a=e.i(38468),i=e.i(6075),n=e.i(68933),l=e.i(2049),o=e.i(28873),u="Switch",[d,c]=(0,a.createContextScope)(u),[h,p]=d(u),f=r.forwardRef((e,a)=>{let{__scopeSwitch:n,name:l,checked:u,defaultChecked:d,required:c,disabled:p,value:f="on",onCheckedChange:b,form:m,...v}=e,[x,j]=r.useState(null),w=function(...e){return r.useCallback(function(...e){return t=>e.forEach(e=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})}(...e),e)}(a,e=>j(e)),C=r.useRef(!1),k=!x||m||!!x.closest("form"),[S=!1,O]=(0,i.useControllableState)({prop:u,defaultProp:d,onChange:b});return(0,t.jsxs)(h,{scope:n,checked:S,disabled:p,children:[(0,t.jsx)(o.Primitive.button,{type:"button",role:"switch","aria-checked":S,"aria-required":c,"data-state":y(S),"data-disabled":p?"":void 0,disabled:p,value:f,...v,ref:w,onClick:(0,s.composeEventHandlers)(e.onClick,e=>{O(e=>!e),k&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),k&&(0,t.jsx)(g,{control:x,bubbles:!C.current,name:l,value:f,checked:S,required:c,disabled:p,form:m,style:{transform:"translateX(-100%)"}})]})});f.displayName=u;var b="SwitchThumb",m=r.forwardRef((e,r)=>{let{__scopeSwitch:s,...a}=e,i=p(b,s);return(0,t.jsx)(o.Primitive.span,{"data-state":y(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:r})});m.displayName=b;var g=e=>{let{control:s,checked:a,bubbles:i=!0,...o}=e,u=r.useRef(null),d=(0,n.usePrevious)(a),c=(0,l.useSize)(s);return r.useEffect(()=>{let e=u.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(d!==a&&t){let r=new Event("click",{bubbles:i});t.call(e,a),e.dispatchEvent(r)}},[d,a,i]),(0,t.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...o,tabIndex:-1,ref:u,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function y(e){return e?"checked":"unchecked"}var v=e.i(99681);let x=r.forwardRef(({className:e,...r},s)=>(0,t.jsx)(f,{className:(0,v.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...r,ref:s,children:(0,t.jsx)(m,{className:(0,v.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));x.displayName=f.displayName,e.s(["Switch",()=>x],32133)},39608,e=>{"use strict";var t=e.i(66497),r=e.i(10977),s=e.i(84185),a=e.i(57445),i=e.i(1242),n=e.i(82133),l=e.i(58168),o=e.i(32133),u=e.i(3139),d=e.i(41793),c=e.i(95818),h=e.i(72154),p=e.i(52792),f=e.i(70040),b=e.i(50738);let m=(0,s.default)(()=>e.A(91891),{loadableGenerated:{modules:[92019]},ssr:!1});e.s(["default",0,({blogId:e,isEdit:s=!1})=>{let g=(0,u.useRouter)(),y=(0,c.getUserIdFromToken)(),[v,x]=(0,r.useState)(""),[j,w]=(0,r.useState)(""),[C,k]=(0,r.useState)(""),[S,O]=(0,r.useState)(""),[N,M]=(0,r.useState)(""),[P,R]=(0,r.useState)(!1),[E,B]=(0,r.useState)(null),[F,I]=(0,r.useState)(null),[T,q]=(0,r.useState)(!1),{data:K,isLoading:_}=(0,d.useBlogById)(e||""),L=(0,d.useCreateBlog)(),U=(0,d.useUpdateBlog)();(0,r.useEffect)(()=>{s&&K&&(x(K.title||""),w(K.content||""),k(K.excerpt||""),O(K.category||""),M(K.tags?.join(", ")||""),R(K.isPublished||!1),K.thumbnail&&I(K.thumbnail))},[s,K]);let Q=async t=>{if(t.preventDefault(),!v.trim())return void h.default.error("Title is required");if(!j.trim())return void h.default.error("Content is required");q(!0);try{let t=N.split(",").map(e=>e.trim()).filter(e=>e);s&&e?(await U.mutateAsync({blogId:e,data:{title:v,content:j,excerpt:C,category:S,tags:t},thumbnail:E||void 0}),h.default.success("Blog updated successfully")):(await L.mutateAsync({blogData:{title:v,content:j,excerpt:C,category:S,tags:t,authorId:y||""},thumbnail:E||void 0}),h.default.success("Blog created successfully")),g.push("/admin/blogs")}catch(e){h.default.error(s?"Failed to update blog":"Failed to create blog")}finally{q(!1)}},$={toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],[{color:[]},{background:[]}],[{align:[]}],["clean"]]};return s&&_?(0,t.jsx)("div",{children:"Loading blog..."}):(0,t.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold mb-6",children:s?"Edit Blog":"Create New Blog"}),(0,t.jsxs)("form",{onSubmit:Q,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"title",children:"Title *"}),(0,t.jsx)(i.Input,{id:"title",value:v,onChange:e=>x(e.target.value),placeholder:"Enter blog title",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{children:"Thumbnail"}),(0,t.jsx)("div",{className:"flex items-center gap-4",children:F?(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(p.default,{src:F,alt:"Thumbnail preview",width:200,height:120,className:"rounded-lg object-cover"}),(0,t.jsx)(a.Button,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>{B(null),I(null)},children:(0,t.jsx)(b.X,{className:"h-4 w-4"})})]}):(0,t.jsxs)("label",{className:"flex flex-col items-center justify-center w-48 h-32 border-2 border-dashed rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,t.jsx)(f.Upload,{className:"h-8 w-8 text-gray-400"}),(0,t.jsx)("span",{className:"mt-2 text-sm text-gray-500",children:"Upload Image"}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&(B(t),I(URL.createObjectURL(t)))},className:"hidden"})]})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"excerpt",children:"Excerpt"}),(0,t.jsx)(l.Textarea,{id:"excerpt",value:C,onChange:e=>k(e.target.value),placeholder:"Brief summary of the blog",rows:3})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{htmlFor:"tags",children:"Tags"}),(0,t.jsx)(i.Input,{id:"tags",value:N,onChange:e=>M(e.target.value),placeholder:"Comma-separated tags (e.g., react, javascript, web)"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(n.Label,{children:"Content *"}),(0,t.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg",children:(0,t.jsx)(m,{theme:"snow",value:j,onChange:w,modules:$,formats:["header","font","size","bold","italic","underline","strike","blockquote","list","indent","link","image","video","color","background","align"],placeholder:"Write your blog content here...",className:"h-96"})})]}),s&&(0,t.jsxs)("div",{className:"flex items-center space-x-2 pt-12",children:[(0,t.jsx)(o.Switch,{id:"publish",checked:P,onCheckedChange:R}),(0,t.jsx)(n.Label,{htmlFor:"publish",children:P?"Published":"Draft"})]}),(0,t.jsxs)("div",{className:"flex gap-4 pt-14",children:[(0,t.jsx)(a.Button,{type:"submit",disabled:T,children:T?s?"Updating...":"Creating...":s?"Update Blog":"Create Blog"}),(0,t.jsx)(a.Button,{type:"button",variant:"outline",onClick:()=>g.push("/admin/blogs"),children:"Cancel"})]})]})]})}])},33999,e=>{"use strict";var t=e.i(66497),r=e.i(39608),s=e.i(3139);e.s(["default",0,()=>{let e=(0,s.useParams)().blogId;return(0,t.jsx)(r.default,{blogId:e,isEdit:!0})}])},91891,e=>{e.v(t=>Promise.all(["static/chunks/ef3a03cdd268fd54.js","static/chunks/4069a7525e85ffce.js"].map(t=>e.l(t))).then(()=>t(92019)))}]);