(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1242,e=>{"use strict";var r=e.i(66497),a=e.i(10977),s=e.i(99681);let t=a.forwardRef(({className:e,type:a,...t},l)=>(0,r.jsx)("input",{type:a,className:(0,s.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:l,...t}));t.displayName="Input",e.s(["Input",()=>t])},95110,e=>{"use strict";var r=e.i(66497),a=e.i(10977),s=e.i(28873),t="Progress",[l,o]=function(e,s=[]){let t=[],l=()=>{let r=t.map(e=>a.createContext(e));return function(s){let t=s?.[e]||r;return a.useMemo(()=>({[`__scope${e}`]:{...s,[e]:t}}),[s,t])}};return l.scopeName=e,[function(s,l){let o=a.createContext(l),n=t.length;function i(s){let{scope:t,children:l,...i}=s,d=t?.[e][n]||o,c=a.useMemo(()=>i,Object.values(i));return(0,r.jsx)(d.Provider,{value:c,children:l})}return t=[...t,l],i.displayName=s+"Provider",[i,function(r,t){let i=t?.[e][n]||o,d=a.useContext(i);if(d)return d;if(void 0!==l)return l;throw Error(`\`${r}\` must be used within \`${s}\``)}]},function(...e){let r=e[0];if(1===e.length)return r;let s=()=>{let s=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let t=s.reduce((r,{useScope:a,scopeName:s})=>{let t=a(e)[`__scope${s}`];return{...r,...t}},{});return a.useMemo(()=>({[`__scope${r.scopeName}`]:t}),[t])}};return s.scopeName=r.scopeName,s}(l,...s)]}(t),[n,i]=l(t),d=a.forwardRef((e,a)=>{var t,l;let{__scopeProgress:o,value:i=null,max:d,getValueLabel:c=m,...u}=e;(d||0===d)&&!f(d)&&console.error((t=`${d}`,`Invalid prop \`max\` of value \`${t}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let b=f(d)?d:100;null===i||x(i,b)||console.error((l=`${i}`,`Invalid prop \`value\` of value \`${l}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let h=x(i,b)?i:null,y=g(h)?c(h,b):void 0;return(0,r.jsx)(n,{scope:o,value:h,max:b,children:(0,r.jsx)(s.Primitive.div,{"aria-valuemax":b,"aria-valuemin":0,"aria-valuenow":g(h)?h:void 0,"aria-valuetext":y,role:"progressbar","data-state":p(h,b),"data-value":h??void 0,"data-max":b,...u,ref:a})})});d.displayName=t;var c="ProgressIndicator",u=a.forwardRef((e,a)=>{let{__scopeProgress:t,...l}=e,o=i(c,t);return(0,r.jsx)(s.Primitive.div,{"data-state":p(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...l,ref:a})});function m(e,r){return`${Math.round(e/r*100)}%`}function p(e,r){return null==e?"indeterminate":e===r?"complete":"loading"}function g(e){return"number"==typeof e}function f(e){return g(e)&&!isNaN(e)&&e>0}function x(e,r){return g(e)&&!isNaN(e)&&e<=r&&e>=0}u.displayName=c;var b=e.i(99681);let h=a.forwardRef(({className:e,value:a,...s},t)=>(0,r.jsx)(d,{ref:t,className:(0,b.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...s,children:(0,r.jsx)(u,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(a||0)}%)`}})}));h.displayName=d.displayName,e.s(["Progress",()=>h],95110)},27096,e=>{"use strict";e.i(93677);var r=e.i(66497),a=e.i(10977),s=e.i(57445),t=e.i(1242),l=e.i(95110),o=e.i(3139),n=e.i(16870),i=e.i(44506);let d=async e=>{let r=new FormData;r.append("image",e);try{let{data:e}=await i.default.post("https://lms-v4tz.onrender.com/images/upload",r,{});return e}catch(e){throw Error(e.response?.data?.message||"Uploading Failed")}};var c=e.i(72154);e.s(["default",0,()=>{let e=(0,o.useRouter)(),[i,u]=(0,a.useState)(""),[m,p]=(0,a.useState)({name:"",website:"",email:"",phone:"",billingAddress:""}),[g,f]=(0,a.useState)(!0),[x,b]=(0,a.useState)(null),[h,y]=(0,a.useState)(""),[v,j]=(0,a.useState)(""),[N,w]=(0,a.useState)(0),[C,I]=(0,a.useState)(!1),[P,S]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=localStorage.getItem("companyId");e?u(e):console.warn("CompanyId not found in localStorage")},[]),(0,a.useEffect)(()=>{i&&(async()=>{try{let e=await fetch(`https://lms-v4tz.onrender.com/configurations/company/${i}`),r=await e.json(),a=Array.isArray(r)?r[0]:r;a&&(y(a._id),p({name:a.name||"",website:a.website||"",email:a.email||"",phone:a.phone||"",billingAddress:a.billingAddress||""}),a.image&&(j(a.image),S(a.image)))}catch(e){console.error("Error fetching configuration data:",e)}finally{f(!1)}})()},[i]);let k=e=>{p({...m,[e.target.name]:e.target.value})},$=async e=>{if(!e.target.files||0===e.target.files.length)return;let r=e.target.files[0];try{b(r),j(URL.createObjectURL(r)),I(!0);let e=await d(r);e?(S(e?.secure_url),c.default.success("Image uploaded successfully!")):c.default.error("Image upload failed!")}catch(e){console.error("Error uploading image:",e),c.default.error("Error uploading image!")}finally{I(!1)}},A=async r=>{r.preventDefault(),f(!0);try{if(!i){c.default.error("Company ID is missing!"),f(!1);return}let r={company_id:i,...m,image:P},a=h?`https://lms-v4tz.onrender.com/configurations/${h}`:"https://lms-v4tz.onrender.com/configurations/create",s=await fetch(a,{method:h?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!s.ok)throw Error("Failed to update configuration");await s.json(),c.default.success("Configuration updated successfully!"),e.push("/admin/configuration")}catch(e){console.error("Error updating configuration:",e),c.default.error("Error updating configuration!")}finally{f(!1)}};return g?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):(0,r.jsx)("div",{className:"min-h-[450px] w-full overflow-y-auto bg-gradient-to-br from-gray-50 to-gray-100 p-6",children:(0,r.jsxs)("form",{onSubmit:A,className:"max-w-6xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Company Configuration"}),(0,r.jsx)("p",{className:"text-gray-500",children:"Update your company information and settings"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-1",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 sticky top-6",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Company Logo"}),(0,r.jsx)("div",{className:"mb-6",children:v?(0,r.jsxs)("div",{className:"relative group",children:[(0,r.jsx)("img",{src:v,alt:"Company Logo",className:"w-full h-64 object-cover rounded-lg shadow-md border-2 border-gray-200"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 rounded-lg"})]}):(0,r.jsx)("div",{className:"w-full h-64 bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,r.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"No image uploaded"})]})})}),C&&(0,r.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-blue-700",children:"Uploading..."}),(0,r.jsxs)("span",{className:"text-sm font-bold text-blue-700",children:[N,"%"]})]}),(0,r.jsx)(l.Progress,{value:N,className:"h-2"})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("label",{className:"block",children:[(0,r.jsx)("span",{className:"sr-only",children:"Choose file"}),(0,r.jsx)(t.Input,{type:"file",onChange:$,accept:"image/*",disabled:C,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 5MB"})]})]})}),(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-6",children:"Company Details"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Company Name ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(t.Input,{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter company name",name:"name",value:m.name,onChange:k,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(t.Input,{type:"email",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"company@example.com",name:"email",value:m.email,onChange:k,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(t.Input,{type:"tel",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"+1 (555) 000-0000",name:"phone",value:m.phone,onChange:k,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),(0,r.jsx)(t.Input,{type:"url",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"https://example.com",name:"website",value:m.website,onChange:k})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Billing Address ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(t.Input,{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"123 Main St, City, State, ZIP",name:"billingAddress",value:m.billingAddress,onChange:k,required:!0})]})]}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mt-8 pt-6 border-t border-gray-200",children:[(0,r.jsx)(s.Button,{type:"submit",disabled:g||C,className:"flex-1 sm:flex-none px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:g?(0,r.jsxs)("span",{className:"flex items-center justify-center",children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Configuration"}),(0,r.jsx)(n.default,{href:"/admin/configuration",children:(0,r.jsx)(s.Button,{type:"button",variant:"outline",className:"w-full sm:w-auto px-8 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-all duration-200",children:"Cancel"})})]})]})})]})]})})}],27096)}]);