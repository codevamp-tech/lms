(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,30618,e=>{"use strict";var s=e.i(66497),r=e.i(10977),t=e.i(99681);let a=r.forwardRef(({className:e,...r},a)=>(0,s.jsx)("div",{ref:a,className:(0,t.cn)("rounded-xl border border-gray-300 bg-card  dark:bg-navBackground  text-card-foreground shadow",e),...r}));a.displayName="Card";let l=r.forwardRef(({className:e,...r},a)=>(0,s.jsx)("div",{ref:a,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",e),...r}));l.displayName="CardHeader";let c=r.forwardRef(({className:e,...r},a)=>(0,s.jsx)("div",{ref:a,className:(0,t.cn)("font-semibold leading-none tracking-tight",e),...r}));c.displayName="CardTitle";let d=r.forwardRef(({className:e,...r},a)=>(0,s.jsx)("div",{ref:a,className:(0,t.cn)("text-sm text-muted-foreground",e),...r}));d.displayName="CardDescription";let o=r.forwardRef(({className:e,...r},a)=>(0,s.jsx)("div",{ref:a,className:(0,t.cn)("p-6 pt-0",e),...r}));o.displayName="CardContent";let i=r.forwardRef(({className:e,...r},a)=>(0,s.jsx)("div",{ref:a,className:(0,t.cn)("flex items-center p-6 pt-0",e),...r}));i.displayName="CardFooter",e.s(["Card",()=>a,"CardContent",()=>o,"CardDescription",()=>d,"CardFooter",()=>i,"CardHeader",()=>l,"CardTitle",()=>c])},10075,e=>{"use strict";var s=e.i(66497),r=e.i(10977),t=e.i(3139),a=e.i(95818);e.s(["default",0,({children:e})=>{let l=(0,t.useRouter)(),c=(0,a.getUserIdFromToken)();return((0,r.useEffect)(()=>{c||l.push("/login")},[c,l]),c)?(0,s.jsx)(s.Fragment,{children:e}):null}])},52593,e=>{"use strict";let s=(0,e.i(43184).default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>s],52593)},24873,e=>{"use strict";let s=(0,e.i(43184).default)("StarHalf",[["path",{d:"M12 18.338a2.1 2.1 0 0 0-.987.244L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.12 2.12 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.12 2.12 0 0 0 1.597-1.16l2.309-4.679A.53.53 0 0 1 12 2",key:"2ksp49"}]]);e.s(["StarHalf",()=>s],24873)},99051,e=>{"use strict";var s=e.i(66497),r=e.i(10977),t=e.i(44506),a=e.i(30618),l=e.i(57445),c=e.i(72154),d=e.i(95818),o=e.i(52593),i=e.i(24873),n=e.i(16870),u=e.i(10075);let m=({rating:e})=>{let r=Math.floor(e),t=e-r>=.5;return(0,s.jsxs)("div",{className:"flex",children:[Array.from({length:r}).map((e,r)=>(0,s.jsx)(o.Star,{className:"h-4 w-4 text-yellow-500 fill-current"},`full-${r}`)),t&&(0,s.jsx)(i.StarHalf,{className:"h-4 w-4 text-yellow-500 fill-current"},"half"),Array.from({length:5-r-!!t}).map((e,r)=>(0,s.jsx)(o.Star,{className:"h-4 w-4 text-gray-500"},`empty-${r}`))]})};e.s(["default",0,()=>{let[e,o]=(0,r.useState)([]),[i,f]=(0,r.useState)(!0),[x,h]=(0,r.useState)({}),g=(0,d.getUserIdFromToken)(),p=async()=>{f(!0);try{let{data:e}=await t.default.get(`https://lms-v4tz.onrender.com/favorites/user/${g}`);o(e)}catch(e){c.toast.error("Failed to fetch favorites")}finally{f(!1)}};(0,r.useEffect)(()=>{p()},[]);let j=(0,r.useCallback)(async()=>{let s={};for(let r of e)try{let e=await fetch(`https://lms-v4tz.onrender.com/ratings/${r.courseId._id}`);if(e.ok){let t=await e.json();s[r.courseId._id]=t}}catch(e){console.error(`Error fetching rating for course ${r.courseId._id}:`,e)}h(s)},[JSON.stringify(e)]);(0,r.useEffect)(()=>{e.length>0&&j()},[e.length,j]);let v=async e=>{try{await t.default.delete(`https://lms-v4tz.onrender.com/favorites/${e}/remove-favorites`,{data:{userId:g,courseId:e}}),c.toast.success("Removed from favorites"),p()}catch(e){c.toast.error("Failed to remove course")}};return(0,s.jsx)(u.default,{children:(0,s.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,s.jsxs)("div",{className:"justify-center",children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-3 sm:mb-4",children:"Favorites"}),!i&&(0,s.jsxs)("div",{className:"mb-2 text-sm sm:text-base text-gray-600",children:[e.length," Course(s) in favorites"]})]}),i?(0,s.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):0===e.length?(0,s.jsxs)("p",{children:["Your cart is empty."," ",(0,s.jsx)(n.default,{href:"/",className:"text-blue-600 hover:text-blue-800",children:"Go back to courses"})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 p-2 sm:p-4",children:e.map(e=>{let r=e.courseId.courseMRP&&e.courseId.coursePrice?Math.round((e.courseId.courseMRP-e.courseId.coursePrice)/e.courseId.courseMRP*100):0;return(0,s.jsxs)(a.Card,{className:"shadow-lg rounded-lg relative",children:[(0,s.jsx)("img",{src:e.courseId.courseThumbnail,alt:e.courseId.courseTitle,className:"w-full h-36 sm:h-44 object-cover rounded-t-lg"}),r>0&&(0,s.jsxs)("div",{className:"absolute top-0 right-0 bg-red-500 text-white px-2 py-1 text-xs font-bold rounded-tr-lg rounded-bl-lg",children:[r,"% OFF"]}),(0,s.jsxs)(a.CardContent,{className:"gap-2 mt-2",children:[(0,s.jsx)(n.default,{href:`/course/course-detail/${e.courseId._id}`,children:(0,s.jsx)("h3",{className:"text-base sm:text-lg lg:text-xl hover:underline line-clamp-2",children:e.courseId.courseTitle})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)("span",{className:"text-base sm:text-lg font-bold",children:["₹",e.courseId.coursePrice]}),e.courseId.courseMRP&&e.courseId.courseMRP>e.courseId.coursePrice&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("span",{className:"text-gray-500 line-through text-sm",children:["₹",e.courseId.courseMRP]}),(0,s.jsxs)("span",{className:"text-green-600 text-sm font-medium",children:["(",r,"% off)"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-2",children:[(0,s.jsx)("div",{className:"flex items-center gap-1 mt-1",children:x[e.courseId._id]?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(m,{rating:x[e.courseId._id].average}),(0,s.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",x[e.courseId._id].count," reviews)"]})]}):(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"No ratings yet"})}),(0,s.jsx)(l.Button,{onClick:()=>v(e.courseId._id),className:"bg-red-500 hover:bg-red-600 text-white text-sm w-full sm:w-auto",children:"Remove"})]})]})]},e._id)})})]})})}])}]);