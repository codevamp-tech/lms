(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,93656,72232,e=>{"use strict";var t=e.i(66497),r=e.i(10977);e.i(93677);var s=e.i(28261),a=e.i(20215);function o(e){return e}function i(e){return e.state.isPaused}function u(e){return"success"===e.state.status}function n(e){return!0}function l(e,t={}){let r=t.shouldDehydrateMutation??e.getDefaultOptions().dehydrate?.shouldDehydrateMutation??i,s=e.getMutationCache().getAll().flatMap(e=>r(e)?[{mutationKey:e.options.mutationKey,state:e.state,...e.options.scope&&{scope:e.options.scope},...e.meta&&{meta:e.meta}}]:[]),c=t.shouldDehydrateQuery??e.getDefaultOptions().dehydrate?.shouldDehydrateQuery??u,d=t.shouldRedactErrors??e.getDefaultOptions().dehydrate?.shouldRedactErrors??n,h=t.serializeData??e.getDefaultOptions().dehydrate?.serializeData??o;return{mutations:s,queries:e.getQueryCache().getAll().flatMap(e=>{let t;return c(e)?[{dehydratedAt:Date.now(),state:{...e.state,...void 0!==e.state.data&&{data:h(e.state.data)}},queryKey:e.queryKey,queryHash:e.queryHash,..."pending"===e.state.status&&{promise:(t=e.promise?.then(h).catch(e=>d(e)?Promise.reject(Error("redacted")):Promise.reject(e)),t?.catch(a.noop),t)},...e.meta&&{meta:e.meta}}]:[]})}}function c(e,t,r){if("object"!=typeof t||null===t)return;let i=e.getMutationCache(),u=e.getQueryCache(),n=r?.defaultOptions?.deserializeData??e.getDefaultOptions().hydrate?.deserializeData??o,l=t.mutations||[],c=t.queries||[];l.forEach(({state:t,...s})=>{i.build(e,{...e.getDefaultOptions().hydrate?.mutations,...r?.defaultOptions?.mutations,...s},t)}),c.forEach(({queryKey:t,state:o,queryHash:i,meta:l,promise:c,dehydratedAt:d})=>{let h=c?(0,s.tryResolveSync)(c):void 0,f=void 0===o.data?h?.data:o.data,p=void 0===f?f:n(f),m=u.get(i),y=m?.state.status==="pending",g=m?.state.fetchStatus==="fetching";if(m){let e=h&&void 0!==d&&d>m.state.dataUpdatedAt;if(o.dataUpdatedAt>m.state.dataUpdatedAt||e){let{fetchStatus:e,...t}=o;m.setState({...t,data:p})}}else m=u.build(e,{...e.getDefaultOptions().hydrate?.queries,...r?.defaultOptions?.queries,queryKey:t,queryHash:i,meta:l},{...o,data:p,fetchStatus:"idle",status:void 0!==p?"success":o.status});c&&!y&&!g&&(void 0===d||d>m.state.dataUpdatedAt)&&m.fetch(void 0,{initialPromise:Promise.resolve(c).then(n)}).catch(a.noop)})}e.s(["dehydrate",()=>l,"hydrate",()=>c],72232);var d=e.i(36109),h=({children:e,options:t={},state:s,queryClient:a})=>{let o=(0,d.useQueryClient)(a),i=r.useRef(t);r.useEffect(()=>{i.current=t});let u=r.useMemo(()=>{if(s){if("object"!=typeof s)return;let e=o.getQueryCache(),t=s.queries||[],r=[],a=[];for(let s of t){let t=e.get(s.queryHash);t?(s.state.dataUpdatedAt>t.state.dataUpdatedAt||s.promise&&"pending"!==t.state.status&&"fetching"!==t.state.fetchStatus&&void 0!==s.dehydratedAt&&s.dehydratedAt>t.state.dataUpdatedAt)&&a.push(s):r.push(s)}if(r.length>0&&c(o,{queries:r},i.current),a.length>0)return a}},[o,s]);return r.useEffect(()=>{u&&c(o,{queries:u},i.current)},[o,u]),e};function f(e){return(0,t.jsx)(h,{...e})}e.s(["Hydrate",()=>f],93656)},16255,e=>{"use strict";var t=e.i(66497);e.i(10977);var r=e.i(47418),s=e.i(99681);let a=(0,r.cva)("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function o({className:e,variant:r,...o}){return(0,t.jsx)("div",{className:(0,s.cn)(a({variant:r}),e),...o})}e.s(["Badge",()=>o])},17548,e=>{"use strict";var t=e.i(10977),r=e.i(72721),s=e.i(95349),a=e.i(39314),o=e.i(20215),i=class extends a.Subscribable{#e;#t=void 0;#r;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.hashKey)(t.mutationKey)!==(0,o.hashKey)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#o(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#a(),this.#o()}mutate(e,t){return this.#s=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#a(){let e=this.#r?.state??(0,r.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#o(e){s.notifyManager.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#s.onSuccess?.(e.data,t,r,s),this.#s.onSettled?.(e.data,null,t,r,s)):e?.type==="error"&&(this.#s.onError?.(e.error,t,r,s),this.#s.onSettled?.(void 0,e.error,t,r,s))}this.listeners.forEach(e=>{e(this.#t)})})}},u=e.i(36109);function n(e,r){let a=(0,u.useQueryClient)(r),[n]=t.useState(()=>new i(a,e));t.useEffect(()=>{n.setOptions(e)},[n,e]);let l=t.useSyncExternalStore(t.useCallback(e=>n.subscribe(s.notifyManager.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),c=t.useCallback((e,t)=>{n.mutate(e,t).catch(o.noop)},[n]);if(l.error&&(0,o.shouldThrowError)(n.options.throwOnError,[l.error]))throw l.error;return{...l,mutate:c,mutateAsync:l.mutate}}e.s(["useMutation",()=>n],17548)},8291,e=>{"use strict";var t=e.i(17548),r=e.i(49675),s=e.i(36109);e.i(93677);var a=e.i(44506);let o="https://lms-v4tz.onrender.com/courses",i=async e=>{try{let{data:t}=await a.default.post(`${o}`,e,{headers:{Authorization:"Bearer ","Content-Type":"application/json"}});return t}catch(e){throw Error(e.response?.data?.message||"Signup failed")}},u=async(e,t=1,r=7)=>{try{let{data:s}=await a.default.post(`${o}/get-creator-courses`,{userId:e,page:t,limit:r});return s}catch(e){throw Error(e.response?.data?.message||"Failed to fetch courses")}},n=async(e,t,r=1)=>{let s=new URLSearchParams({userRole:e,page:r.toString()});return"instructor"===e&&t&&s.append("userId",t),(await fetch(`${o}/alladmin?${s.toString()}`)).json()},l=async()=>{try{let{data:e}=await a.default.get(`${o}/summary`);return e}catch(e){throw Error(e.response?.data?.message||"Failed to fetch analytics")}},c=async e=>{try{return(await a.default.get(`${o}/${e}`)).data}catch(e){console.error("Error fetching course:",e)}},d=async(e,t,r)=>{try{let s=new FormData;Object.keys(t).forEach(e=>{s.append(e,t[e])}),r&&s.append("thumbnail",r);let{data:i}=await a.default.patch(`${o}/${e}`,s,{headers:{"Content-Type":"multipart/form-data"}});return i}catch(e){throw Error(e.response?.data?.message||"Updating Failed")}},h=async e=>{try{return(await a.default.get(`${o}/${e}/lectures`)).data}catch(e){console.error("Error fetching course:",e)}},f=async(e,t)=>{try{return(await a.default.put(`${o}/${e}/toggle-publish`,null,{headers:{Authorization:"Bearer "},params:{publish:t?.toString()}})).data.message}catch(e){throw console.error("Error toggling course publish status:",e.response?.data?.message||e.message),Error(e.response?.data?.message||"Failed to toggle publish status")}},p=async(e,t)=>{try{return(await a.default.put(`${o}/${e}/toggle-private`,null,{params:{privated:t?.toString()}})).data.message}catch(e){throw console.error("Error toggling course private status:",e.response?.data?.message||e.message),Error(e.response?.data?.message||"Failed to toggle private status")}},m=async(e=1,t=8,r)=>{try{let{data:s}=await a.default.get(`${o}/published/all`,{params:{companyId:r,page:e,limit:t}});return s}catch(e){throw console.error("Error fetching courses:",e),e}},y=async e=>{try{let{data:t}=await a.default.delete(`${o}/${e}`,{headers:{"Content-Type":"application/json"}});return t}catch(e){throw Error(e.response?.data?.message||"Deleting Failed")}};var g=e.i(72154),b=e.i(10977);e.s(["default",0,()=>{let e=(0,s.useQueryClient)(),a=(0,t.useMutation)({mutationFn:i,onSuccess:()=>{console.log("Course created successfully")},onError:e=>{console.error("Error creating course:",e)}}),o=(0,t.useMutation)({mutationFn:({courseId:e,updatedData:t,thumbnail:r})=>d(e,t,r),onSuccess:()=>{console.log("Course updated successfully")},onError:e=>{console.error("Error updating course:",e.message)}}),v=(0,t.useMutation)({mutationFn:({courseId:e,publish:t})=>f(e,t),onSuccess:()=>{console.log("Course updated successfully")},onError:e=>{console.error("Error updating course:",e.message)}}),x=(0,t.useMutation)({mutationFn:({courseId:e,privated:t})=>p(e,t),onSuccess:()=>{console.log("Course updated successfully")},onError:e=>{console.error("Error updating course:",e.message)}}),w=(0,t.useMutation)({mutationFn:({courseId:e})=>y(e),onSuccess:()=>{e.invalidateQueries({queryKey:["courses"]})},onError:e=>{g.default.error("Failed to delete course:",e)}});return{createNewCourse:a.mutate,editCourse:o.mutate,publishCourse:v.mutate,deleteCourse:w.mutate,privateCourse:x.mutate,getCreatorCoursesQuery:(e,t,s=7)=>{let a=(0,r.useQuery)({queryKey:["creatorCourses",e,t],queryFn:()=>u(e,t,s),enabled:!!e,placeholderData:e=>e,staleTime:5e3,refetchOnWindowFocus:!1});return(0,b.useEffect)(()=>{a.data&&console.log("Courses fetched successfully:",a.data)},[a.data]),(0,b.useEffect)(()=>{a.error&&console.error("Error fetching courses:",a.error)},[a.error]),a},getAdminCoursesQuery:(e,t,s)=>(0,r.useQuery)({queryKey:["courses",e,s,t],queryFn:()=>n(e,s,t),enabled:!!e}),useAnalyticsSummary:()=>(0,r.useQuery)({queryKey:["courseAnalyticsSummary"],queryFn:l,staleTime:5e3,refetchOnWindowFocus:!1}),getCourseByIdQuery:e=>{let t=(0,r.useQuery)({queryKey:["course",e],queryFn:()=>c(e),enabled:!!e,staleTime:5e3,refetchOnWindowFocus:!1});return(0,b.useEffect)(()=>{t.data&&console.log("Course fetched successfully:",t.data)},[t.data]),(0,b.useEffect)(()=>{t.error&&console.error("Error fetching course by ID:",t.error)},[t.error]),t},getCourseLecturesQuery:e=>{let t=(0,r.useQuery)({queryKey:["lectures",e],queryFn:()=>h(e),enabled:!!e});return(0,b.useEffect)(()=>{t.error&&console.error("Error fetching lectures:",t.error)},[t.error]),t},getPublishedCoursesQuery:(e,t,s,a)=>{let o=(0,r.useQuery)({queryKey:["publishedCourses",e,s],queryFn:()=>m(e,t,s),staleTime:5e3,enabled:a?.enabled});return(0,b.useEffect)(()=>{o.data&&console.log("Courses fetched successfully:",o.data)},[o.data]),(0,b.useEffect)(()=>{o.error&&console.error("Error fetching courses:",o.error)},[o.error]),o},isLoading:a.isPending,error:a.error||o.error}}],8291)},26092,e=>{"use strict";let t=(0,e.i(43184).default)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);e.s(["Edit",()=>t],26092)},99655,e=>{"use strict";var t=e.i(66497),r=e.i(10977),s=e.i(99681);let a=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("div",{className:"relative w-full overflow-auto",children:(0,t.jsx)("table",{ref:a,className:(0,s.cn)("w-full caption-bottom text-sm",e),...r})}));a.displayName="Table";let o=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("thead",{ref:a,className:(0,s.cn)("[&_tr]:border-b",e),...r}));o.displayName="TableHeader";let i=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("tbody",{ref:a,className:(0,s.cn)("[&_tr:last-child]:border-0",e),...r}));i.displayName="TableBody",r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("tfoot",{ref:a,className:(0,s.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...r})).displayName="TableFooter";let u=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("tr",{ref:a,className:(0,s.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...r}));u.displayName="TableRow";let n=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("th",{ref:a,className:(0,s.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r}));n.displayName="TableHead";let l=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("td",{ref:a,className:(0,s.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...r}));l.displayName="TableCell";let c=r.forwardRef(({className:e,...r},a)=>(0,t.jsx)("caption",{ref:a,className:(0,s.cn)("mt-4 text-sm text-muted-foreground",e),...r}));c.displayName="TableCaption",e.s(["Table",()=>a,"TableBody",()=>i,"TableCaption",()=>c,"TableCell",()=>l,"TableHead",()=>n,"TableHeader",()=>o,"TableRow",()=>u])},81836,e=>{"use strict";var t=e.i(66497),r=e.i(16255),s=e.i(57445),a=e.i(99655),o=e.i(8291),i=e.i(26092),u=e.i(50738),n=e.i(3139),l=e.i(10977),c=e.i(95818),d=e.i(2589),h=e.i(28809);e.s(["default",0,()=>{let e=(0,n.useRouter)(),f=(0,c.getUserIdFromToken)(),{data:p,isLoading:m}=(0,h.useUserProfile)(f),[y,g]=(0,l.useState)(""),[b,v]=(0,l.useState)(1);(0,l.useEffect)(()=>{p?.role&&(g(p.role),v(1))},[p]);let{getAdminCoursesQuery:x}=(0,o.default)(),{data:w,isLoading:C,error:j}=x(y,"instructor"===y?f:void 0,b.toString());console.log("data couses",w);let[E,T]=(0,l.useState)(""),[S,N]=(0,l.useState)(!1),[M,O]=(0,l.useState)(!1),[R,q]=(0,l.useState)(!0);(0,l.useEffect)(()=>{(async()=>{try{let e=await (0,d.getInstructor)();if(console.log("instructor data",e),e.success){let t=e.instructors.find(e=>e._id===f);t&&O(t.isStatus)}}catch(e){console.error("Error fetching instructor status:",e)}finally{q(!1)}v(1)})()},[f]);let A=Array.isArray(w)?w:w?.courses??[],F=w?.totalPages??1,D=A.filter(e=>e.courseTitle.toLowerCase().includes(E.toLowerCase()));return(console.log("coursesssssss",A),C)?(0,t.jsx)("div",{children:"Loading courses..."}):j?(0,t.jsxs)("div",{children:["Error: ",j.message]}):(console.log("instructorStatus:",M,R,R||!M),(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)(s.Button,{onClick:()=>{e.push("/admin/courses/create")},children:"Create New Course"}),(0,t.jsxs)("div",{className:"flex-1 flex items-center gap-2",children:[(0,t.jsxs)("div",{className:"relative flex-1",children:[(0,t.jsx)("input",{type:"text",placeholder:"Search courses by title...",value:E,onChange:e=>T(e.target.value),onFocus:()=>N(!0),onBlur:()=>setTimeout(()=>N(!1),100),className:"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),S&&E&&(0,t.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:D.map(e=>(0,t.jsx)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer",onMouseDown:()=>{T(e.courseTitle),N(!1)},children:e.courseTitle},e._id))})]}),E&&(0,t.jsx)(s.Button,{variant:"ghost",size:"sm",onClick:()=>T(""),className:"px-2",children:(0,t.jsx)(u.X,{className:"h-4 w-4"})})]})]}),(0,t.jsxs)(a.Table,{children:[(0,t.jsx)(a.TableCaption,{children:E&&0===D.length?"No courses found. Try a different search.":0===A.length?"No courses here. Start by creating your first course.":"A list of your recent courses."}),(0,t.jsx)(a.TableHeader,{children:(0,t.jsxs)(a.TableRow,{children:[(0,t.jsx)(a.TableHead,{children:"Title"}),(0,t.jsx)(a.TableHead,{className:"w-[80px]",children:"Price"}),(0,t.jsx)(a.TableHead,{children:"Status"}),(0,t.jsx)(a.TableHead,{className:"text-right",children:"Action"})]})}),(0,t.jsx)(a.TableBody,{children:A.map(o=>(0,t.jsxs)(a.TableRow,{children:[(0,t.jsx)(a.TableCell,{children:o.courseTitle}),(0,t.jsx)(a.TableCell,{className:"font-medium",children:o.coursePrice||"NA"}),(0,t.jsx)(a.TableCell,{children:(0,t.jsx)(r.Badge,{children:o.isPublished?"Published":"Draft"})}),(0,t.jsx)(a.TableCell,{className:"text-right",children:(0,t.jsx)(s.Button,{size:"sm",variant:"ghost",onClick:()=>{var t;return t=o._id,void e.push(`/admin/courses/${t}`)},children:(0,t.jsx)(i.Edit,{})})})]},o._id))})]}),F>1&&(0,t.jsxs)("div",{className:"flex justify-end items-center mt-4 gap-3",children:[(0,t.jsxs)("span",{children:["Page ",b," of ",F]}),(0,t.jsx)(s.Button,{size:"sm",variant:"outline",disabled:1===b,onClick:()=>{b>1&&v(b-1)},children:"Previous"}),(0,t.jsx)(s.Button,{size:"sm",variant:"outline",disabled:b===F,onClick:()=>{b<F&&v(b+1)},children:"Next"})]})]}))}])}]);