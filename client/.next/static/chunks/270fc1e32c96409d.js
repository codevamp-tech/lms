(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,17548,e=>{"use strict";var t=e.i(10977),s=e.i(72721),r=e.i(95349),a=e.i(39314),i=e.i(20215),l=class extends a.Subscribable{#e;#t=void 0;#s;#r;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,i.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#s,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,i.hashKey)(t.mutationKey)!==(0,i.hashKey)(this.options.mutationKey)?this.reset():this.#s?.state.status==="pending"&&this.#s.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#s?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#i(e)}getCurrentResult(){return this.#t}reset(){this.#s?.removeObserver(this),this.#s=void 0,this.#a(),this.#i()}mutate(e,t){return this.#r=t,this.#s?.removeObserver(this),this.#s=this.#e.getMutationCache().build(this.#e,this.options),this.#s.addObserver(this),this.#s.execute(e)}#a(){let e=this.#s?.state??(0,s.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#i(e){r.notifyManager.batch(()=>{if(this.#r&&this.hasListeners()){let t=this.#t.variables,s=this.#t.context,r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#r.onSuccess?.(e.data,t,s,r),this.#r.onSettled?.(e.data,null,t,s,r)):e?.type==="error"&&(this.#r.onError?.(e.error,t,s,r),this.#r.onSettled?.(void 0,e.error,t,s,r))}this.listeners.forEach(e=>{e(this.#t)})})}},n=e.i(36109);function o(e,s){let a=(0,n.useQueryClient)(s),[o]=t.useState(()=>new l(a,e));t.useEffect(()=>{o.setOptions(e)},[o,e]);let c=t.useSyncExternalStore(t.useCallback(e=>o.subscribe(r.notifyManager.batchCalls(e)),[o]),()=>o.getCurrentResult(),()=>o.getCurrentResult()),u=t.useCallback((e,t)=>{o.mutate(e,t).catch(i.noop)},[o]);if(c.error&&(0,i.shouldThrowError)(o.options.throwOnError,[c.error]))throw c.error;return{...c,mutate:u,mutateAsync:c.mutate}}e.s(["useMutation",()=>o],17548)},18419,e=>{"use strict";let t=(0,e.i(43184).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],18419)},10763,e=>{"use strict";let t=(0,e.i(43184).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],10763)},8015,e=>{"use strict";let t=(0,e.i(43184).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);e.s(["Clock",()=>t],8015)},65752,e=>{"use strict";let t=(0,e.i(43184).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],65752)},41793,e=>{"use strict";var t=e.i(49675),s=e.i(17548),r=e.i(36109);e.i(93677);var a=e.i(44506);let i="https://lms-v4tz.onrender.com/blogs",l=async(e,t)=>{try{let s=new FormData;s.append("title",e.title),s.append("content",e.content),s.append("authorId",e.authorId),e.excerpt&&s.append("excerpt",e.excerpt),e.category&&s.append("category",e.category),e.tags&&e.tags.length>0&&s.append("tags",JSON.stringify(e.tags)),t&&s.append("thumbnail",t);let{data:r}=await a.default.post(`${i}`,s,{headers:{"Content-Type":"multipart/form-data"}});return r}catch(e){throw Error(e.response?.data?.message||"Failed to create blog")}},n=async(e=1,t=10)=>{try{let{data:s}=await a.default.get(`${i}`,{params:{page:e,limit:t}});return s}catch(e){throw Error(e.response?.data?.message||"Failed to fetch blogs")}},o=async(e=1,t=10)=>{try{let{data:s}=await a.default.get(`${i}/published`,{params:{page:e,limit:t}});return s}catch(e){throw Error(e.response?.data?.message||"Failed to fetch published blogs")}},c=async e=>{try{let{data:t}=await a.default.get(`${i}/${e}`);return t}catch(e){throw Error(e.response?.data?.message||"Failed to fetch blog")}},u=async(e,t,s)=>{try{let r=new FormData;Object.keys(t).forEach(e=>{let s=t[e];void 0!==s&&(Array.isArray(s)?r.append(e,JSON.stringify(s)):r.append(e,s))}),s&&r.append("thumbnail",s);let{data:l}=await a.default.patch(`${i}/${e}`,r,{headers:{"Content-Type":"multipart/form-data"}});return l}catch(e){throw Error(e.response?.data?.message||"Failed to update blog")}},d=async e=>{try{let{data:t}=await a.default.delete(`${i}/${e}`);return t}catch(e){throw Error(e.response?.data?.message||"Failed to delete blog")}},h=async(e,t)=>{try{return(await a.default.put(`${i}/${e}/toggle-publish`,null,{params:{publish:t.toString()}})).data.message}catch(e){throw Error(e.response?.data?.message||"Failed to toggle publish status")}},m=async(e,t=1,s=10,r)=>{try{let{data:l}=await a.default.get(`${i}/author/${e}`,{params:{page:t,limit:s,...void 0!==r&&{published:r.toString()}}});return l}catch(e){throw Error(e.response?.data?.message||"Failed to fetch blogs by author")}};e.s(["useBlogById",0,e=>(0,t.useQuery)({queryKey:["blog",e],queryFn:()=>c(e),enabled:!!e}),"useBlogs",0,(e=1,s=10)=>(0,t.useQuery)({queryKey:["blogs",e,s],queryFn:()=>n(e,s)}),"useBlogsByAuthorId",0,(e,s=1,r=10,a)=>(0,t.useQuery)({queryKey:["blogs","author",e,s,r,a],queryFn:()=>m(e,s,r,a),enabled:!!e}),"useCreateBlog",0,()=>{let e=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:({blogData:e,thumbnail:t})=>l(e,t),onSuccess:()=>{e.invalidateQueries({queryKey:["blogs"]})}})},"useDeleteBlog",0,()=>{let e=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:e=>d(e),onSuccess:()=>{e.invalidateQueries({queryKey:["blogs"]})}})},"usePublishedBlogs",0,(e=1,s=50)=>(0,t.useQuery)({queryKey:["publishedBlogs",e,s],queryFn:()=>o(e,s)}),"useTogglePublishBlog",0,()=>{let e=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:({blogId:e,publish:t})=>h(e,t),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["blogs"]}),e.invalidateQueries({queryKey:["blog",s.blogId]})}})},"useUpdateBlog",0,()=>{let e=(0,r.useQueryClient)();return(0,s.useMutation)({mutationFn:({blogId:e,data:t,thumbnail:s})=>u(e,t,s),onSuccess:(t,s)=>{e.invalidateQueries({queryKey:["blogs"]}),e.invalidateQueries({queryKey:["blog",s.blogId]})}})}],41793)},35002,e=>{"use strict";var t=e.i(66497),s=e.i(16870),r=e.i(10977);let a=(0,e.i(43184).default)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var i=e.i(8015),l=e.i(77854),n=e.i(10763),o=e.i(18419),c=e.i(65752),u=e.i(67147),d=e.i(3139),h=e.i(41793);function m(){let e=(0,d.useRouter)(),[m,g]=(0,r.useState)(""),[x,p]=(0,r.useState)(new Set),[y,b]=(0,r.useState)(null),f=(0,r.useRef)(null),{data:v,isLoading:w,isError:j}=(0,h.usePublishedBlogs)(1,50),N=v?.blogs||[];(0,r.useEffect)(()=>{N.length>0&&!y&&b(N[0]._id)},[N,y]),(0,r.useEffect)(()=>{f.current&&(f.current.scrollTop=0)},[y]);let C=(0,r.useMemo)(()=>N.filter(e=>e.title.toLowerCase().includes(m.toLowerCase())||(e.excerpt?.toLowerCase().includes(m.toLowerCase())??!1)||(e.tags?.some(e=>e.toLowerCase().includes(m.toLowerCase()))??!1)),[N,m]),M=e=>{e.currentTarget.src="https://via.placeholder.com/900x500?text=Mr+English+Blog"},k=N.find(e=>e._id===y)||N[0],S=e=>Math.max(1,Math.ceil(e.split(/\s+/).length/200)),E=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return w?(0,t.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsx)(c.Loader2,{className:"w-8 h-8 animate-spin text-gray-900"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Loading blogs..."})]})}):j?(0,t.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("p",{className:"text-red-500 mb-4",children:"Failed to load blogs"}),(0,t.jsx)("button",{onClick:()=>e.refresh(),className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800",children:"Try Again"})]})}):0===N.length?(0,t.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,t.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors mb-4 sm:mb-6 group p-4",children:[(0,t.jsx)(o.ArrowLeft,{className:"w-4 h-4 sm:w-5 sm:h-5 transform group-hover:-translate-x-1 transition-transform"}),(0,t.jsx)("span",{className:"text-sm sm:text-base",children:"Back"})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,t.jsx)("p",{className:"text-gray-500 text-lg",children:"No blogs published yet."}),(0,t.jsx)("p",{className:"text-gray-400 mt-2",children:"Check back later for new content!"})]})]}):(0,t.jsxs)("div",{className:"min-h-screen bg-white text-gray-900",children:[(0,t.jsxs)("button",{onClick:()=>e.back(),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors mb-4 sm:mb-6 group p-4",children:[(0,t.jsx)(o.ArrowLeft,{className:"w-4 h-4 sm:w-5 sm:h-5 transform group-hover:-translate-x-1 transition-transform"}),(0,t.jsx)("span",{className:"text-sm sm:text-base",children:"Back"})]}),(0,t.jsx)("div",{className:"bg-white text-gray-900 py-10 border-b border-gray-200",children:(0,t.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)(u.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[(0,t.jsx)("h1",{className:"text-4xl sm:text-5xl font-extrabold mb-2 text-gray-900",children:"Mr English — Learning Blog"}),(0,t.jsx)("p",{className:"text-sm sm:text-base text-gray-600 max-w-2xl mx-auto",children:"Tips, lessons and insights to master English — grammar, speaking, vocabulary and more."})]})})}),(0,t.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,t.jsxs)("div",{className:"mb-6 flex flex-col lg:flex-row gap-4 items-center justify-between",children:[(0,t.jsxs)("div",{className:"relative w-full lg:w-2/3",children:[(0,t.jsx)(n.Search,{className:"absolute left-4 top-3.5 text-gray-500 w-5 h-5"}),(0,t.jsx)("input",{type:"text",placeholder:"Search blogs by title, keyword, or tag...",value:m,onChange:e=>g(e.target.value),className:"w-full pl-12 pr-4 py-3 rounded-lg border border-gray-300 bg-white text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-900"})]}),(0,t.jsx)("div",{className:"flex gap-2 flex-wrap justify-end w-full lg:w-auto"})]}),0===C.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500",children:"No blogs found matching your search criteria."})}):(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsx)("div",{className:"lg:col-span-2",ref:f,children:k&&(0,t.jsxs)(u.motion.article,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200",children:[(0,t.jsx)("div",{className:"relative h-72 md:h-96 bg-gray-100",children:(0,t.jsx)("img",{src:k.thumbnail||"https://via.placeholder.com/900x500?text=Mr+English+Blog",alt:k.title,onError:M,className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:k.title}),(0,t.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["By ",k.author?.name||"Unknown Author"," • ",E(k.publishedAt||k.createdAt)]}),(0,t.jsxs)("div",{className:"blog-content text-gray-800",children:[k.excerpt&&(0,t.jsx)("p",{className:"text-lg text-gray-600 mb-4",children:k.excerpt}),(0,t.jsx)("div",{dangerouslySetInnerHTML:{__html:k.content},className:"blog-content"})]}),(0,t.jsxs)("div",{className:"mt-6 flex items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("img",{src:k.author?.photoUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${k.author?.name||"user"}`,alt:k.author?.name||"Author",className:"w-10 h-10 rounded-full",onError:M}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm font-medium",children:k.author?.name||"Unknown Author"}),(0,t.jsx)("div",{className:"text-xs text-gray-500",children:E(k.publishedAt||k.createdAt)})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,t.jsx)(i.Clock,{className:"w-4 h-4"}),(0,t.jsxs)("span",{children:[S(k.content)," min"]})]}),(0,t.jsxs)("button",{onClick:()=>{var e;return e=k._id,void p(t=>{let s=new Set(t);return s.has(e)?s.delete(e):s.add(e),s})},className:`px-3 py-2 rounded-md text-sm font-medium transition ${x.has(k._id)?"bg-gray-900 text-white":"bg-gray-100 text-gray-800"}`,children:[(0,t.jsx)(a,{className:`w-4 h-4 inline-block mr-2 ${x.has(k._id)?"fill-current":""}`}),"Like"]})]})]}),k.tags&&k.tags.length>0&&(0,t.jsx)("div",{className:"mt-6 flex flex-wrap gap-2",children:k.tags.map((e,s)=>(0,t.jsxs)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full",children:["#",e]},s))})]})]},k._id)}),(0,t.jsx)("aside",{className:"lg:col-span-1",children:(0,t.jsx)("div",{className:"space-y-4",children:C.map(e=>(0,t.jsxs)(u.motion.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.25},whileHover:{scale:1.02},className:`flex gap-3 items-center p-3 rounded-lg cursor-pointer transition-shadow ${e._id===y?"bg-gray-100 ring-1 ring-gray-400":"bg-white shadow-sm"}`,onClick:()=>b(e._id),children:[(0,t.jsx)("div",{className:"w-20 h-14 flex-shrink-0 rounded-md overflow-hidden bg-gray-100",children:(0,t.jsx)("img",{src:e.thumbnail||"https://via.placeholder.com/200x120?text=Blog",alt:e.title,onError:M,className:"w-full h-full object-cover"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h4",{className:`text-sm font-semibold line-clamp-2 ${e._id===y?"text-gray-900":"text-gray-700"}`,children:e.title}),(0,t.jsxs)("p",{className:"text-xs text-gray-500",children:[e.author?.name||"Unknown"," • ",S(e.content)," min"]})]})]},e._id))})})]}),(0,t.jsx)("div",{className:"mt-10 text-center",children:(0,t.jsxs)(s.default,{href:"/",className:"inline-flex items-center gap-2 text-gray-700 hover:text-gray-900",children:[(0,t.jsx)(l.ChevronRight,{className:"w-5 h-5 rotate-180"}),"Back to Home"]})})]}),(0,t.jsx)("footer",{className:"mt-20 bg-white text-gray-600 py-8 text-center border-t border-gray-200",children:(0,t.jsxs)("p",{className:"text-sm",children:["© ",new Date().getFullYear()," Mr English Training Academy. All rights reserved."]})})]})}e.s(["default",()=>m],35002)}]);