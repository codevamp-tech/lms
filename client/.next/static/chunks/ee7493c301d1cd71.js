(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,17548,e=>{"use strict";var t=e.i(10977),r=e.i(72721),s=e.i(95349),a=e.i(39314),o=e.i(20215),n=class extends a.Subscribable{#e;#t=void 0;#r;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.hashKey)(t.mutationKey)!==(0,o.hashKey)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#a(),this.#o(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#a(),this.#o()}mutate(e,t){return this.#s=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#a(){let e=this.#r?.state??(0,r.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#o(e){s.notifyManager.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#s.onSuccess?.(e.data,t,r,s),this.#s.onSettled?.(e.data,null,t,r,s)):e?.type==="error"&&(this.#s.onError?.(e.error,t,r,s),this.#s.onSettled?.(void 0,e.error,t,r,s))}this.listeners.forEach(e=>{e(this.#t)})})}},i=e.i(36109);function l(e,r){let a=(0,i.useQueryClient)(r),[l]=t.useState(()=>new n(a,e));t.useEffect(()=>{l.setOptions(e)},[l,e]);let u=t.useSyncExternalStore(t.useCallback(e=>l.subscribe(s.notifyManager.batchCalls(e)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),c=t.useCallback((e,t)=>{l.mutate(e,t).catch(o.noop)},[l]);if(u.error&&(0,o.shouldThrowError)(l.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:c,mutateAsync:u.mutate}}e.s(["useMutation",()=>l],17548)},8291,e=>{"use strict";var t=e.i(17548),r=e.i(49675),s=e.i(36109);e.i(93677);var a=e.i(44506);let o="https://lms-v4tz.onrender.com/courses",n=async e=>{try{let{data:t}=await a.default.post(`${o}`,e,{headers:{Authorization:"Bearer ","Content-Type":"application/json"}});return t}catch(e){throw Error(e.response?.data?.message||"Signup failed")}},i=async(e,t=1,r=7)=>{try{let{data:s}=await a.default.post(`${o}/get-creator-courses`,{userId:e,page:t,limit:r});return s}catch(e){throw Error(e.response?.data?.message||"Failed to fetch courses")}},l=async(e,t,r=1)=>{let s=new URLSearchParams({userRole:e,page:r.toString()});return"instructor"===e&&t&&s.append("userId",t),(await fetch(`${o}/alladmin?${s.toString()}`)).json()},u=async()=>{try{let{data:e}=await a.default.get(`${o}/summary`);return e}catch(e){throw Error(e.response?.data?.message||"Failed to fetch analytics")}},c=async e=>{try{return(await a.default.get(`${o}/${e}`)).data}catch(e){console.error("Error fetching course:",e)}},d=async(e,t,r)=>{try{let s=new FormData;Object.keys(t).forEach(e=>{s.append(e,t[e])}),r&&s.append("thumbnail",r);let{data:n}=await a.default.patch(`${o}/${e}`,s,{headers:{"Content-Type":"multipart/form-data"}});return n}catch(e){throw Error(e.response?.data?.message||"Updating Failed")}},h=async e=>{try{return(await a.default.get(`${o}/${e}/lectures`)).data}catch(e){console.error("Error fetching course:",e)}},m=async(e,t)=>{try{return(await a.default.put(`${o}/${e}/toggle-publish`,null,{headers:{Authorization:"Bearer "},params:{publish:t?.toString()}})).data.message}catch(e){throw console.error("Error toggling course publish status:",e.response?.data?.message||e.message),Error(e.response?.data?.message||"Failed to toggle publish status")}},g=async(e,t)=>{try{return(await a.default.put(`${o}/${e}/toggle-private`,null,{params:{privated:t?.toString()}})).data.message}catch(e){throw console.error("Error toggling course private status:",e.response?.data?.message||e.message),Error(e.response?.data?.message||"Failed to toggle private status")}},p=async(e=1,t=8,r)=>{try{let{data:s}=await a.default.get(`${o}/published/all`,{params:{companyId:r,page:e,limit:t}});return s}catch(e){throw console.error("Error fetching courses:",e),e}},x=async e=>{try{let{data:t}=await a.default.delete(`${o}/${e}`,{headers:{"Content-Type":"application/json"}});return t}catch(e){throw Error(e.response?.data?.message||"Deleting Failed")}};var y=e.i(72154),f=e.i(10977);e.s(["default",0,()=>{let e=(0,s.useQueryClient)(),a=(0,t.useMutation)({mutationFn:n,onSuccess:()=>{console.log("Course created successfully")},onError:e=>{console.error("Error creating course:",e)}}),o=(0,t.useMutation)({mutationFn:({courseId:e,updatedData:t,thumbnail:r})=>d(e,t,r),onSuccess:()=>{console.log("Course updated successfully")},onError:e=>{console.error("Error updating course:",e.message)}}),b=(0,t.useMutation)({mutationFn:({courseId:e,publish:t})=>m(e,t),onSuccess:()=>{console.log("Course updated successfully")},onError:e=>{console.error("Error updating course:",e.message)}}),j=(0,t.useMutation)({mutationFn:({courseId:e,privated:t})=>g(e,t),onSuccess:()=>{console.log("Course updated successfully")},onError:e=>{console.error("Error updating course:",e.message)}}),v=(0,t.useMutation)({mutationFn:({courseId:e})=>x(e),onSuccess:()=>{e.invalidateQueries({queryKey:["courses"]})},onError:e=>{y.default.error("Failed to delete course:",e)}});return{createNewCourse:a.mutate,editCourse:o.mutate,publishCourse:b.mutate,deleteCourse:v.mutate,privateCourse:j.mutate,getCreatorCoursesQuery:(e,t,s=7)=>{let a=(0,r.useQuery)({queryKey:["creatorCourses",e,t],queryFn:()=>i(e,t,s),enabled:!!e,placeholderData:e=>e,staleTime:5e3,refetchOnWindowFocus:!1});return(0,f.useEffect)(()=>{a.data&&console.log("Courses fetched successfully:",a.data)},[a.data]),(0,f.useEffect)(()=>{a.error&&console.error("Error fetching courses:",a.error)},[a.error]),a},getAdminCoursesQuery:(e,t,s)=>(0,r.useQuery)({queryKey:["courses",e,s,t],queryFn:()=>l(e,s,t),enabled:!!e}),useAnalyticsSummary:()=>(0,r.useQuery)({queryKey:["courseAnalyticsSummary"],queryFn:u,staleTime:5e3,refetchOnWindowFocus:!1}),getCourseByIdQuery:e=>{let t=(0,r.useQuery)({queryKey:["course",e],queryFn:()=>c(e),enabled:!!e,staleTime:5e3,refetchOnWindowFocus:!1});return(0,f.useEffect)(()=>{t.data&&console.log("Course fetched successfully:",t.data)},[t.data]),(0,f.useEffect)(()=>{t.error&&console.error("Error fetching course by ID:",t.error)},[t.error]),t},getCourseLecturesQuery:e=>{let t=(0,r.useQuery)({queryKey:["lectures",e],queryFn:()=>h(e),enabled:!!e});return(0,f.useEffect)(()=>{t.error&&console.error("Error fetching lectures:",t.error)},[t.error]),t},getPublishedCoursesQuery:(e,t,s,a)=>{let o=(0,r.useQuery)({queryKey:["publishedCourses",e,s],queryFn:()=>p(e,t,s),staleTime:5e3,enabled:a?.enabled});return(0,f.useEffect)(()=>{o.data&&console.log("Courses fetched successfully:",o.data)},[o.data]),(0,f.useEffect)(()=>{o.error&&console.error("Error fetching courses:",o.error)},[o.error]),o},isLoading:a.isPending,error:a.error||o.error}}],8291)},27770,7935,e=>{"use strict";var t=e.i(43184);let r=(0,t.default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>r],27770);let s=(0,t.default)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);e.s(["ChevronUp",()=>s],7935)},23151,e=>{"use strict";var t=e.i(66497),r=e.i(10977),s=e.i(44506),a=e.i(27770),o=e.i(7935),n=e.i(9653),i=e.i(75224),l=e.i(24444),u=e.i(51358),c=e.i(8291),d=e.i(28809),h=e.i(95818);function m(){let[e,m]=(0,r.useState)([]),[g,p]=(0,r.useState)(null),[x,y]=(0,r.useState)(!1),f=(0,h.getUserIdFromToken)(),{data:b,isLoading:j}=(0,d.useUserProfile)(f),[v,w]=(0,r.useState)(""),[N,E]=(0,r.useState)(1);(0,r.useEffect)(()=>{b?.role&&(w(b.role),E(1))},[b]);let{getAdminCoursesQuery:C}=(0,c.default)(),{data:S,isLoading:M,error:O}=C(b?.role||"",b?.role==="instructor"?f:void 0,N.toString());(0,r.useEffect)(()=>{S?.courses&&m(S.courses.map(e=>({...e,enrolledStudents:[],totalEnrolled:e.enrolledStudents?.length||0})))},[S]);let F=async e=>{if(g===e)return void p(null);try{y(!0);let t=(await s.default.get(`https://lms-v4tz.onrender.com/courses/${e}/sales`)).data.data;m(r=>r.map(r=>r._id===e?{...r,enrolledStudents:t.enrolledUsers,totalEnrolled:t.totalEnrolled}:r)),p(e)}catch(e){console.error("Failed to fetch enrolled students",e)}finally{y(!1)}};return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-8 px-4",children:(0,t.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg",children:(0,t.jsx)(i.BookOpen,{className:"w-6 h-6 text-white"})}),(0,t.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"My Courses"})]}),(0,t.jsx)("p",{className:"text-gray-600 ml-14",children:"Manage your courses and track student enrollments"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:"Total Courses"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:e.length})]}),(0,t.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,t.jsx)(i.BookOpen,{className:"w-6 h-6 text-blue-600"})})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:"Total Students"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:e.reduce((e,t)=>e+t.totalEnrolled,0)})]}),(0,t.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,t.jsx)(n.Users,{className:"w-6 h-6 text-green-600"})})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:"Avg. per Course"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:e.length>0?Math.round(e.reduce((e,t)=>e+t.totalEnrolled,0)/e.length):0})]}),(0,t.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,t.jsx)(u.User,{className:"w-6 h-6 text-purple-600"})})]})})]}),M&&(0,t.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),(0,t.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden transition-all duration-300 hover:shadow-md",children:[(0,t.jsxs)("button",{className:"w-full px-6 py-5 flex justify-between items-center bg-gradient-to-r from-white to-gray-50 hover:from-gray-50 hover:to-gray-100 transition-all duration-200",onClick:()=>F(e._id),children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg",children:(0,t.jsx)(i.BookOpen,{className:"w-5 h-5 text-white"})}),(0,t.jsxs)("div",{className:"text-left",children:[(0,t.jsx)("h3",{className:"font-semibold text-lg text-gray-900",children:e.courseTitle}),(0,t.jsxs)("span",{children:[e.coursePrice?`Price: ${e.coursePrice}`:"No price set","   "]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsx)(n.Users,{className:"w-4 h-4 text-gray-400"}),(0,t.jsxs)("span",{className:"text-sm text-gray-500",children:[e.totalEnrolled," ",1===e.totalEnrolled?"student":"students"," enrolled"]})]})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[x&&g===e._id&&(0,t.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),(0,t.jsx)("div",{className:`p-2 rounded-lg transition-all duration-200 ${g===e._id?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:g===e._id?(0,t.jsx)(o.ChevronUp,{className:"w-5 h-5"}):(0,t.jsx)(a.ChevronDown,{className:"w-5 h-5"})})]})]}),g===e._id&&(0,t.jsx)("div",{className:"px-6 py-5 bg-gray-50 border-t border-gray-100 animate-in slide-in-from-top-2 duration-300",children:0===e.enrolledStudents.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-200 mb-4",children:(0,t.jsx)(n.Users,{className:"w-8 h-8 text-gray-400"})}),(0,t.jsx)("p",{className:"text-gray-500 font-medium",children:"No students enrolled yet"}),(0,t.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Students will appear here once they enroll"})]}):(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[(0,t.jsx)(n.Users,{className:"w-4 h-4"}),"Enrolled Students (",e.enrolledStudents.length,")"]}),(0,t.jsx)("div",{className:"grid gap-3",children:e.enrolledStudents.map(e=>(0,t.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-gray-100 hover:border-blue-200 hover:shadow-sm transition-all duration-200",children:[e.photoUrl?(0,t.jsx)("img",{src:e.photoUrl,alt:e.name,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-200"}):(0,t.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center text-white font-semibold",children:e.name.charAt(0).toUpperCase()}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,t.jsxs)("div",{className:"flex items-center gap-1 mt-0.5",children:[(0,t.jsx)(l.Mail,{className:"w-3 h-3 text-gray-400"}),(0,t.jsx)("p",{className:"text-sm text-gray-500",children:e.email})]})]})]},e._id))})]})})]},e._id))}),0===e.length&&!M&&(0,t.jsxs)("div",{className:"text-center py-16",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gray-100 mb-4",children:(0,t.jsx)(i.BookOpen,{className:"w-10 h-10 text-gray-400"})}),(0,t.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No courses yet"}),(0,t.jsx)("p",{className:"text-gray-500",children:"Create your first course to get started"})]})]})})}e.s(["default",()=>m])}]);