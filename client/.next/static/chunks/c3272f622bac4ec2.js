(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10075,e=>{"use strict";var r=e.i(66497),t=e.i(10977),s=e.i(3139),a=e.i(95818);e.s(["default",0,({children:e})=>{let o=(0,s.useRouter)(),c=(0,a.getUserIdFromToken)();return((0,t.useEffect)(()=>{c||o.push("/login")},[c,o]),c)?(0,r.jsx)(r.Fragment,{children:e}):null}])},52743,e=>{"use strict";var r=e.i(44506);let t="https://lms-v4tz.onrender.com/course-purchase",s=async(e,s)=>{console.log("Fetching course details for:",t);try{let{data:a}=await r.default.get(`${t}/${e}`,{params:s?{userId:s}:{}}),o=!!a?.purchased,c=a?.coursePurchase?.status;if(c&&"string"==typeof c){let e=c.toLowerCase();o="paid"===e||"success"===e||"completed"===e}return{...a,purchased:o}}catch(e){console.error("Error fetching course:",e)}},a=async e=>{try{let{data:s}=await r.default.post(`${t}/${e}/create-razorpay-order`);return s}catch(e){console.error("Error creating order:",e)}},o=async e=>{try{console.log("ðŸ” Verifying payment with details:",e);let{data:s}=await r.default.post(`${t}/verify-payment`,e);return console.log("âœ… Payment verification response:",s),s}catch(e){throw console.error("âŒ Error verifying payment:",e),e}},c=async e=>{try{let{data:s}=await r.default.get(`${t}/purchased-courses/${e}`);return s}catch(e){throw Error(e.response?.data?.message||"Failed to fetch purchased courses")}},i=async({courseId:e,userId:r})=>(await fetch("https://lms-v4tz.onrender.com/courses/enroll-student",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({courseId:e,userId:r})})).json(),n=async()=>{try{let{data:e}=await r.default.get(`${t}/admin/all-purchases`);return e}catch(e){throw Error(e.response?.data?.message||"Failed to fetch purchases")}},l=async e=>{try{let{data:s}=await r.default.post(`${t}/admin/revoke/${e}`);return s}catch(e){throw Error(e.response?.data?.message||"Failed to revoke access")}},d=async e=>{try{let{data:s}=await r.default.post(`${t}/admin/restore/${e}`);return s}catch(e){throw Error(e.response?.data?.message||"Failed to restore access")}};e.s(["createRazorpayOrder",0,a,"enrollIdCourse",0,i,"fetchPurchasedCourses",0,c,"getAllPurchasesForAdmin",0,n,"getCoursedetailWithPurchaseStatus",0,s,"restoreAccess",0,d,"revokeAccess",0,l,"verifyPayment",0,o])},741,e=>{"use strict";var r=e.i(44506);let t="https://lms-v4tz.onrender.com/live-session",s=async()=>{try{let{data:e}=await r.default.get(t);return e}catch(e){throw console.error("Error fetching live sessions:",e),e}},a=async(e,s)=>{try{let{data:a}=await r.default.post(`${t}/${e}/create-order`,{userId:s});return a}catch(e){throw console.error("Error creating live session order:",e),e}},o=async e=>{try{let{data:s}=await r.default.post(`${t}/verify-payment`,e);return s}catch(e){throw console.error("Error verifying live session payment:",e),e}},c=async e=>{try{let{data:s}=await r.default.get(`${t}/enrolled/${e}`);return s}catch(e){throw console.error("Error fetching enrolled live sessions:",e),e}};e.s(["createLiveSessionOrder",0,a,"fetchEnrolledLiveSessions",0,c,"fetchLiveSessions",0,s,"verifyLiveSessionPayment",0,o])},26050,e=>{"use strict";var r=e.i(66497),t=e.i(10977),s=e.i(52743),a=e.i(741),o=e.i(95818),c=e.i(16870),i=e.i(72154),n=e.i(57445);function l(){let[e,l]=(0,t.useState)([]),[d,u]=(0,t.useState)([]),[h,m]=(0,t.useState)(!0),g=(0,o.getUserIdFromToken)();return((0,t.useEffect)(()=>{(async()=>{if(g)try{let e=await (0,s.fetchPurchasedCourses)(g);l(e.courses);let r=await (0,a.fetchEnrolledLiveSessions)(g);u(r)}catch(e){i.default.error("Failed to load learning data.")}finally{m(!1)}})()},[g]),h)?(0,r.jsx)("div",{children:"Loading..."}):(0,r.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,r.jsx)("h1",{className:"text-4xl font-extrabold tracking-tight lg:text-5xl text-center mb-12",children:"My Learning"}),(0,r.jsx)("h2",{className:"text-3xl font-bold mb-6",children:"My Courses"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:e.map(e=>(0,r.jsxs)("div",{className:"bg-card dark:bg-gray-800/50 rounded-lg shadow-sm border p-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-2",children:e.courseTitle}),(0,r.jsxs)("p",{className:"text-muted-foreground mb-4",children:["by ",e.creator.name]}),(0,r.jsx)(c.default,{href:`/course/course-progress/${e._id}`,children:(0,r.jsx)(n.Button,{className:"w-full",children:"Go to Course"})})]},e._id))}),(0,r.jsx)("h2",{className:"text-3xl font-bold mb-6",children:"My Live Sessions"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:d.map(e=>(0,r.jsxs)("div",{className:"bg-card dark:bg-gray-800/50 rounded-lg shadow-sm border p-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold mb-2",children:e.title}),(0,r.jsxs)("p",{className:"text-muted-foreground mb-4",children:["with ",e.instructor.name]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Date & Time:"})," ",new Date(e.dateTime).toLocaleString()]}),(0,r.jsxs)("p",{children:[(0,r.jsx)("strong",{children:"Duration:"})," ",e.duration," minutes"]})]},e._id))})]})}e.s(["default",()=>l])}]);