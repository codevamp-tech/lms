(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,66359,e=>{"use strict";let t=(0,e.i(43184).default)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);e.s(["ChevronLeft",()=>t],66359)},62071,e=>{"use strict";let t=(0,e.i(43184).default)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);e.s(["MessageSquare",()=>t],62071)},95827,e=>{"use strict";var t=e.i(66497),a=e.i(10977),s=e.i(62071),r=e.i(75224),l=e.i(48598),i=e.i(66359),o=e.i(77854);function n(){let[e,n]=(0,a.useState)([]),[d,c]=(0,a.useState)(1),g=async()=>{try{let e=await fetch("https://lms-v4tz.onrender.com/notifications/all");if(!e.ok)throw Error("Failed to fetch notifications");let t=await e.json();n(t)}catch(e){console.error("Error fetching notifications:",e)}},h=async e=>{try{let t=localStorage.getItem("token");if(!(await fetch(`https://lms-v4tz.onrender.com/notifications/${e}/read`,{method:"PATCH",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).ok)throw Error("Failed to mark as read");n(t=>t.map(t=>t._id===e?{...t,isRead:!0}:t))}catch(e){console.error(e)}};(0,a.useEffect)(()=>{g()},[]);let m=Math.ceil(e.length/5),u=(d-1)*5,x=e.slice(u,u+5);return(0,t.jsxs)("div",{className:"w-full max-h-[400px] overflow-y-auto bg-gradient-to-b from-gray-50 to-white",children:[0===e.length&&(0,t.jsxs)("div",{className:"w-full p-12 text-center",children:[(0,t.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-full mb-4",children:(0,t.jsx)(l.Bell,{className:"w-10 h-10 text-blue-500"})}),(0,t.jsx)("p",{className:"text-gray-900 font-semibold text-lg mb-1",children:"All caught up!"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"No new notifications"})]}),(0,t.jsx)("div",{className:"divide-y divide-gray-100",children:x.map(e=>{var a;let i,o,n,d=(e=>{switch(e){case"CHAT":return{bg:"bg-gradient-to-br from-purple-500 to-pink-500",glow:"shadow-purple-200"};case"COURSE":return{bg:"bg-gradient-to-br from-emerald-500 to-teal-500",glow:"shadow-emerald-200"};case"SYSTEM":return{bg:"bg-gradient-to-br from-blue-500 to-indigo-500",glow:"shadow-blue-200"};default:return{bg:"bg-gradient-to-br from-gray-500 to-gray-600",glow:"shadow-gray-200"}}})(e.type);return(0,t.jsxs)("div",{onClick:()=>!e.isRead&&h(e._id),className:`relative flex gap-4 px-5 py-4 cursor-pointer transition-all duration-300 hover:bg-white hover:shadow-md group ${!e.isRead?"bg-gradient-to-r from-blue-50/80 to-indigo-50/50":"bg-transparent"}`,children:[(0,t.jsxs)("div",{className:"relative shrink-0",children:[(0,t.jsx)("div",{className:`w-12 h-12 rounded-xl ${d.bg} ${d.glow} shadow-lg flex items-center justify-center text-white transform transition-all duration-300 group-hover:scale-110 group-hover:rotate-3`,children:(e=>{switch(e){case"CHAT":return(0,t.jsx)(s.MessageSquare,{className:"w-5 h-5"});case"COURSE":return(0,t.jsx)(r.BookOpen,{className:"w-5 h-5"});default:return(0,t.jsx)(l.Bell,{className:"w-5 h-5"})}})(e.type)}),!e.isRead&&(0,t.jsx)("div",{className:"absolute -top-1 -right-1",children:(0,t.jsxs)("span",{className:"relative flex h-3 w-3",children:[(0,t.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),(0,t.jsx)("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-blue-500 border-2 border-white"})]})})]}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between gap-3 mb-1",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h4",{className:`text-base leading-snug transition-colors ${!e.isRead?"font-bold text-gray-900":"font-semibold text-gray-700"}`,children:[e.title.replace(/^Reminder:\s*/,"")," "]}),e.userId?.name&&(0,t.jsxs)("p",{className:"text-xs text-gray-400 mt-0.5",children:["To: ",e.userId.name]})]}),(0,t.jsx)("span",{className:`text-xs font-medium whitespace-nowrap px-2 py-1 rounded-full transition-all ${!e.isRead?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-600"}`,children:(a=e.sentAt,i=new Date,o=new Date(a),(n=Math.floor((i.getTime()-o.getTime())/1e3))<60?"Just now":n<3600?`${Math.floor(n/60)}m ago`:n<86400?`${Math.floor(n/3600)}h ago`:n<604800?`${Math.floor(n/86400)}d ago`:o.toLocaleDateString())})]}),(0,t.jsx)("p",{className:`text-sm leading-relaxed mb-2 transition-colors ${!e.isRead?"text-gray-700":"text-gray-600"}`,children:e.body}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("span",{className:`inline-flex items-center text-xs font-medium px-2.5 py-1 rounded-full ${"CHAT"===e.type?"bg-purple-100 text-purple-700":"COURSE"===e.type?"bg-emerald-100 text-emerald-700":"bg-blue-100 text-blue-700"}`,children:e.type}),!e.isRead&&(0,t.jsxs)("span",{className:"text-xs font-semibold text-blue-600 flex items-center gap-1",children:[(0,t.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-600 rounded-full animate-pulse"}),"New"]})]})]}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/0 to-indigo-500/0 group-hover:from-blue-500/5 group-hover:to-indigo-500/5 transition-all duration-300 pointer-events-none rounded-lg"})]},e._id)})}),e.length>5&&(0,t.jsxs)("div",{className:"flex items-center justify-between px-5 py-4 border-t border-gray-100 bg-gray-50",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Page ",d," of ",m]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>{d>1&&c(d-1)},disabled:1===d,className:"p-2 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200 active:bg-gray-300","aria-label":"Previous page",children:(0,t.jsx)(i.ChevronLeft,{className:"w-4 h-4 text-gray-700"})}),(0,t.jsx)("div",{className:"flex items-center gap-1",children:Array.from({length:m},(e,t)=>t+1).map(e=>(0,t.jsx)("button",{onClick:()=>c(e),className:`w-8 h-8 rounded-lg font-medium text-sm transition-all ${e===d?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-100"}`,children:e},e))}),(0,t.jsx)("button",{onClick:()=>{d<m&&c(d+1)},disabled:d===m,className:"p-2 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200 active:bg-gray-300","aria-label":"Next page",children:(0,t.jsx)(o.ChevronRight,{className:"w-4 h-4 text-gray-700"})})]})]})]})}e.s(["default",()=>n])}]);