(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,1242,e=>{"use strict";var a=e.i(66497),s=e.i(10977),t=e.i(99681);let r=s.forwardRef(({className:e,type:s,...r},l)=>(0,a.jsx)("input",{type:s,className:(0,t.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:l,...r}));r.displayName="Input",e.s(["Input",()=>r])},82133,e=>{"use strict";var a=e.i(66497),s=e.i(10977),t=e.i(28873),r=s.forwardRef((e,s)=>(0,a.jsx)(t.Primitive.label,{...e,ref:s,onMouseDown:a=>{a.target.closest("button, input, select, textarea")||(e.onMouseDown?.(a),!a.defaultPrevented&&a.detail>1&&a.preventDefault())}}));r.displayName="Label";var l=e.i(47418),d=e.i(99681);let n=(0,l.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=s.forwardRef(({className:e,...s},t)=>(0,a.jsx)(r,{ref:t,className:(0,d.cn)(n(),e),...s}));i.displayName=r.displayName,e.s(["Label",()=>i],82133)},35822,e=>{"use strict";let a=(0,e.i(43184).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>a],35822)},22410,e=>{"use strict";var a=e.i(66497),s=e.i(10977),t=e.i(57445),r=e.i(82133),l=e.i(35822),d=e.i(1242),n=e.i(72154);e.s(["default",0,()=>{let[e,i]=(0,s.useState)([]),[o,c]=(0,s.useState)(!1),[m,u]=(0,s.useState)([]),[p,x]=(0,s.useState)(!0),[h,f]=(0,s.useState)(1),[y,j]=(0,s.useState)(1),[g,w]=(0,s.useState)(null),[b,v]=(0,s.useState)({name:"",email:"",password:"",role:"admin",companyId:""});(0,s.useEffect)(()=>{let e=localStorage.getItem("companyId");e&&(w(e),v(a=>({...a,companyId:e})))},[]),(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("https://lms-v4tz.onrender.com/companies/all-company"),a=await e.json();e.ok?i(a.companies):n.default.error("Failed to fetch companies.")}catch(e){n.default.error("An error occurred while fetching companies.")}})()},[]);let N=async(e=1)=>{x(!0);try{let a=await fetch(`https://lms-v4tz.onrender.com/users/admins?page=${e}&limit=10`,{headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}});if(!a.ok)throw Error("Failed to fetch data");let s=await a.json();u(s.admins),j(s.totalPages),f(s.currentPage)}catch(e){n.default.error(e.message)}finally{x(!1)}};(0,s.useEffect)(()=>{N(h)},[h]);let k=e=>{let{name:a,value:s}=e.target;v(e=>({...e,[a]:s}))},I=async e=>{if(e.preventDefault(),m.some(e=>e.email.toLowerCase()===b.email.toLowerCase()))return void n.default.error("Email is already registered");try{let e=await fetch("https://lms-v4tz.onrender.com/users/addAdmin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),a=await e.json();e.ok&&a._id?(await N(),v({name:"",email:"",password:"",role:"admin",companyId:g||""}),c(!1),n.default.success(`User added as ${b.role}`)):n.default.error("Failed to add user")}catch(e){n.default.error("An error occurred while adding the user.")}},C=async e=>{try{if(!(await fetch(`https://lms-v4tz.onrender.com/users/admin/${e}`,{method:"DELETE"})).ok)throw Error("Failed to delete admin");n.default.success("Admin deleted successfully"),N()}catch(e){n.default.error("Error deleting admin")}};return p?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("div",{className:"p-6 space-y-8 bg-card rounded-xl ",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 dark:text-white",children:"Admin List"}),(0,a.jsx)(t.Button,{onClick:()=>c(e=>!e),children:o?"Cancel":"Add Admin"})]}),o&&(0,a.jsxs)("div",{className:"mt-6 space-y-6 ",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(r.Label,{htmlFor:"name",children:"Name"}),(0,a.jsx)(d.Input,{id:"name",type:"text",name:"name",value:b.name,onChange:k,className:"mt-1 block w-full px-4 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(r.Label,{htmlFor:"email",children:"Email"}),(0,a.jsx)(d.Input,{id:"email",type:"email",name:"email",value:b.email,onChange:k,className:"mt-1 block w-full px-4 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(r.Label,{htmlFor:"password",children:"Password"}),(0,a.jsx)(d.Input,{id:"password",type:"password",name:"password",value:b.password,onChange:k,className:"mt-1 block w-full px-4 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)(r.Label,{htmlFor:"companyId",children:"Company"}),(0,a.jsxs)("select",{id:"companyId",name:"companyId",value:b.companyId||"",onChange:e=>{v(a=>({...a,companyId:e.target.value}))},className:"mt-1 block w-full px-4 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-500 bg-card text-gray-500 dark:text-white",children:[(0,a.jsx)("option",{value:"",children:"Select a company"}),e.map(e=>(0,a.jsx)("option",{value:e._id,children:e.name},e._id))]})]})]}),(0,a.jsx)(t.Button,{onClick:I,children:"Add Admin"})]}),(0,a.jsx)("div",{className:"overflow-x-auto mt-4",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left text-gray-600",children:[(0,a.jsx)("thead",{className:"bg-gray-100 dark:text-gray-400 dark:bg-navBackground",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"py-3 px-4",children:"Name"}),(0,a.jsx)("th",{className:"py-3 px-4",children:"Email"}),(0,a.jsx)("th",{className:"py-3 px-4",children:"Role"}),(0,a.jsx)("th",{className:"py-3 px-4",children:"Company"}),(0,a.jsx)("th",{className:"py-3 px-4 text-center",children:"Action"})]})}),(0,a.jsx)("tbody",{children:Array.isArray(m)&&m.length>0?m.map(e=>(0,a.jsxs)("tr",{className:"border-t dark:text-white",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:e.name}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.email}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.role}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.companyId?(0,a.jsx)("span",{children:e.companyId.name}):"No company"}),(0,a.jsx)("td",{className:"py-3 px-4 text-center",children:(0,a.jsx)(t.Button,{variant:"ghost",onClick:()=>C(e._id),className:"text-red-500 hover:text-red-700",children:(0,a.jsx)(l.Trash2,{size:18})})})]},e._id)):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"py-3 px-4 text-center",children:"No admins found"})})})]})})]})}])}]);