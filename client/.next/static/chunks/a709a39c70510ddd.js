(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,82133,e=>{"use strict";var t=e.i(66497),a=e.i(10977),r=e.i(28873),s=a.forwardRef((e,a)=>(0,t.jsx)(r.Primitive.label,{...e,ref:a,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));s.displayName="Label";var d=e.i(47418),l=e.i(99681);let i=(0,d.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=a.forwardRef(({className:e,...a},r)=>(0,t.jsx)(s,{ref:r,className:(0,l.cn)(i(),e),...a}));o.displayName=s.displayName,e.s(["Label",()=>o],82133)},10763,e=>{"use strict";let t=(0,e.i(43184).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],10763)},8280,e=>{"use strict";var t=e.i(66497),a=e.i(2589),r=e.i(28809),s=e.i(95818),d=e.i(10977),l=e.i(57445),i=e.i(82133),o=e.i(10763),n=e.i(50738),c=e.i(72154);e.s(["default",0,()=>{let e=(0,s.getUserIdFromToken)(),{data:m}=(0,r.useUserProfile)(e),[u,x]=(0,d.useState)([]),[h,g]=(0,d.useState)(1),[p,y]=(0,d.useState)(1),[w,f]=(0,d.useState)(!1),[b,v]=(0,d.useState)(""),[j,N]=(0,d.useState)(!1),[k,S]=(0,d.useState)(null),[C,A]=(0,d.useState)({name:"",password:"",email:"",role:"instructor",companyId:""});(0,d.useEffect)(()=>{let e=localStorage.getItem("companyId");e&&(S(e),A(t=>({...t,companyId:e})))},[]);let I=e=>{let{name:t,value:a}=e.target;A(e=>({...e,[t]:a}))},L=async e=>{if(e.preventDefault(),u.some(e=>e.email.toLowerCase()===C.email.toLowerCase()))return void c.default.error("This email is already registered");try{let e=await fetch("https://lms-v4tz.onrender.com/users/addinstructor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)}),t=await e.json();e.ok&&t._id?(x(e=>[...e,t]),A({name:"",email:"",password:"",role:"instructor",companyId:k||""}),f(!1)):c.default.error("This email is already registered.")}catch(e){c.default.error(e.message||"An unknown error occurred")}},T=async(e,t)=>{try{if(!(await fetch(`https://lms-v4tz.onrender.com/users/toggle-status/${e}?status=${!t}`,{method:"PUT",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to update status");x(a=>a.map(a=>a._id===e?{...a,isStatus:!t}:a)),c.default.success(`Instructor ${!t?"activated":"deactivated"} successfully`)}catch(e){c.default.error("Failed to toggle instructor status")}},P=async(e=1)=>{try{let t=await (0,a.getInstructor)(e,7);t?.success&&Array.isArray(t.instructors)?(x(t.instructors),g(t.totalPages??1)):c.default.error("Unexpected response format")}catch(e){c.default.error("Failed to fetch instructors")}};(0,d.useEffect)(()=>{P(p)},[p]);let D=e=>{e>=1&&e<=h&&y(e)},F=u.filter(e=>e.name.toLowerCase().includes(b.toLowerCase())||e.email.toLowerCase().includes(b.toLowerCase()));return(0,t.jsx)("div",{className:"p-4 md:p-6 lg:p-8 dark:bg-card",children:m?.role==="admin"&&(0,t.jsxs)("div",{className:"bg-white dark:bg-card rounded-lg shadow",children:[(0,t.jsxs)("div",{className:"p-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-600 dark:text-white",children:"Instructors"}),(0,t.jsxs)("div",{className:"w-full md:flex-1 max-w-md relative",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 relative",children:[(0,t.jsx)(o.Search,{className:"h-5 w-5 text-gray-400 absolute left-3"}),(0,t.jsx)("input",{type:"text",placeholder:"Search instructors...",value:b,onChange:e=>{v(e.target.value),y(1)},onFocus:()=>N(!0),onBlur:()=>setTimeout(()=>N(!1),100),className:"pl-10 pr-8 w-full py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white"}),b&&(0,t.jsx)("button",{onClick:()=>{v(""),N(!1)},className:"absolute right-3 text-gray-500 hover:text-gray-700 dark:text-gray-400",children:(0,t.jsx)(n.X,{className:"h-4 w-4"})})]}),j&&b&&(0,t.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[F.map(e=>(0,t.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",onMouseDown:()=>{v(e.email),N(!1)},children:[(0,t.jsx)("div",{className:"font-medium dark:text-white",children:e.name}),(0,t.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.email})]},e._id)),0===F.length&&(0,t.jsx)("div",{className:"px-4 py-2 text-gray-500 dark:text-gray-400",children:"No matching instructors found"})]})]}),(0,t.jsx)("button",{onClick:()=>f(!w),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full md:w-auto",children:"Add Instructor"})]}),w&&(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"name",children:"Name"}),(0,t.jsx)("input",{id:"name",type:"text",name:"name",value:C.name,onChange:I,className:"w-full mt-1 block text-gray-900 dark:text-white px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"email",children:"Email"}),(0,t.jsx)("input",{id:"email",type:"email",name:"email",value:C.email,onChange:I,className:"w-full mt-1 block text-gray-900 dark:text-white px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(i.Label,{htmlFor:"password",children:"Password"}),(0,t.jsx)("input",{id:"password",type:"password",name:"password",value:C.password,onChange:I,className:"w-full mt-1 block text-gray-900 dark:text-white px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800"})]}),(0,t.jsx)(l.Button,{className:"w-full md:w-auto dark:text-white dark:bg-blue-600 dark:hover:bg-blue-700",onClick:L,children:"Save"})]}),(0,t.jsx)("div",{className:"p-6",children:0===F.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center",children:(0,t.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:b?"No instructors match your search.":"No instructors found. Click 'Add Instructor' to create one."})})}):(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"h-96 overflow-x-auto rounded-sm",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-800",children:[(0,t.jsx)("thead",{children:(0,t.jsx)("tr",{children:["Name","Email","Date","Status"].map(e=>(0,t.jsx)("th",{className:"px-4 md:px-6 py-3 text-[12px] md:text-xs font-medium uppercase text-gray-500 dark:text-white tracking-wider text-left",children:e},e))})}),(0,t.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:F.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsx)("td",{className:"px-4 md:px-6 py-4 text-[12px] md:text-sm font-medium text-gray-700 dark:text-white",children:e.name||"N/A"}),(0,t.jsx)("td",{className:"px-4 md:px-6 py-4 text-[12px] md:text-sm text-gray-600 dark:text-gray-200",children:e.email}),(0,t.jsx)("td",{className:"px-4 md:px-6 py-4 text-[12px] md:text-sm text-gray-600 dark:text-gray-200",children:e.createdAt?new Date(e.createdAt).toLocaleDateString():"N/A"}),(0,t.jsx)("td",{className:"px-4 md:px-6 py-4",children:(0,t.jsx)(l.Button,{variant:"outline",onClick:()=>T(e._id,e.isStatus),className:`w-[70px] md:w-[82px] text-white ${e.isStatus?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"}`,children:e.isStatus?"Active":"Inactive"})})]},e._id))})]})}),(0,t.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-end items-center gap-3 mt-4 text-center md:text-right",children:[(0,t.jsxs)("span",{children:["Page ",p," of ",h]}),(0,t.jsx)(l.Button,{onClick:()=>D(p-1),disabled:1===p,className:"w-full md:w-auto",children:"Previous"}),(0,t.jsx)(l.Button,{onClick:()=>D(p+1),disabled:p===h,className:"w-full md:w-auto",children:"Next"})]})]})})]})})}])}]);