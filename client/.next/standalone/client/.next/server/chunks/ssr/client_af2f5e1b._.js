module.exports=[48047,a=>{"use strict";var b=a.i(9651),c=a.i(61199),d=a.i(21749),e=a.i(81545),f=a.i(81364),g=class extends e.Subscribable{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,f.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,f.hashKey)(b.mutationKey)!==(0,f.hashKey)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,c.getDefaultState)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){d.notifyManager.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context,d={client:this.#a,meta:this.options.meta,mutationKey:this.options.mutationKey};a?.type==="success"?(this.#d.onSuccess?.(a.data,b,c,d),this.#d.onSettled?.(a.data,null,b,c,d)):a?.type==="error"&&(this.#d.onError?.(a.error,b,c,d),this.#d.onSettled?.(void 0,a.error,b,c,d))}this.listeners.forEach(a=>{a(this.#b)})})}},h=a.i(56933);function i(a,c){let e=(0,h.useQueryClient)(c),[i]=b.useState(()=>new g(e,a));b.useEffect(()=>{i.setOptions(a)},[i,a]);let j=b.useSyncExternalStore(b.useCallback(a=>i.subscribe(d.notifyManager.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),k=b.useCallback((a,b)=>{i.mutate(a,b).catch(f.noop)},[i]);if(j.error&&(0,f.shouldThrowError)(i.options.throwOnError,[j.error]))throw j.error;return{...j,mutate:k,mutateAsync:j.mutate}}a.s(["useMutation",()=>i],48047)},43445,a=>{"use strict";var b=a.i(48047),c=a.i(39197),d=a.i(56933),e=a.i(44980);let f="https://lms-v4tz.onrender.com/courses",g=async a=>{try{let{data:b}=await e.default.post(`${f}`,a,{headers:{Authorization:"Bearer ","Content-Type":"application/json"}});return b}catch(a){throw Error(a.response?.data?.message||"Signup failed")}},h=async(a,b=1,c=7)=>{try{let{data:d}=await e.default.post(`${f}/get-creator-courses`,{userId:a,page:b,limit:c});return d}catch(a){throw Error(a.response?.data?.message||"Failed to fetch courses")}},i=async(a,b,c=1)=>{let d=new URLSearchParams({userRole:a,page:c.toString()});return"instructor"===a&&b&&d.append("userId",b),(await fetch(`${f}/alladmin?${d.toString()}`)).json()},j=async()=>{try{let{data:a}=await e.default.get(`${f}/summary`);return a}catch(a){throw Error(a.response?.data?.message||"Failed to fetch analytics")}},k=async a=>{try{return(await e.default.get(`${f}/${a}`)).data}catch(a){console.error("Error fetching course:",a)}},l=async(a,b,c)=>{try{let d=new FormData;Object.keys(b).forEach(a=>{d.append(a,b[a])}),c&&d.append("thumbnail",c);let{data:g}=await e.default.patch(`${f}/${a}`,d,{headers:{"Content-Type":"multipart/form-data"}});return g}catch(a){throw Error(a.response?.data?.message||"Updating Failed")}},m=async a=>{try{return(await e.default.get(`${f}/${a}/lectures`)).data}catch(a){console.error("Error fetching course:",a)}},n=async(a,b)=>{try{return(await e.default.put(`${f}/${a}/toggle-publish`,null,{headers:{Authorization:"Bearer "},params:{publish:b?.toString()}})).data.message}catch(a){throw console.error("Error toggling course publish status:",a.response?.data?.message||a.message),Error(a.response?.data?.message||"Failed to toggle publish status")}},o=async(a,b)=>{try{return(await e.default.put(`${f}/${a}/toggle-private`,null,{params:{privated:b?.toString()}})).data.message}catch(a){throw console.error("Error toggling course private status:",a.response?.data?.message||a.message),Error(a.response?.data?.message||"Failed to toggle private status")}},p=async(a=1,b=8,c)=>{try{let{data:d}=await e.default.get(`${f}/published/all`,{params:{companyId:c,page:a,limit:b}});return d}catch(a){throw console.error("Error fetching courses:",a),a}},q=async a=>{try{let{data:b}=await e.default.delete(`${f}/${a}`,{headers:{"Content-Type":"application/json"}});return b}catch(a){throw Error(a.response?.data?.message||"Deleting Failed")}};var r=a.i(85200),s=a.i(9651);a.s(["default",0,()=>{let a=(0,d.useQueryClient)(),e=(0,b.useMutation)({mutationFn:g,onSuccess:()=>{console.log("Course created successfully")},onError:a=>{console.error("Error creating course:",a)}}),f=(0,b.useMutation)({mutationFn:({courseId:a,updatedData:b,thumbnail:c})=>l(a,b,c),onSuccess:()=>{console.log("Course updated successfully")},onError:a=>{console.error("Error updating course:",a.message)}}),t=(0,b.useMutation)({mutationFn:({courseId:a,publish:b})=>n(a,b),onSuccess:()=>{console.log("Course updated successfully")},onError:a=>{console.error("Error updating course:",a.message)}}),u=(0,b.useMutation)({mutationFn:({courseId:a,privated:b})=>o(a,b),onSuccess:()=>{console.log("Course updated successfully")},onError:a=>{console.error("Error updating course:",a.message)}}),v=(0,b.useMutation)({mutationFn:({courseId:a})=>q(a),onSuccess:()=>{a.invalidateQueries({queryKey:["courses"]})},onError:a=>{r.default.error("Failed to delete course:",a)}});return{createNewCourse:e.mutate,editCourse:f.mutate,publishCourse:t.mutate,deleteCourse:v.mutate,privateCourse:u.mutate,getCreatorCoursesQuery:(a,b,d=7)=>{let e=(0,c.useQuery)({queryKey:["creatorCourses",a,b],queryFn:()=>h(a,b,d),enabled:!!a,placeholderData:a=>a,staleTime:5e3,refetchOnWindowFocus:!1});return(0,s.useEffect)(()=>{e.data&&console.log("Courses fetched successfully:",e.data)},[e.data]),(0,s.useEffect)(()=>{e.error&&console.error("Error fetching courses:",e.error)},[e.error]),e},getAdminCoursesQuery:(a,b,d)=>(0,c.useQuery)({queryKey:["courses",a,d,b],queryFn:()=>i(a,d,b),enabled:!!a}),useAnalyticsSummary:()=>(0,c.useQuery)({queryKey:["courseAnalyticsSummary"],queryFn:j,staleTime:5e3,refetchOnWindowFocus:!1}),getCourseByIdQuery:a=>{let b=(0,c.useQuery)({queryKey:["course",a],queryFn:()=>k(a),enabled:!!a,staleTime:5e3,refetchOnWindowFocus:!1});return(0,s.useEffect)(()=>{b.data&&console.log("Course fetched successfully:",b.data)},[b.data]),(0,s.useEffect)(()=>{b.error&&console.error("Error fetching course by ID:",b.error)},[b.error]),b},getCourseLecturesQuery:a=>{let b=(0,c.useQuery)({queryKey:["lectures",a],queryFn:()=>m(a),enabled:!!a});return(0,s.useEffect)(()=>{b.error&&console.error("Error fetching lectures:",b.error)},[b.error]),b},getPublishedCoursesQuery:(a,b,d,e)=>{let f=(0,c.useQuery)({queryKey:["publishedCourses",a,d],queryFn:()=>p(a,b,d),staleTime:5e3,enabled:e?.enabled});return(0,s.useEffect)(()=>{f.data&&console.log("Courses fetched successfully:",f.data)},[f.data]),(0,s.useEffect)(()=>{f.error&&console.error("Error fetching courses:",f.error)},[f.error]),f},isLoading:e.isPending,error:e.error||f.error}}],43445)},35503,53424,a=>{"use strict";var b=a.i(31276);let c=(0,b.default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDown",()=>c],35503);let d=(0,b.default)("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);a.s(["ChevronUp",()=>d],53424)},41257,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(44980),e=a.i(35503),f=a.i(53424),g=a.i(16003),h=a.i(2638),i=a.i(99382),j=a.i(4417),k=a.i(43445),l=a.i(96231),m=a.i(26332);function n(){let[a,n]=(0,c.useState)([]),[o,p]=(0,c.useState)(null),[q,r]=(0,c.useState)(!1),s=(0,m.getUserIdFromToken)(),{data:t,isLoading:u}=(0,l.useUserProfile)(s),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(1);(0,c.useEffect)(()=>{t?.role&&(w(t.role),y(1))},[t]);let{getAdminCoursesQuery:z}=(0,k.default)(),{data:A,isLoading:B,error:C}=z(t?.role||"",t?.role==="instructor"?s:void 0,x.toString());(0,c.useEffect)(()=>{A?.courses&&n(A.courses.map(a=>({...a,enrolledStudents:[],totalEnrolled:a.enrolledStudents?.length||0})))},[A]);let D=async a=>{if(o===a)return void p(null);try{r(!0);let b=(await d.default.get(`https://lms-v4tz.onrender.com/courses/${a}/sales`)).data.data;n(c=>c.map(c=>c._id===a?{...c,enrolledStudents:b.enrolledUsers,totalEnrolled:b.totalEnrolled}:c)),p(a)}catch(a){console.error("Failed to fetch enrolled students",a)}finally{r(!1)}};return(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 py-8 px-4",children:(0,b.jsxs)("div",{className:"max-w-5xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,b.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg",children:(0,b.jsx)(h.BookOpen,{className:"w-6 h-6 text-white"})}),(0,b.jsx)("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"My Courses"})]}),(0,b.jsx)("p",{className:"text-gray-600 ml-14",children:"Manage your courses and track student enrollments"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[(0,b.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:"Total Courses"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:a.length})]}),(0,b.jsx)("div",{className:"p-3 bg-blue-100 rounded-lg",children:(0,b.jsx)(h.BookOpen,{className:"w-6 h-6 text-blue-600"})})]})}),(0,b.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:"Total Students"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:a.reduce((a,b)=>a+b.totalEnrolled,0)})]}),(0,b.jsx)("div",{className:"p-3 bg-green-100 rounded-lg",children:(0,b.jsx)(g.Users,{className:"w-6 h-6 text-green-600"})})]})}),(0,b.jsx)("div",{className:"bg-white rounded-xl p-6 shadow-sm border border-gray-100",children:(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-gray-500 text-sm font-medium",children:"Avg. per Course"}),(0,b.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:a.length>0?Math.round(a.reduce((a,b)=>a+b.totalEnrolled,0)/a.length):0})]}),(0,b.jsx)("div",{className:"p-3 bg-purple-100 rounded-lg",children:(0,b.jsx)(j.User,{className:"w-6 h-6 text-purple-600"})})]})})]}),B&&(0,b.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}),(0,b.jsx)("div",{className:"space-y-4",children:a.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden transition-all duration-300 hover:shadow-md",children:[(0,b.jsxs)("button",{className:"w-full px-6 py-5 flex justify-between items-center bg-gradient-to-r from-white to-gray-50 hover:from-gray-50 hover:to-gray-100 transition-all duration-200",onClick:()=>D(a._id),children:[(0,b.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,b.jsx)("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-lg",children:(0,b.jsx)(h.BookOpen,{className:"w-5 h-5 text-white"})}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsx)("h3",{className:"font-semibold text-lg text-gray-900",children:a.courseTitle}),(0,b.jsxs)("span",{children:[a.coursePrice?`Price: ${a.coursePrice}`:"No price set","   "]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,b.jsx)(g.Users,{className:"w-4 h-4 text-gray-400"}),(0,b.jsxs)("span",{className:"text-sm text-gray-500",children:[a.totalEnrolled," ",1===a.totalEnrolled?"student":"students"," enrolled"]})]})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[q&&o===a._id&&(0,b.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-blue-600"}),(0,b.jsx)("div",{className:`p-2 rounded-lg transition-all duration-200 ${o===a._id?"bg-blue-100 text-blue-600":"bg-gray-100 text-gray-600"}`,children:o===a._id?(0,b.jsx)(f.ChevronUp,{className:"w-5 h-5"}):(0,b.jsx)(e.ChevronDown,{className:"w-5 h-5"})})]})]}),o===a._id&&(0,b.jsx)("div",{className:"px-6 py-5 bg-gray-50 border-t border-gray-100 animate-in slide-in-from-top-2 duration-300",children:0===a.enrolledStudents.length?(0,b.jsxs)("div",{className:"text-center py-8",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-gray-200 mb-4",children:(0,b.jsx)(g.Users,{className:"w-8 h-8 text-gray-400"})}),(0,b.jsx)("p",{className:"text-gray-500 font-medium",children:"No students enrolled yet"}),(0,b.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Students will appear here once they enroll"})]}):(0,b.jsxs)("div",{children:[(0,b.jsxs)("h4",{className:"text-sm font-semibold text-gray-700 mb-4 flex items-center gap-2",children:[(0,b.jsx)(g.Users,{className:"w-4 h-4"}),"Enrolled Students (",a.enrolledStudents.length,")"]}),(0,b.jsx)("div",{className:"grid gap-3",children:a.enrolledStudents.map(a=>(0,b.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-gray-100 hover:border-blue-200 hover:shadow-sm transition-all duration-200",children:[a.photoUrl?(0,b.jsx)("img",{src:a.photoUrl,alt:a.name,className:"w-10 h-10 rounded-full object-cover border-2 border-gray-200"}):(0,b.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-indigo-500 flex items-center justify-center text-white font-semibold",children:a.name.charAt(0).toUpperCase()}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:a.name}),(0,b.jsxs)("div",{className:"flex items-center gap-1 mt-0.5",children:[(0,b.jsx)(i.Mail,{className:"w-3 h-3 text-gray-400"}),(0,b.jsx)("p",{className:"text-sm text-gray-500",children:a.email})]})]})]},a._id))})]})})]},a._id))}),0===a.length&&!B&&(0,b.jsxs)("div",{className:"text-center py-16",children:[(0,b.jsx)("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-gray-100 mb-4",children:(0,b.jsx)(h.BookOpen,{className:"w-10 h-10 text-gray-400"})}),(0,b.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No courses yet"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Create your first course to get started"})]})]})})}a.s(["default",()=>n])}];

//# sourceMappingURL=client_af2f5e1b._.js.map