module.exports=[94141,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(77210),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(95019),g=a.i(91981);let h=(0,f.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(e,{ref:d,className:(0,g.cn)(h(),a),...c}));i.displayName=e.displayName,a.s(["Label",()=>i],94141)},39075,a=>{"use strict";let b=(0,a.i(31276).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],39075)},56763,a=>{"use strict";var b=a.i(16547),c=a.i(60657),d=a.i(96231),e=a.i(26332),f=a.i(9651),g=a.i(15723),h=a.i(94141),i=a.i(39075),j=a.i(52893),k=a.i(85200);a.s(["default",0,()=>{let a=(0,e.getUserIdFromToken)(),{data:l}=(0,d.useUserProfile)(a),[m,n]=(0,f.useState)([]),[o,p]=(0,f.useState)(1),[q,r]=(0,f.useState)(1),[s,t]=(0,f.useState)(!1),[u,v]=(0,f.useState)(""),[w,x]=(0,f.useState)(!1),[y,z]=(0,f.useState)(null),[A,B]=(0,f.useState)({name:"",password:"",email:"",role:"instructor",companyId:""});(0,f.useEffect)(()=>{let a=localStorage.getItem("companyId");a&&(z(a),B(b=>({...b,companyId:a})))},[]);let C=a=>{let{name:b,value:c}=a.target;B(a=>({...a,[b]:c}))},D=async a=>{if(a.preventDefault(),m.some(a=>a.email.toLowerCase()===A.email.toLowerCase()))return void k.default.error("This email is already registered");try{let a=await fetch("https://lms-v4tz.onrender.com/users/addinstructor",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(A)}),b=await a.json();a.ok&&b._id?(n(a=>[...a,b]),B({name:"",email:"",password:"",role:"instructor",companyId:y||""}),t(!1)):k.default.error("This email is already registered.")}catch(a){k.default.error(a.message||"An unknown error occurred")}},E=async(a,b)=>{try{if(!(await fetch(`https://lms-v4tz.onrender.com/users/toggle-status/${a}?status=${!b}`,{method:"PUT",headers:{"Content-Type":"application/json"}})).ok)throw Error("Failed to update status");n(c=>c.map(c=>c._id===a?{...c,isStatus:!b}:c)),k.default.success(`Instructor ${!b?"activated":"deactivated"} successfully`)}catch(a){k.default.error("Failed to toggle instructor status")}},F=async(a=1)=>{try{let b=await (0,c.getInstructor)(a,7);b?.success&&Array.isArray(b.instructors)?(n(b.instructors),p(b.totalPages??1)):k.default.error("Unexpected response format")}catch(a){k.default.error("Failed to fetch instructors")}};(0,f.useEffect)(()=>{F(q)},[q]);let G=a=>{a>=1&&a<=o&&r(a)},H=m.filter(a=>a.name.toLowerCase().includes(u.toLowerCase())||a.email.toLowerCase().includes(u.toLowerCase()));return(0,b.jsx)("div",{className:"p-4 md:p-6 lg:p-8 dark:bg-card",children:l?.role==="admin"&&(0,b.jsxs)("div",{className:"bg-white dark:bg-card rounded-lg shadow",children:[(0,b.jsxs)("div",{className:"p-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-600 dark:text-white",children:"Instructors"}),(0,b.jsxs)("div",{className:"w-full md:flex-1 max-w-md relative",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 relative",children:[(0,b.jsx)(i.Search,{className:"h-5 w-5 text-gray-400 absolute left-3"}),(0,b.jsx)("input",{type:"text",placeholder:"Search instructors...",value:u,onChange:a=>{v(a.target.value),r(1)},onFocus:()=>x(!0),onBlur:()=>setTimeout(()=>x(!1),100),className:"pl-10 pr-8 w-full py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white"}),u&&(0,b.jsx)("button",{onClick:()=>{v(""),x(!1)},className:"absolute right-3 text-gray-500 hover:text-gray-700 dark:text-gray-400",children:(0,b.jsx)(j.X,{className:"h-4 w-4"})})]}),w&&u&&(0,b.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[H.map(a=>(0,b.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",onMouseDown:()=>{v(a.email),x(!1)},children:[(0,b.jsx)("div",{className:"font-medium dark:text-white",children:a.name}),(0,b.jsx)("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:a.email})]},a._id)),0===H.length&&(0,b.jsx)("div",{className:"px-4 py-2 text-gray-500 dark:text-gray-400",children:"No matching instructors found"})]})]}),(0,b.jsx)("button",{onClick:()=>t(!s),className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 w-full md:w-auto",children:"Add Instructor"})]}),s&&(0,b.jsxs)("div",{className:"p-6 space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"name",children:"Name"}),(0,b.jsx)("input",{id:"name",type:"text",name:"name",value:A.name,onChange:C,className:"w-full mt-1 block text-gray-900 dark:text-white px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)("input",{id:"email",type:"email",name:"email",value:A.email,onChange:C,className:"w-full mt-1 block text-gray-900 dark:text-white px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(h.Label,{htmlFor:"password",children:"Password"}),(0,b.jsx)("input",{id:"password",type:"password",name:"password",value:A.password,onChange:C,className:"w-full mt-1 block text-gray-900 dark:text-white px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-800"})]}),(0,b.jsx)(g.Button,{className:"w-full md:w-auto dark:text-white dark:bg-blue-600 dark:hover:bg-blue-700",onClick:D,children:"Save"})]}),(0,b.jsx)("div",{className:"p-6",children:0===H.length?(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:4,className:"px-6 py-4 text-center",children:(0,b.jsx)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:u?"No instructors match your search.":"No instructors found. Click 'Add Instructor' to create one."})})}):(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"h-96 overflow-x-auto rounded-sm",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-800",children:[(0,b.jsx)("thead",{children:(0,b.jsx)("tr",{children:["Name","Email","Date","Status"].map(a=>(0,b.jsx)("th",{className:"px-4 md:px-6 py-3 text-[12px] md:text-xs font-medium uppercase text-gray-500 dark:text-white tracking-wider text-left",children:a},a))})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200 dark:divide-gray-800",children:H.map(a=>(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{className:"px-4 md:px-6 py-4 text-[12px] md:text-sm font-medium text-gray-700 dark:text-white",children:a.name||"N/A"}),(0,b.jsx)("td",{className:"px-4 md:px-6 py-4 text-[12px] md:text-sm text-gray-600 dark:text-gray-200",children:a.email}),(0,b.jsx)("td",{className:"px-4 md:px-6 py-4 text-[12px] md:text-sm text-gray-600 dark:text-gray-200",children:a.createdAt?new Date(a.createdAt).toLocaleDateString():"N/A"}),(0,b.jsx)("td",{className:"px-4 md:px-6 py-4",children:(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>E(a._id,a.isStatus),className:`w-[70px] md:w-[82px] text-white ${a.isStatus?"bg-green-500 hover:bg-green-600":"bg-red-500 hover:bg-red-600"}`,children:a.isStatus?"Active":"Inactive"})})]},a._id))})]})}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-end items-center gap-3 mt-4 text-center md:text-right",children:[(0,b.jsxs)("span",{children:["Page ",q," of ",o]}),(0,b.jsx)(g.Button,{onClick:()=>G(q-1),disabled:1===q,className:"w-full md:w-auto",children:"Previous"}),(0,b.jsx)(g.Button,{onClick:()=>G(q+1),disabled:q===o,className:"w-full md:w-auto",children:"Next"})]})]})})]})})}])}];

//# sourceMappingURL=client_efca18c1._.js.map