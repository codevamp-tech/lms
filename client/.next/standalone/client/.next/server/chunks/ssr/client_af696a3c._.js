module.exports=[30246,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(91981);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},94141,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(77210),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(95019),g=a.i(91981);let h=(0,f.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(e,{ref:d,className:(0,g.cn)(h(),a),...c}));i.displayName=e.displayName,a.s(["Label",()=>i],94141)},48047,a=>{"use strict";var b=a.i(9651),c=a.i(61199),d=a.i(21749),e=a.i(81545),f=a.i(81364),g=class extends e.Subscribable{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,f.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,f.hashKey)(b.mutationKey)!==(0,f.hashKey)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,c.getDefaultState)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){d.notifyManager.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context,d={client:this.#a,meta:this.options.meta,mutationKey:this.options.mutationKey};a?.type==="success"?(this.#d.onSuccess?.(a.data,b,c,d),this.#d.onSettled?.(a.data,null,b,c,d)):a?.type==="error"&&(this.#d.onError?.(a.error,b,c,d),this.#d.onSettled?.(void 0,a.error,b,c,d))}this.listeners.forEach(a=>{a(this.#b)})})}},h=a.i(56933);function i(a,c){let e=(0,h.useQueryClient)(c),[i]=b.useState(()=>new g(e,a));b.useEffect(()=>{i.setOptions(a)},[i,a]);let j=b.useSyncExternalStore(b.useCallback(a=>i.subscribe(d.notifyManager.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),k=b.useCallback((a,b)=>{i.mutate(a,b).catch(f.noop)},[i]);if(j.error&&(0,f.shouldThrowError)(i.options.throwOnError,[j.error]))throw j.error;return{...j,mutate:k,mutateAsync:j.mutate}}a.s(["useMutation",()=>i],48047)},54649,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(71095);function e({reason:a,children:b}){throw Object.defineProperty(new d.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},59094,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return h}});let d=a.r(16547),e=a.r(10652),f=a.r(56704),g=a.r(50634);function h({moduleIds:a}){let b=f.workAsyncStorage.getStore();if(void 0===b)return null;let c=[];if(b.reactLoadableManifest&&a){let d=b.reactLoadableManifest;for(let b of a){if(!d[b])continue;let a=d[b].files;c.push(...a)}}return 0===c.length?null:(0,d.jsx)(d.Fragment,{children:c.map(a=>{let c=`${b.assetPrefix}/_next/${(0,g.encodeURIPath)(a)}`;return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:c,rel:"stylesheet",as:"style",nonce:b.nonce},a):((0,e.preload)(c,{as:"script",fetchPriority:"low",nonce:b.nonce}),null)})})}},31354,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(16547),e=a.r(9651),f=a.r(54649),g=a.r(59094);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},90049,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(96420)._(a.r(31354));function e(a,b){let c={};"function"==typeof a&&(c.loader=a);let e={...c,...b};return(0,d.default)({...e,modules:e.loadableGenerated?.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},28498,a=>{"use strict";let b=(0,a.i(31276).default)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);a.s(["Upload",()=>b],28498)},49791,a=>{"use strict";var b=a.i(39197),c=a.i(48047),d=a.i(56933),e=a.i(44980);let f="https://lms-v4tz.onrender.com/blogs",g=async(a,b)=>{try{let c=new FormData;c.append("title",a.title),c.append("content",a.content),c.append("authorId",a.authorId),a.excerpt&&c.append("excerpt",a.excerpt),a.category&&c.append("category",a.category),a.tags&&a.tags.length>0&&c.append("tags",JSON.stringify(a.tags)),b&&c.append("thumbnail",b);let{data:d}=await e.default.post(`${f}`,c,{headers:{"Content-Type":"multipart/form-data"}});return d}catch(a){throw Error(a.response?.data?.message||"Failed to create blog")}},h=async(a=1,b=10)=>{try{let{data:c}=await e.default.get(`${f}`,{params:{page:a,limit:b}});return c}catch(a){throw Error(a.response?.data?.message||"Failed to fetch blogs")}},i=async(a=1,b=10)=>{try{let{data:c}=await e.default.get(`${f}/published`,{params:{page:a,limit:b}});return c}catch(a){throw Error(a.response?.data?.message||"Failed to fetch published blogs")}},j=async a=>{try{let{data:b}=await e.default.get(`${f}/${a}`);return b}catch(a){throw Error(a.response?.data?.message||"Failed to fetch blog")}},k=async(a,b,c)=>{try{let d=new FormData;Object.keys(b).forEach(a=>{let c=b[a];void 0!==c&&(Array.isArray(c)?d.append(a,JSON.stringify(c)):d.append(a,c))}),c&&d.append("thumbnail",c);let{data:g}=await e.default.patch(`${f}/${a}`,d,{headers:{"Content-Type":"multipart/form-data"}});return g}catch(a){throw Error(a.response?.data?.message||"Failed to update blog")}},l=async a=>{try{let{data:b}=await e.default.delete(`${f}/${a}`);return b}catch(a){throw Error(a.response?.data?.message||"Failed to delete blog")}},m=async(a,b)=>{try{return(await e.default.put(`${f}/${a}/toggle-publish`,null,{params:{publish:b.toString()}})).data.message}catch(a){throw Error(a.response?.data?.message||"Failed to toggle publish status")}},n=async(a,b=1,c=10,d)=>{try{let{data:g}=await e.default.get(`${f}/author/${a}`,{params:{page:b,limit:c,...void 0!==d&&{published:d.toString()}}});return g}catch(a){throw Error(a.response?.data?.message||"Failed to fetch blogs by author")}};a.s(["useBlogById",0,a=>(0,b.useQuery)({queryKey:["blog",a],queryFn:()=>j(a),enabled:!!a}),"useBlogs",0,(a=1,c=10)=>(0,b.useQuery)({queryKey:["blogs",a,c],queryFn:()=>h(a,c)}),"useBlogsByAuthorId",0,(a,c=1,d=10,e)=>(0,b.useQuery)({queryKey:["blogs","author",a,c,d,e],queryFn:()=>n(a,c,d,e),enabled:!!a}),"useCreateBlog",0,()=>{let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({blogData:a,thumbnail:b})=>g(a,b),onSuccess:()=>{a.invalidateQueries({queryKey:["blogs"]})}})},"useDeleteBlog",0,()=>{let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>l(a),onSuccess:()=>{a.invalidateQueries({queryKey:["blogs"]})}})},"usePublishedBlogs",0,(a=1,c=50)=>(0,b.useQuery)({queryKey:["publishedBlogs",a,c],queryFn:()=>i(a,c)}),"useTogglePublishBlog",0,()=>{let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({blogId:a,publish:b})=>m(a,b),onSuccess:(b,c)=>{a.invalidateQueries({queryKey:["blogs"]}),a.invalidateQueries({queryKey:["blog",c.blogId]})}})},"useUpdateBlog",0,()=>{let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({blogId:a,data:b,thumbnail:c})=>k(a,b,c),onSuccess:(b,c)=>{a.invalidateQueries({queryKey:["blogs"]}),a.invalidateQueries({queryKey:["blog",c.blogId]})}})}],49791)},90915,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(91981);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("textarea",{className:(0,d.cn)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:e,...c}));e.displayName="Textarea",a.s(["Textarea",()=>e])},50634,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},27340,a=>{"use strict";var b=a.i(9651);function c(a){let c=b.useRef({value:a,previous:a});return b.useMemo(()=>(c.current.value!==a&&(c.current.previous=c.current.value,c.current.value=a),c.current.previous),[a])}a.s(["usePrevious",()=>c])},46190,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(76929),e=a.i(65003),f=a.i(69279),g=a.i(27340),h=a.i(57603),i=a.i(77210),j="Switch",[k,l]=(0,e.createContextScope)(j),[m,n]=k(j),o=c.forwardRef((a,e)=>{let{__scopeSwitch:g,name:h,checked:j,defaultChecked:k,required:l,disabled:n,value:o="on",onCheckedChange:p,form:q,...t}=a,[u,v]=c.useState(null),w=function(...a){return c.useCallback(function(...a){return b=>a.forEach(a=>{"function"==typeof a?a(b):null!=a&&(a.current=b)})}(...a),a)}(e,a=>v(a)),x=c.useRef(!1),y=!u||q||!!u.closest("form"),[z=!1,A]=(0,f.useControllableState)({prop:j,defaultProp:k,onChange:p});return(0,b.jsxs)(m,{scope:g,checked:z,disabled:n,children:[(0,b.jsx)(i.Primitive.button,{type:"button",role:"switch","aria-checked":z,"aria-required":l,"data-state":s(z),"data-disabled":n?"":void 0,disabled:n,value:o,...t,ref:w,onClick:(0,d.composeEventHandlers)(a.onClick,a=>{A(a=>!a),y&&(x.current=a.isPropagationStopped(),x.current||a.stopPropagation())})}),y&&(0,b.jsx)(r,{control:u,bubbles:!x.current,name:h,value:o,checked:z,required:l,disabled:n,form:q,style:{transform:"translateX(-100%)"}})]})});o.displayName=j;var p="SwitchThumb",q=c.forwardRef((a,c)=>{let{__scopeSwitch:d,...e}=a,f=n(p,d);return(0,b.jsx)(i.Primitive.span,{"data-state":s(f.checked),"data-disabled":f.disabled?"":void 0,...e,ref:c})});q.displayName=p;var r=a=>{let{control:d,checked:e,bubbles:f=!0,...i}=a,j=c.useRef(null),k=(0,g.usePrevious)(e),l=(0,h.useSize)(d);return c.useEffect(()=>{let a=j.current,b=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(k!==e&&b){let c=new Event("click",{bubbles:f});b.call(a,e),a.dispatchEvent(c)}},[k,e,f]),(0,b.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:e,...i,tabIndex:-1,ref:j,style:{...a.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function s(a){return a?"checked":"unchecked"}var t=a.i(91981);let u=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(o,{className:(0,t.cn)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",a),...c,ref:d,children:(0,b.jsx)(q,{className:(0,t.cn)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));u.displayName=o.displayName,a.s(["Switch",()=>u],46190)},45174,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(90049),e=a.i(15723),f=a.i(30246),g=a.i(94141),h=a.i(90915),i=a.i(46190),j=a.i(54949),k=a.i(49791),l=a.i(26332),m=a.i(85200),n=a.i(86028),o=a.i(28498),p=a.i(52893);let q=(0,d.default)(async()=>{},{loadableGenerated:{modules:[92019]},ssr:!1});a.s(["default",0,({blogId:a,isEdit:d=!1})=>{let r=(0,j.useRouter)(),s=(0,l.getUserIdFromToken)(),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(""),[D,E]=(0,c.useState)(!1),[F,G]=(0,c.useState)(null),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(!1),{data:L,isLoading:M}=(0,k.useBlogById)(a||""),N=(0,k.useCreateBlog)(),O=(0,k.useUpdateBlog)();(0,c.useEffect)(()=>{d&&L&&(u(L.title||""),w(L.content||""),y(L.excerpt||""),A(L.category||""),C(L.tags?.join(", ")||""),E(L.isPublished||!1),L.thumbnail&&I(L.thumbnail))},[d,L]);let P=async b=>{if(b.preventDefault(),!t.trim())return void m.default.error("Title is required");if(!v.trim())return void m.default.error("Content is required");K(!0);try{let b=B.split(",").map(a=>a.trim()).filter(a=>a);d&&a?(await O.mutateAsync({blogId:a,data:{title:t,content:v,excerpt:x,category:z,tags:b},thumbnail:F||void 0}),m.default.success("Blog updated successfully")):(await N.mutateAsync({blogData:{title:t,content:v,excerpt:x,category:z,tags:b,authorId:s||""},thumbnail:F||void 0}),m.default.success("Blog created successfully")),r.push("/admin/blogs")}catch(a){m.default.error(d?"Failed to update blog":"Failed to create blog")}finally{K(!1)}},Q={toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{size:[]}],["bold","italic","underline","strike","blockquote"],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image","video"],[{color:[]},{background:[]}],[{align:[]}],["clean"]]};return d&&M?(0,b.jsx)("div",{children:"Loading blog..."}):(0,b.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold mb-6",children:d?"Edit Blog":"Create New Blog"}),(0,b.jsxs)("form",{onSubmit:P,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"title",children:"Title *"}),(0,b.jsx)(f.Input,{id:"title",value:t,onChange:a=>u(a.target.value),placeholder:"Enter blog title",required:!0})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Thumbnail"}),(0,b.jsx)("div",{className:"flex items-center gap-4",children:H?(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)(n.default,{src:H,alt:"Thumbnail preview",width:200,height:120,className:"rounded-lg object-cover"}),(0,b.jsx)(e.Button,{type:"button",variant:"destructive",size:"sm",className:"absolute top-2 right-2",onClick:()=>{G(null),I(null)},children:(0,b.jsx)(p.X,{className:"h-4 w-4"})})]}):(0,b.jsxs)("label",{className:"flex flex-col items-center justify-center w-48 h-32 border-2 border-dashed rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800",children:[(0,b.jsx)(o.Upload,{className:"h-8 w-8 text-gray-400"}),(0,b.jsx)("span",{className:"mt-2 text-sm text-gray-500",children:"Upload Image"}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>{let b=a.target.files?.[0];b&&(G(b),I(URL.createObjectURL(b)))},className:"hidden"})]})})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"excerpt",children:"Excerpt"}),(0,b.jsx)(h.Textarea,{id:"excerpt",value:x,onChange:a=>y(a.target.value),placeholder:"Brief summary of the blog",rows:3})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{htmlFor:"tags",children:"Tags"}),(0,b.jsx)(f.Input,{id:"tags",value:B,onChange:a=>C(a.target.value),placeholder:"Comma-separated tags (e.g., react, javascript, web)"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(g.Label,{children:"Content *"}),(0,b.jsx)("div",{className:"bg-white dark:bg-gray-900 rounded-lg",children:(0,b.jsx)(q,{theme:"snow",value:v,onChange:w,modules:Q,formats:["header","font","size","bold","italic","underline","strike","blockquote","list","indent","link","image","video","color","background","align"],placeholder:"Write your blog content here...",className:"h-96"})})]}),d&&(0,b.jsxs)("div",{className:"flex items-center space-x-2 pt-12",children:[(0,b.jsx)(i.Switch,{id:"publish",checked:D,onCheckedChange:E}),(0,b.jsx)(g.Label,{htmlFor:"publish",children:D?"Published":"Draft"})]}),(0,b.jsxs)("div",{className:"flex gap-4 pt-14",children:[(0,b.jsx)(e.Button,{type:"submit",disabled:J,children:J?d?"Updating...":"Creating...":d?"Update Blog":"Create Blog"}),(0,b.jsx)(e.Button,{type:"button",variant:"outline",onClick:()=>r.push("/admin/blogs"),children:"Cancel"})]})]})]})}])}];

//# sourceMappingURL=client_af696a3c._.js.map