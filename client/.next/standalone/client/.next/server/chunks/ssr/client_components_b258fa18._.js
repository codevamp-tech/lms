module.exports=[30246,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(91981);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},33618,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(77210),e="Progress",[f,g]=function(a,d=[]){let e=[],f=()=>{let b=e.map(a=>c.createContext(a));return function(d){let e=d?.[a]||b;return c.useMemo(()=>({[`__scope${a}`]:{...d,[a]:e}}),[d,e])}};return f.scopeName=a,[function(d,f){let g=c.createContext(f),h=e.length;function i(d){let{scope:e,children:f,...i}=d,j=e?.[a][h]||g,k=c.useMemo(()=>i,Object.values(i));return(0,b.jsx)(j.Provider,{value:k,children:f})}return e=[...e,f],i.displayName=d+"Provider",[i,function(b,e){let i=e?.[a][h]||g,j=c.useContext(i);if(j)return j;if(void 0!==f)return f;throw Error(`\`${b}\` must be used within \`${d}\``)}]},function(...a){let b=a[0];if(1===a.length)return b;let d=()=>{let d=a.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(a){let e=d.reduce((b,{useScope:c,scopeName:d})=>{let e=c(a)[`__scope${d}`];return{...b,...e}},{});return c.useMemo(()=>({[`__scope${b.scopeName}`]:e}),[e])}};return d.scopeName=b.scopeName,d}(f,...d)]}(e),[h,i]=f(e),j=c.forwardRef((a,c)=>{var e,f;let{__scopeProgress:g,value:i=null,max:j,getValueLabel:k=m,...l}=a;(j||0===j)&&!p(j)&&console.error((e=`${j}`,`Invalid prop \`max\` of value \`${e}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let r=p(j)?j:100;null===i||q(i,r)||console.error((f=`${i}`,`Invalid prop \`value\` of value \`${f}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let s=q(i,r)?i:null,t=o(s)?k(s,r):void 0;return(0,b.jsx)(h,{scope:g,value:s,max:r,children:(0,b.jsx)(d.Primitive.div,{"aria-valuemax":r,"aria-valuemin":0,"aria-valuenow":o(s)?s:void 0,"aria-valuetext":t,role:"progressbar","data-state":n(s,r),"data-value":s??void 0,"data-max":r,...l,ref:c})})});j.displayName=e;var k="ProgressIndicator",l=c.forwardRef((a,c)=>{let{__scopeProgress:e,...f}=a,g=i(k,e);return(0,b.jsx)(d.Primitive.div,{"data-state":n(g.value,g.max),"data-value":g.value??void 0,"data-max":g.max,...f,ref:c})});function m(a,b){return`${Math.round(a/b*100)}%`}function n(a,b){return null==a?"indeterminate":a===b?"complete":"loading"}function o(a){return"number"==typeof a}function p(a){return o(a)&&!isNaN(a)&&a>0}function q(a,b){return o(a)&&!isNaN(a)&&a<=b&&a>=0}l.displayName=k;var r=a.i(91981);let s=c.forwardRef(({className:a,value:c,...d},e)=>(0,b.jsx)(j,{ref:e,className:(0,r.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",a),...d,children:(0,b.jsx)(l,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(c||0)}%)`}})}));s.displayName=j.displayName,a.s(["Progress",()=>s],33618)},5318,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(15723),e=a.i(30246),f=a.i(33618),g=a.i(54949),h=a.i(3642),i=a.i(44980);let j=async a=>{let b=new FormData;b.append("image",a);try{let{data:a}=await i.default.post("https://lms-v4tz.onrender.com/images/upload",b,{});return a}catch(a){throw Error(a.response?.data?.message||"Uploading Failed")}};var k=a.i(85200);a.s(["default",0,()=>{let a=(0,g.useRouter)(),[i,l]=(0,c.useState)(""),[m,n]=(0,c.useState)({name:"",website:"",email:"",phone:"",billingAddress:""}),[o,p]=(0,c.useState)(!0),[q,r]=(0,c.useState)(null),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(0),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)("");(0,c.useEffect)(()=>{let a=localStorage.getItem("companyId");a?l(a):console.warn("CompanyId not found in localStorage")},[]),(0,c.useEffect)(()=>{i&&(async()=>{try{let a=await fetch(`https://lms-v4tz.onrender.com/configurations/company/${i}`),b=await a.json(),c=Array.isArray(b)?b[0]:b;c&&(t(c._id),n({name:c.name||"",website:c.website||"",email:c.email||"",phone:c.phone||"",billingAddress:c.billingAddress||""}),c.image&&(v(c.image),B(c.image)))}catch(a){console.error("Error fetching configuration data:",a)}finally{p(!1)}})()},[i]);let C=a=>{n({...m,[a.target.name]:a.target.value})},D=async a=>{if(!a.target.files||0===a.target.files.length)return;let b=a.target.files[0];try{r(b),v(URL.createObjectURL(b)),z(!0);let a=await j(b);a?(B(a?.secure_url),k.default.success("Image uploaded successfully!")):k.default.error("Image upload failed!")}catch(a){console.error("Error uploading image:",a),k.default.error("Error uploading image!")}finally{z(!1)}},E=async b=>{b.preventDefault(),p(!0);try{if(!i){k.default.error("Company ID is missing!"),p(!1);return}let b={company_id:i,...m,image:A},c=s?`https://lms-v4tz.onrender.com/configurations/${s}`:"https://lms-v4tz.onrender.com/configurations/create",d=await fetch(c,{method:s?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(!d.ok)throw Error("Failed to update configuration");await d.json(),k.default.success("Configuration updated successfully!"),a.push("/admin/configuration")}catch(a){console.error("Error updating configuration:",a),k.default.error("Error updating configuration!")}finally{p(!1)}};return o?(0,b.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading configuration..."})]})}):(0,b.jsx)("div",{className:"min-h-[450px] w-full overflow-y-auto bg-gradient-to-br from-gray-50 to-gray-100 p-6",children:(0,b.jsxs)("form",{onSubmit:E,className:"max-w-6xl mx-auto space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Company Configuration"}),(0,b.jsx)("p",{className:"text-gray-500",children:"Update your company information and settings"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsx)("div",{className:"lg:col-span-1",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200 sticky top-6",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Company Logo"}),(0,b.jsx)("div",{className:"mb-6",children:u?(0,b.jsxs)("div",{className:"relative group",children:[(0,b.jsx)("img",{src:u,alt:"Company Logo",className:"w-full h-64 object-cover rounded-lg shadow-md border-2 border-gray-200"}),(0,b.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all duration-200 rounded-lg"})]}):(0,b.jsx)("div",{className:"w-full h-64 bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,b.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),(0,b.jsx)("p",{className:"mt-2 text-sm text-gray-500",children:"No image uploaded"})]})})}),y&&(0,b.jsxs)("div",{className:"mb-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,b.jsx)("span",{className:"text-sm font-medium text-blue-700",children:"Uploading..."}),(0,b.jsxs)("span",{className:"text-sm font-bold text-blue-700",children:[w,"%"]})]}),(0,b.jsx)(f.Progress,{value:w,className:"h-2"})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsxs)("label",{className:"block",children:[(0,b.jsx)("span",{className:"sr-only",children:"Choose file"}),(0,b.jsx)(e.Input,{type:"file",onChange:D,accept:"image/*",disabled:y,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed"})]}),(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"PNG, JPG, GIF up to 5MB"})]})]})}),(0,b.jsx)("div",{className:"lg:col-span-2",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl shadow-sm p-6 border border-gray-200",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-6",children:"Company Details"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"md:col-span-2",children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Company Name ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(e.Input,{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"Enter company name",name:"name",value:m.name,onChange:C,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(e.Input,{type:"email",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"company@example.com",name:"email",value:m.email,onChange:C,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(e.Input,{type:"tel",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"+1 (555) 000-0000",name:"phone",value:m.phone,onChange:C,required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Website"}),(0,b.jsx)(e.Input,{type:"url",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"https://example.com",name:"website",value:m.website,onChange:C})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Billing Address ",(0,b.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,b.jsx)(e.Input,{className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all",placeholder:"123 Main St, City, State, ZIP",name:"billingAddress",value:m.billingAddress,onChange:C,required:!0})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mt-8 pt-6 border-t border-gray-200",children:[(0,b.jsx)(d.Button,{type:"submit",disabled:o||y,className:"flex-1 sm:flex-none px-8 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow-md hover:shadow-lg transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:o?(0,b.jsxs)("span",{className:"flex items-center justify-center",children:[(0,b.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,b.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,b.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Configuration"}),(0,b.jsx)(h.default,{href:"/admin/configuration",children:(0,b.jsx)(d.Button,{type:"button",variant:"outline",className:"w-full sm:w-auto px-8 py-3 border-2 border-gray-300 text-gray-700 font-semibold rounded-lg hover:bg-gray-50 transition-all duration-200",children:"Cancel"})})]})]})})]})]})})}],5318)}];

//# sourceMappingURL=client_components_b258fa18._.js.map