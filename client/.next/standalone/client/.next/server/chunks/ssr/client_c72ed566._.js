module.exports=[48047,a=>{"use strict";var b=a.i(9651),c=a.i(61199),d=a.i(21749),e=a.i(81545),f=a.i(81364),g=class extends e.Subscribable{#a;#b=void 0;#c;#d;constructor(a,b){super(),this.#a=a,this.setOptions(b),this.bindMethods(),this.#e()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(a){let b=this.options;this.options=this.#a.defaultMutationOptions(a),(0,f.shallowEqualObjects)(this.options,b)||this.#a.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#c,observer:this}),b?.mutationKey&&this.options.mutationKey&&(0,f.hashKey)(b.mutationKey)!==(0,f.hashKey)(this.options.mutationKey)?this.reset():this.#c?.state.status==="pending"&&this.#c.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#c?.removeObserver(this)}onMutationUpdate(a){this.#e(),this.#f(a)}getCurrentResult(){return this.#b}reset(){this.#c?.removeObserver(this),this.#c=void 0,this.#e(),this.#f()}mutate(a,b){return this.#d=b,this.#c?.removeObserver(this),this.#c=this.#a.getMutationCache().build(this.#a,this.options),this.#c.addObserver(this),this.#c.execute(a)}#e(){let a=this.#c?.state??(0,c.getDefaultState)();this.#b={...a,isPending:"pending"===a.status,isSuccess:"success"===a.status,isError:"error"===a.status,isIdle:"idle"===a.status,mutate:this.mutate,reset:this.reset}}#f(a){d.notifyManager.batch(()=>{if(this.#d&&this.hasListeners()){let b=this.#b.variables,c=this.#b.context,d={client:this.#a,meta:this.options.meta,mutationKey:this.options.mutationKey};a?.type==="success"?(this.#d.onSuccess?.(a.data,b,c,d),this.#d.onSettled?.(a.data,null,b,c,d)):a?.type==="error"&&(this.#d.onError?.(a.error,b,c,d),this.#d.onSettled?.(void 0,a.error,b,c,d))}this.listeners.forEach(a=>{a(this.#b)})})}},h=a.i(56933);function i(a,c){let e=(0,h.useQueryClient)(c),[i]=b.useState(()=>new g(e,a));b.useEffect(()=>{i.setOptions(a)},[i,a]);let j=b.useSyncExternalStore(b.useCallback(a=>i.subscribe(d.notifyManager.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),k=b.useCallback((a,b)=>{i.mutate(a,b).catch(f.noop)},[i]);if(j.error&&(0,f.shouldThrowError)(i.options.throwOnError,[j.error]))throw j.error;return{...j,mutate:k,mutateAsync:j.mutate}}a.s(["useMutation",()=>i],48047)},41565,a=>{"use strict";let b=(0,a.i(31276).default)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],41565)},39075,a=>{"use strict";let b=(0,a.i(31276).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],39075)},90115,a=>{"use strict";let b=(0,a.i(31276).default)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);a.s(["Clock",()=>b],90115)},79342,a=>{"use strict";let b=(0,a.i(31276).default)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],79342)},49791,a=>{"use strict";var b=a.i(39197),c=a.i(48047),d=a.i(56933),e=a.i(44980);let f="https://lms-v4tz.onrender.com/blogs",g=async(a,b)=>{try{let c=new FormData;c.append("title",a.title),c.append("content",a.content),c.append("authorId",a.authorId),a.excerpt&&c.append("excerpt",a.excerpt),a.category&&c.append("category",a.category),a.tags&&a.tags.length>0&&c.append("tags",JSON.stringify(a.tags)),b&&c.append("thumbnail",b);let{data:d}=await e.default.post(`${f}`,c,{headers:{"Content-Type":"multipart/form-data"}});return d}catch(a){throw Error(a.response?.data?.message||"Failed to create blog")}},h=async(a=1,b=10)=>{try{let{data:c}=await e.default.get(`${f}`,{params:{page:a,limit:b}});return c}catch(a){throw Error(a.response?.data?.message||"Failed to fetch blogs")}},i=async(a=1,b=10)=>{try{let{data:c}=await e.default.get(`${f}/published`,{params:{page:a,limit:b}});return c}catch(a){throw Error(a.response?.data?.message||"Failed to fetch published blogs")}},j=async a=>{try{let{data:b}=await e.default.get(`${f}/${a}`);return b}catch(a){throw Error(a.response?.data?.message||"Failed to fetch blog")}},k=async(a,b,c)=>{try{let d=new FormData;Object.keys(b).forEach(a=>{let c=b[a];void 0!==c&&(Array.isArray(c)?d.append(a,JSON.stringify(c)):d.append(a,c))}),c&&d.append("thumbnail",c);let{data:g}=await e.default.patch(`${f}/${a}`,d,{headers:{"Content-Type":"multipart/form-data"}});return g}catch(a){throw Error(a.response?.data?.message||"Failed to update blog")}},l=async a=>{try{let{data:b}=await e.default.delete(`${f}/${a}`);return b}catch(a){throw Error(a.response?.data?.message||"Failed to delete blog")}},m=async(a,b)=>{try{return(await e.default.put(`${f}/${a}/toggle-publish`,null,{params:{publish:b.toString()}})).data.message}catch(a){throw Error(a.response?.data?.message||"Failed to toggle publish status")}},n=async(a,b=1,c=10,d)=>{try{let{data:g}=await e.default.get(`${f}/author/${a}`,{params:{page:b,limit:c,...void 0!==d&&{published:d.toString()}}});return g}catch(a){throw Error(a.response?.data?.message||"Failed to fetch blogs by author")}};a.s(["useBlogById",0,a=>(0,b.useQuery)({queryKey:["blog",a],queryFn:()=>j(a),enabled:!!a}),"useBlogs",0,(a=1,c=10)=>(0,b.useQuery)({queryKey:["blogs",a,c],queryFn:()=>h(a,c)}),"useBlogsByAuthorId",0,(a,c=1,d=10,e)=>(0,b.useQuery)({queryKey:["blogs","author",a,c,d,e],queryFn:()=>n(a,c,d,e),enabled:!!a}),"useCreateBlog",0,()=>{let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({blogData:a,thumbnail:b})=>g(a,b),onSuccess:()=>{a.invalidateQueries({queryKey:["blogs"]})}})},"useDeleteBlog",0,()=>{let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:a=>l(a),onSuccess:()=>{a.invalidateQueries({queryKey:["blogs"]})}})},"usePublishedBlogs",0,(a=1,c=50)=>(0,b.useQuery)({queryKey:["publishedBlogs",a,c],queryFn:()=>i(a,c)}),"useTogglePublishBlog",0,()=>{let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({blogId:a,publish:b})=>m(a,b),onSuccess:(b,c)=>{a.invalidateQueries({queryKey:["blogs"]}),a.invalidateQueries({queryKey:["blog",c.blogId]})}})},"useUpdateBlog",0,()=>{let a=(0,d.useQueryClient)();return(0,c.useMutation)({mutationFn:({blogId:a,data:b,thumbnail:c})=>k(a,b,c),onSuccess:(b,c)=>{a.invalidateQueries({queryKey:["blogs"]}),a.invalidateQueries({queryKey:["blog",c.blogId]})}})}],49791)},38290,a=>{"use strict";var b=a.i(16547),c=a.i(3642),d=a.i(9651);let e=(0,a.i(31276).default)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);var f=a.i(90115),g=a.i(88664),h=a.i(39075),i=a.i(41565),j=a.i(79342),k=a.i(91718),l=a.i(54949),m=a.i(49791);function n(){let a=(0,l.useRouter)(),[n,o]=(0,d.useState)(""),[p,q]=(0,d.useState)(new Set),[r,s]=(0,d.useState)(null),t=(0,d.useRef)(null),{data:u,isLoading:v,isError:w}=(0,m.usePublishedBlogs)(1,50),x=u?.blogs||[];(0,d.useEffect)(()=>{x.length>0&&!r&&s(x[0]._id)},[x,r]),(0,d.useEffect)(()=>{t.current&&(t.current.scrollTop=0)},[r]);let y=(0,d.useMemo)(()=>x.filter(a=>a.title.toLowerCase().includes(n.toLowerCase())||(a.excerpt?.toLowerCase().includes(n.toLowerCase())??!1)||(a.tags?.some(a=>a.toLowerCase().includes(n.toLowerCase()))??!1)),[x,n]),z=a=>{a.currentTarget.src="https://via.placeholder.com/900x500?text=Mr+English+Blog"},A=x.find(a=>a._id===r)||x[0],B=a=>Math.max(1,Math.ceil(a.split(/\s+/).length/200)),C=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return v?(0,b.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,b.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,b.jsx)(j.Loader2,{className:"w-8 h-8 animate-spin text-gray-900"}),(0,b.jsx)("p",{className:"text-gray-600",children:"Loading blogs..."})]})}):w?(0,b.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("p",{className:"text-red-500 mb-4",children:"Failed to load blogs"}),(0,b.jsx)("button",{onClick:()=>a.refresh(),className:"px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-800",children:"Try Again"})]})}):0===x.length?(0,b.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,b.jsxs)("button",{onClick:()=>a.back(),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors mb-4 sm:mb-6 group p-4",children:[(0,b.jsx)(i.ArrowLeft,{className:"w-4 h-4 sm:w-5 sm:h-5 transform group-hover:-translate-x-1 transition-transform"}),(0,b.jsx)("span",{className:"text-sm sm:text-base",children:"Back"})]}),(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,b.jsx)("p",{className:"text-gray-500 text-lg",children:"No blogs published yet."}),(0,b.jsx)("p",{className:"text-gray-400 mt-2",children:"Check back later for new content!"})]})]}):(0,b.jsxs)("div",{className:"min-h-screen bg-white text-gray-900",children:[(0,b.jsxs)("button",{onClick:()=>a.back(),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors mb-4 sm:mb-6 group p-4",children:[(0,b.jsx)(i.ArrowLeft,{className:"w-4 h-4 sm:w-5 sm:h-5 transform group-hover:-translate-x-1 transition-transform"}),(0,b.jsx)("span",{className:"text-sm sm:text-base",children:"Back"})]}),(0,b.jsx)("div",{className:"bg-white text-gray-900 py-10 border-b border-gray-200",children:(0,b.jsx)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8",children:(0,b.jsxs)(k.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.5},className:"text-center",children:[(0,b.jsx)("h1",{className:"text-4xl sm:text-5xl font-extrabold mb-2 text-gray-900",children:"Mr English — Learning Blog"}),(0,b.jsx)("p",{className:"text-sm sm:text-base text-gray-600 max-w-2xl mx-auto",children:"Tips, lessons and insights to master English — grammar, speaking, vocabulary and more."})]})})}),(0,b.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[(0,b.jsxs)("div",{className:"mb-6 flex flex-col lg:flex-row gap-4 items-center justify-between",children:[(0,b.jsxs)("div",{className:"relative w-full lg:w-2/3",children:[(0,b.jsx)(h.Search,{className:"absolute left-4 top-3.5 text-gray-500 w-5 h-5"}),(0,b.jsx)("input",{type:"text",placeholder:"Search blogs by title, keyword, or tag...",value:n,onChange:a=>o(a.target.value),className:"w-full pl-12 pr-4 py-3 rounded-lg border border-gray-300 bg-white text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-900"})]}),(0,b.jsx)("div",{className:"flex gap-2 flex-wrap justify-end w-full lg:w-auto"})]}),0===y.length?(0,b.jsx)("div",{className:"text-center py-12",children:(0,b.jsx)("p",{className:"text-gray-500",children:"No blogs found matching your search criteria."})}):(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsx)("div",{className:"lg:col-span-2",ref:t,children:A&&(0,b.jsxs)(k.motion.article,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.4},className:"bg-white rounded-xl shadow-sm overflow-hidden border border-gray-200",children:[(0,b.jsx)("div",{className:"relative h-72 md:h-96 bg-gray-100",children:(0,b.jsx)("img",{src:A.thumbnail||"https://via.placeholder.com/900x500?text=Mr+English+Blog",alt:A.title,onError:z,className:"w-full h-full object-cover"})}),(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:A.title}),(0,b.jsxs)("p",{className:"text-sm text-gray-500 mb-4",children:["By ",A.author?.name||"Unknown Author"," • ",C(A.publishedAt||A.createdAt)]}),(0,b.jsxs)("div",{className:"blog-content text-gray-800",children:[A.excerpt&&(0,b.jsx)("p",{className:"text-lg text-gray-600 mb-4",children:A.excerpt}),(0,b.jsx)("div",{dangerouslySetInnerHTML:{__html:A.content},className:"blog-content"})]}),(0,b.jsxs)("div",{className:"mt-6 flex items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("img",{src:A.author?.photoUrl||`https://api.dicebear.com/7.x/avataaars/svg?seed=${A.author?.name||"user"}`,alt:A.author?.name||"Author",className:"w-10 h-10 rounded-full",onError:z}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"text-sm font-medium",children:A.author?.name||"Unknown Author"}),(0,b.jsx)("div",{className:"text-xs text-gray-500",children:C(A.publishedAt||A.createdAt)})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)(f.Clock,{className:"w-4 h-4"}),(0,b.jsxs)("span",{children:[B(A.content)," min"]})]}),(0,b.jsxs)("button",{onClick:()=>{var a;return a=A._id,void q(b=>{let c=new Set(b);return c.has(a)?c.delete(a):c.add(a),c})},className:`px-3 py-2 rounded-md text-sm font-medium transition ${p.has(A._id)?"bg-gray-900 text-white":"bg-gray-100 text-gray-800"}`,children:[(0,b.jsx)(e,{className:`w-4 h-4 inline-block mr-2 ${p.has(A._id)?"fill-current":""}`}),"Like"]})]})]}),A.tags&&A.tags.length>0&&(0,b.jsx)("div",{className:"mt-6 flex flex-wrap gap-2",children:A.tags.map((a,c)=>(0,b.jsxs)("span",{className:"px-3 py-1 bg-gray-100 text-gray-700 text-sm rounded-full",children:["#",a]},c))})]})]},A._id)}),(0,b.jsx)("aside",{className:"lg:col-span-1",children:(0,b.jsx)("div",{className:"space-y-4",children:y.map(a=>(0,b.jsxs)(k.motion.div,{initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{duration:.25},whileHover:{scale:1.02},className:`flex gap-3 items-center p-3 rounded-lg cursor-pointer transition-shadow ${a._id===r?"bg-gray-100 ring-1 ring-gray-400":"bg-white shadow-sm"}`,onClick:()=>s(a._id),children:[(0,b.jsx)("div",{className:"w-20 h-14 flex-shrink-0 rounded-md overflow-hidden bg-gray-100",children:(0,b.jsx)("img",{src:a.thumbnail||"https://via.placeholder.com/200x120?text=Blog",alt:a.title,onError:z,className:"w-full h-full object-cover"})}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsx)("h4",{className:`text-sm font-semibold line-clamp-2 ${a._id===r?"text-gray-900":"text-gray-700"}`,children:a.title}),(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:[a.author?.name||"Unknown"," • ",B(a.content)," min"]})]})]},a._id))})})]}),(0,b.jsx)("div",{className:"mt-10 text-center",children:(0,b.jsxs)(c.default,{href:"/",className:"inline-flex items-center gap-2 text-gray-700 hover:text-gray-900",children:[(0,b.jsx)(g.ChevronRight,{className:"w-5 h-5 rotate-180"}),"Back to Home"]})})]}),(0,b.jsx)("footer",{className:"mt-20 bg-white text-gray-600 py-8 text-center border-t border-gray-200",children:(0,b.jsxs)("p",{className:"text-sm",children:["© ",new Date().getFullYear()," Mr English Training Academy. All rights reserved."]})})]})}a.s(["default",()=>n],38290)}];

//# sourceMappingURL=client_c72ed566._.js.map