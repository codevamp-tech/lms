module.exports=[28373,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(91981);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-xl border border-gray-300 bg-card  dark:bg-navBackground  text-card-foreground shadow",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent";let j=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex items-center p-6 pt-0",a),...c}));j.displayName="CardFooter",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardFooter",()=>j,"CardHeader",()=>f,"CardTitle",()=>g])},44718,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(54949),e=a.i(26332);a.s(["default",0,({children:a})=>{let f=(0,d.useRouter)(),g=(0,e.getUserIdFromToken)();return((0,c.useEffect)(()=>{g||f.push("/login")},[g,f]),g)?(0,b.jsx)(b.Fragment,{children:a}):null}])},14305,a=>{"use strict";let b=(0,a.i(31276).default)("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);a.s(["Star",()=>b],14305)},4309,a=>{"use strict";let b=(0,a.i(31276).default)("StarHalf",[["path",{d:"M12 18.338a2.1 2.1 0 0 0-.987.244L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.12 2.12 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.12 2.12 0 0 0 1.597-1.16l2.309-4.679A.53.53 0 0 1 12 2",key:"2ksp49"}]]);a.s(["StarHalf",()=>b],4309)},58285,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(44980),e=a.i(28373),f=a.i(15723),g=a.i(85200),h=a.i(26332),i=a.i(14305),j=a.i(4309),k=a.i(3642),l=a.i(44718);let m=({rating:a})=>{let c=Math.floor(a),d=a-c>=.5;return(0,b.jsxs)("div",{className:"flex",children:[Array.from({length:c}).map((a,c)=>(0,b.jsx)(i.Star,{className:"h-4 w-4 text-yellow-500 fill-current"},`full-${c}`)),d&&(0,b.jsx)(j.StarHalf,{className:"h-4 w-4 text-yellow-500 fill-current"},"half"),Array.from({length:5-c-!!d}).map((a,c)=>(0,b.jsx)(i.Star,{className:"h-4 w-4 text-gray-500"},`empty-${c}`))]})};a.s(["default",0,()=>{let[a,i]=(0,c.useState)([]),[j,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)({}),q=(0,h.getUserIdFromToken)(),r=async()=>{n(!0);try{let{data:a}=await d.default.get(`https://lms-v4tz.onrender.com/favorites/user/${q}`);i(a)}catch(a){g.toast.error("Failed to fetch favorites")}finally{n(!1)}};(0,c.useEffect)(()=>{r()},[]);let s=(0,c.useCallback)(async()=>{let b={};for(let c of a)try{let a=await fetch(`https://lms-v4tz.onrender.com/ratings/${c.courseId._id}`);if(a.ok){let d=await a.json();b[c.courseId._id]=d}}catch(a){console.error(`Error fetching rating for course ${c.courseId._id}:`,a)}p(b)},[JSON.stringify(a)]);(0,c.useEffect)(()=>{a.length>0&&s()},[a.length,s]);let t=async a=>{try{await d.default.delete(`https://lms-v4tz.onrender.com/favorites/${a}/remove-favorites`,{data:{userId:q,courseId:a}}),g.toast.success("Removed from favorites"),r()}catch(a){g.toast.error("Failed to remove course")}};return(0,b.jsx)(l.default,{children:(0,b.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[(0,b.jsxs)("div",{className:"justify-center",children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold mb-3 sm:mb-4",children:"Favorites"}),!j&&(0,b.jsxs)("div",{className:"mb-2 text-sm sm:text-base text-gray-600",children:[a.length," Course(s) in favorites"]})]}),j?(0,b.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})}):0===a.length?(0,b.jsxs)("p",{children:["Your cart is empty."," ",(0,b.jsx)(k.default,{href:"/",className:"text-blue-600 hover:text-blue-800",children:"Go back to courses"})]}):(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 p-2 sm:p-4",children:a.map(a=>{let c=a.courseId.courseMRP&&a.courseId.coursePrice?Math.round((a.courseId.courseMRP-a.courseId.coursePrice)/a.courseId.courseMRP*100):0;return(0,b.jsxs)(e.Card,{className:"shadow-lg rounded-lg relative",children:[(0,b.jsx)("img",{src:a.courseId.courseThumbnail,alt:a.courseId.courseTitle,className:"w-full h-36 sm:h-44 object-cover rounded-t-lg"}),c>0&&(0,b.jsxs)("div",{className:"absolute top-0 right-0 bg-red-500 text-white px-2 py-1 text-xs font-bold rounded-tr-lg rounded-bl-lg",children:[c,"% OFF"]}),(0,b.jsxs)(e.CardContent,{className:"gap-2 mt-2",children:[(0,b.jsx)(k.default,{href:`/course/course-detail/${a.courseId._id}`,children:(0,b.jsx)("h3",{className:"text-base sm:text-lg lg:text-xl hover:underline line-clamp-2",children:a.courseId.courseTitle})}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsxs)("span",{className:"text-base sm:text-lg font-bold",children:["₹",a.courseId.coursePrice]}),a.courseId.courseMRP&&a.courseId.courseMRP>a.courseId.coursePrice&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("span",{className:"text-gray-500 line-through text-sm",children:["₹",a.courseId.courseMRP]}),(0,b.jsxs)("span",{className:"text-green-600 text-sm font-medium",children:["(",c,"% off)"]})]})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-stretch sm:items-center gap-2",children:[(0,b.jsx)("div",{className:"flex items-center gap-1 mt-1",children:o[a.courseId._id]?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m,{rating:o[a.courseId._id].average}),(0,b.jsxs)("span",{className:"text-sm text-gray-500 ml-2",children:["(",o[a.courseId._id].count," reviews)"]})]}):(0,b.jsx)("span",{className:"text-sm text-gray-500",children:"No ratings yet"})}),(0,b.jsx)(f.Button,{onClick:()=>t(a.courseId._id),className:"bg-red-500 hover:bg-red-600 text-white text-sm w-full sm:w-auto",children:"Remove"})]})]})]},a._id)})})]})})}])}];

//# sourceMappingURL=client_4f608914._.js.map