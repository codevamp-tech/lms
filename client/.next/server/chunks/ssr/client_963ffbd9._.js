module.exports=[30246,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(91981);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},90222,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(15723),e=a.i(30246);let f="https://lms-v4tz.onrender.com";function g(){let[a,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)(null),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)(1),[r]=(0,c.useState)(5),[s,t]=(0,c.useState)(0),[u,v]=(0,c.useState)({name:"",bio:""}),w=async()=>{try{let a=(p-1)*r,b=await fetch(`${f}/chat-buddy?skip=${a}&limit=${r}`),c=await b.json();g(c.buddies||[]),t(c.total||0)}catch(a){console.error(a)}finally{i(!1)}};(0,c.useEffect)(()=>{w()},[p]);let x=()=>{v({name:"",bio:""}),o(null),m(null),k(!1)},y=async a=>{a.preventDefault();let b=new FormData;b.append("name",u.name),b.append("bio",u.bio),n&&b.append("photo",n);let c=l?`${f}/chat-buddy/${l}`:`${f}/chat-buddy`;(await fetch(c,{method:l?"PATCH":"POST",body:b})).ok?(x(),w(),q(1)):alert("Something went wrong")},z=async a=>{if(confirm("Are you sure you want to delete this chat buddy?"))try{if(!(await fetch(`${f}/chat-buddy/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete");g(b=>b.filter(b=>b._id!==a)),t(a=>a-1)}catch(a){console.error(a),alert("Failed to delete buddy")}},A=async a=>{if(confirm("Remove one booked slot?"))try{if(!(await fetch(`${f}/chat-buddy/${a}/remove-slot`,{method:"PATCH"})).ok)throw Error("Failed");w()}catch(a){console.error(a),alert("Failed to remove slot")}},B=({bookedSlots:a,maxSlots:c})=>(0,b.jsx)("div",{className:"flex gap-1 mt-2",children:Array.from({length:c}).map((c,d)=>(0,b.jsx)("span",{className:`w-4 h-4 rounded-full border flex items-center justify-center
            ${d<a?"bg-green-500 border-green-500":"bg-gray-100 border-gray-300"}`,children:d<a&&(0,b.jsx)("span",{className:"text-white text-xs",children:"âœ“"})},d))});return(0,b.jsxs)("div",{className:"max-w-7xl mx-auto p-6 space-y-8",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold",children:"Chat Buddies"}),(0,b.jsx)(d.Button,{onClick:()=>{j?x():k(!0)},children:j?"Close Form":"Add Chat Buddy"})]}),j&&(0,b.jsxs)("form",{onSubmit:y,className:"bg-white p-6 rounded-lg shadow space-y-4",children:[(0,b.jsx)("h3",{className:"text-xl font-semibold",children:l?"Edit Chat Buddy":"Add Chat Buddy"}),(0,b.jsx)(e.Input,{placeholder:"Name",required:!0,value:u.name,onChange:a=>v({...u,name:a.target.value})}),(0,b.jsx)("textarea",{className:"w-full border rounded px-3 py-2",placeholder:"Bio",value:u.bio,onChange:a=>v({...u,bio:a.target.value})}),(0,b.jsx)("input",{type:"file",accept:"image/*",onChange:a=>o(a.target.files?.[0]||null)}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(d.Button,{type:"submit",children:l?"Update Buddy":"Create Buddy"}),(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:x,children:"Cancel"})]})]}),(0,b.jsx)("div",{className:"space-y-4",children:h?(0,b.jsx)("p",{children:"Loading..."}):0===a.length?(0,b.jsx)("p",{children:"No chat buddies found"}):a.map(a=>(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow p-4 flex gap-4",children:[(0,b.jsx)("img",{src:a.photo||"/placeholder-avatar.png",className:"w-14 h-14 rounded-full object-cover",alt:a.name}),(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("h3",{className:"font-semibold",children:a.name}),(0,b.jsx)("span",{className:"text-xs px-2 py-1 rounded bg-gray-100",children:a.status})]}),a.bio&&(0,b.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:a.bio}),(0,b.jsx)(B,{bookedSlots:a.bookedSlots,maxSlots:a.maxSlots}),(0,b.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,b.jsx)(d.Button,{size:"sm",variant:"outline",onClick:()=>{m(a._id),v({name:a.name,bio:a.bio||""}),k(!0)},children:"Edit"}),(0,b.jsx)(d.Button,{size:"sm",variant:"destructive",onClick:()=>z(a._id),children:"Delete"}),a.bookedSlots>0&&(0,b.jsx)(d.Button,{size:"sm",variant:"secondary",onClick:()=>A(a._id),children:"Remove Slot"})]})]})]},a._id))}),a.length>0&&(0,b.jsxs)("div",{className:"flex justify-center items-center gap-3",children:[(0,b.jsx)(d.Button,{onClick:()=>q(a=>Math.max(a-1,1)),disabled:1===p,variant:"outline",children:"Previous"}),(0,b.jsx)("div",{className:"flex gap-1",children:Array.from({length:Math.ceil(s/r)}).map((a,c)=>(0,b.jsx)(d.Button,{onClick:()=>q(c+1),variant:p===c+1?"default":"outline",size:"sm",children:c+1},c+1))}),(0,b.jsx)(d.Button,{onClick:()=>q(a=>Math.min(a+1,Math.ceil(s/r))),disabled:p===Math.ceil(s/r),variant:"outline",children:"Next"}),(0,b.jsxs)("span",{className:"text-sm text-gray-600 ml-2",children:["Page ",p," of ",Math.ceil(s/r)," | Total: ",s]})]})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=client_963ffbd9._.js.map