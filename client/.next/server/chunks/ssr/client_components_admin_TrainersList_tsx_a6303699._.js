module.exports=[62982,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(15723),e=a.i(94141),f=a.i(30246),g=a.i(39075),h=a.i(52893),i=a.i(31276);let j=(0,i.default)("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var k=a.i(99447),l=a.i(14305),m=a.i(16003),n=a.i(90115);let o=(0,i.default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);var p=a.i(85200),q=a.i(44980);let r="https://lms-v4tz.onrender.com/trainers",s=async a=>{try{return(await q.default.post(r,a,{headers:{"Content-Type":"application/json"}})).data}catch(a){throw Error(a.response?.data?.message||"Failed to create trainer")}},t=async(a=1,b=10)=>{throw Error("getTrainers must be called from the browser")},u=async(a,b)=>{try{return(await q.default.put(`${r}/${a}`,b,{headers:{"Content-Type":"application/json"}})).data}catch(a){throw Error(a.response?.data?.message||"Failed to update trainer")}},v=async a=>{try{let{data:b}=await q.default.delete(`${r}/${a}`);return b}catch(a){throw Error(a.response?.data?.message||"Failed to delete trainer")}},w=async a=>{try{let{data:b}=await q.default.patch(`${r}/${a}/toggle-status`);return b}catch(a){throw Error(a.response?.data?.message||"Failed to toggle trainer status")}};var x=a.i(96231),y=a.i(26332);a.s(["default",0,()=>{let a=(0,y.getUserIdFromToken)(),{data:i}=(0,x.useUserProfile)(a),[r,z]=(0,c.useState)([]),[A,B]=(0,c.useState)(1),[C,D]=(0,c.useState)(1),[E,F]=(0,c.useState)(!1),[G,H]=(0,c.useState)(!1),[I,J]=(0,c.useState)(!1),[K,L]=(0,c.useState)(""),[M,N]=(0,c.useState)(!1),[O,P]=(0,c.useState)(!1),[Q,R]=(0,c.useState)(null),[S,T]=(0,c.useState)(null),[U,V]=(0,c.useState)(""),W=(0,c.useRef)(null),X=(0,c.useRef)(null),[Y,Z]=(0,c.useState)({name:"",email:"",phone:"",expertise:"",bio:"",experience:"",studentsTaught:"",rating:0,photoUrl:"",companyId:""});(0,c.useEffect)(()=>{let a=localStorage.getItem("companyId");a&&(T(a),Z(b=>({...b,companyId:a})))},[]);let $=async(a=1)=>{N(!0);try{let b=await t(a,12);b?.success&&Array.isArray(b.trainers)&&(z(b.trainers),B(b.totalPages??1))}catch(a){p.default.error(a.message||"Failed to fetch trainers")}finally{N(!1)}};(0,c.useEffect)(()=>{$(C)},[C]);let _=a=>{let{name:b,value:c}=a.target;Z(a=>({...a,[b]:"rating"===b?parseFloat(c)||0:c}))},aa=async(a,b=!1)=>{if(!a)return;let c=new FormData;c.append("image",a),P(!0);try{let a=await q.default.post("https://lms-v4tz.onrender.com/images/upload",c,{headers:{"Content-Type":"multipart/form-data"}});a.data?.secure_url&&(Z(b=>({...b,photoUrl:a.data.secure_url})),V(a.data.secure_url),p.default.success("Photo uploaded successfully!"))}catch(a){p.default.error("Failed to upload photo"),console.error("Upload error:",a)}finally{P(!1)}},ab=(a,b=!1)=>{let c=a.target.files?.[0];if(c){let a=new FileReader;a.onloadend=()=>{V(a.result)},a.readAsDataURL(c),aa(c,b)}},ac=()=>{Z({name:"",email:"",phone:"",expertise:"",bio:"",experience:"",studentsTaught:"",rating:0,photoUrl:"",companyId:S||""}),V("")},ad=async a=>{if(a.preventDefault(),!Y.name||!Y.email)return void p.default.error("Name and Email are required");try{(await s(Y)).success&&(p.default.success("Trainer added successfully"),ac(),F(!1),$(C))}catch(a){p.default.error(a.message||"Failed to add trainer")}},ae=async a=>{if(a.preventDefault(),Q)try{(await u(Q._id,Y)).success&&(p.default.success("Trainer updated successfully"),H(!1),R(null),ac(),$(C))}catch(a){p.default.error(a.message||"Failed to update trainer")}},af=async()=>{if(Q)try{(await v(Q._id)).success&&(p.default.success("Trainer deleted successfully"),J(!1),R(null),$(C))}catch(a){p.default.error(a.message||"Failed to delete trainer")}},ag=async a=>{try{let b=await w(a._id);b.success&&(p.default.success(b.message),z(b=>b.map(b=>b._id===a._id?{...b,isActive:!b.isActive}:b)))}catch(a){p.default.error(a.message||"Failed to toggle status")}},ah=a=>{a>=1&&a<=A&&D(a)},ai=r.filter(a=>a.name.toLowerCase().includes(K.toLowerCase())||a.email.toLowerCase().includes(K.toLowerCase())||(a.expertise?.toLowerCase()||"").includes(K.toLowerCase()));return M&&0===r.length?(0,b.jsx)("div",{className:"p-6 flex justify-center items-center min-h-[400px]",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):(0,b.jsxs)("div",{className:"p-4 md:p-6 lg:p-8 dark:bg-card min-h-screen",children:[(i?.role==="admin"||i?.role==="superadmin")&&(0,b.jsxs)("div",{className:"bg-white dark:bg-card rounded-lg shadow",children:[(0,b.jsxs)("div",{className:"p-6 flex flex-col md:flex-row md:justify-between md:items-center gap-4 border-b dark:border-gray-700",children:[(0,b.jsx)("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"Trainers Management"}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[(0,b.jsx)("div",{className:"w-full md:w-72 relative",children:(0,b.jsxs)("div",{className:"flex items-center gap-2 relative",children:[(0,b.jsx)(g.Search,{className:"h-5 w-5 text-gray-400 absolute left-3"}),(0,b.jsx)("input",{type:"text",placeholder:"Search trainers...",value:K,onChange:a=>L(a.target.value),className:"pl-10 pr-8 w-full py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-800 dark:border-gray-700 dark:text-white"}),K&&(0,b.jsx)("button",{onClick:()=>L(""),className:"absolute right-3 text-gray-500 hover:text-gray-700 dark:text-gray-400",children:(0,b.jsx)(h.X,{className:"h-4 w-4"})})]})}),(0,b.jsx)("button",{onClick:()=>{ac(),F(!E)},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors w-full md:w-auto font-medium",children:E?"Cancel":"+ Add Trainer"})]})]}),E&&(0,b.jsxs)("div",{className:"p-6 border-b dark:border-gray-700 bg-gray-50 dark:bg-gray-900",children:[(0,b.jsx)("h3",{className:"text-lg font-semibold mb-4 dark:text-white",children:"Add New Trainer"}),(0,b.jsxs)("form",{onSubmit:ad,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center md:items-start",children:[(0,b.jsx)(e.Label,{className:"mb-2",children:"Trainer Photo"}),(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{onClick:()=>W.current?.click(),className:"w-32 h-32 rounded-full border-2 border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center cursor-pointer hover:border-blue-500 transition-colors overflow-hidden bg-gray-100 dark:bg-gray-800",children:U?(0,b.jsx)("img",{src:U,alt:"Preview",className:"w-full h-full object-cover"}):(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(o,{className:"w-8 h-8 mx-auto text-gray-400"}),(0,b.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"Upload Photo"})]})}),O&&(0,b.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})]}),(0,b.jsx)("input",{ref:W,type:"file",accept:"image/*",onChange:a=>ab(a),className:"hidden"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"name",children:"Name *"}),(0,b.jsx)(f.Input,{id:"name",name:"name",value:Y.name,onChange:_,className:"mt-1",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"email",children:"Email *"}),(0,b.jsx)(f.Input,{id:"email",name:"email",type:"email",value:Y.email,onChange:_,className:"mt-1",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"phone",children:"Phone"}),(0,b.jsx)(f.Input,{id:"phone",name:"phone",value:Y.phone,onChange:_,className:"mt-1"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"expertise",children:"Specialty/Expertise"}),(0,b.jsx)(f.Input,{id:"expertise",name:"expertise",value:Y.expertise,onChange:_,className:"mt-1",placeholder:"e.g., IELTS & TOEFL Expert"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"experience",children:"Experience"}),(0,b.jsx)(f.Input,{id:"experience",name:"experience",value:Y.experience,onChange:_,className:"mt-1",placeholder:"e.g., 3+ years"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"studentsTaught",children:"Students Taught"}),(0,b.jsx)(f.Input,{id:"studentsTaught",name:"studentsTaught",value:Y.studentsTaught,onChange:_,className:"mt-1",placeholder:"e.g., 1350+"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"rating",children:"Rating (0-5)"}),(0,b.jsx)(f.Input,{id:"rating",name:"rating",type:"number",step:"0.1",min:"0",max:"5",value:Y.rating,onChange:_,className:"mt-1"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"bio",children:"Bio"}),(0,b.jsx)("textarea",{id:"bio",name:"bio",value:Y.bio,onChange:_,rows:3,className:"w-full mt-1 px-3 py-2 border rounded-md dark:bg-gray-800 dark:border-gray-600 dark:text-white",placeholder:"Brief description about the trainer..."})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)(d.Button,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white",disabled:O,children:"Save Trainer"}),(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>{F(!1),ac()},children:"Cancel"})]})]})]}),(0,b.jsx)("div",{className:"p-6",children:0===ai.length?(0,b.jsxs)("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:[(0,b.jsx)(m.Users,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),(0,b.jsx)("p",{className:"text-lg",children:K?"No trainers match your search.":"No trainers found. Click 'Add Trainer' to create one."})]}):(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:ai.map(a=>(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 overflow-hidden shadow-sm hover:shadow-lg transition-shadow",children:[(0,b.jsx)("div",{className:"relative",children:(0,b.jsx)("div",{className:`absolute top-3 right-3 px-2 py-1 rounded-full text-xs font-medium ${a.isActive?"bg-green-100 text-green-700 dark:bg-green-900 dark:text-green-300":"bg-red-100 text-red-700 dark:bg-red-900 dark:text-red-300"}`,children:a.isActive?"Active":"Inactive"})}),(0,b.jsxs)("div",{className:"pt-6 pb-4 px-4 text-center border-b dark:border-gray-700",children:[(0,b.jsx)("div",{className:"w-24 h-24 mx-auto mb-4 rounded-full overflow-hidden border-4 border-blue-100 dark:border-blue-900",children:a.photoUrl?(0,b.jsx)("img",{src:a.photoUrl,alt:a.name,className:"w-full h-full object-cover"}):(0,b.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-2xl font-bold",children:a.name.charAt(0).toUpperCase()})}),(0,b.jsx)("h3",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:a.name}),(0,b.jsx)("p",{className:"text-sm text-blue-600 dark:text-blue-400 font-medium mt-1",children:a.expertise||"Trainer"})]}),(0,b.jsxs)("div",{className:"px-4 py-4 space-y-2",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[(0,b.jsx)(n.Clock,{size:16,className:"text-gray-400"}),(0,b.jsxs)("span",{children:[a.experience||"N/A"," Experience"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-300",children:[(0,b.jsx)(m.Users,{size:16,className:"text-gray-400"}),(0,b.jsxs)("span",{children:[a.studentsTaught||"0"," Students Taught"]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,b.jsx)(l.Star,{size:16,className:"text-yellow-500 fill-yellow-500"}),(0,b.jsx)("span",{className:"font-semibold text-gray-800 dark:text-white",children:a.rating?`${a.rating}/5.0`:"N/A"})]})]}),(0,b.jsxs)("div",{className:"px-4 py-3 bg-gray-50 dark:bg-gray-900 flex justify-between items-center",children:[(0,b.jsx)("button",{onClick:()=>ag(a),className:`text-xs px-3 py-1 rounded-full font-medium transition-colors ${a.isActive?"bg-red-100 text-red-600 hover:bg-red-200 dark:bg-red-900/50 dark:text-red-400":"bg-green-100 text-green-600 hover:bg-green-200 dark:bg-green-900/50 dark:text-green-400"}`,children:a.isActive?"Deactivate":"Activate"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>{R(a),Z({name:a.name,email:a.email,phone:a.phone||"",expertise:a.expertise||"",bio:a.bio||"",experience:a.experience||"",studentsTaught:a.studentsTaught||"",rating:a.rating||0,photoUrl:a.photoUrl||""}),V(a.photoUrl||""),H(!0)},className:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/50 rounded-full transition-colors",children:(0,b.jsx)(j,{size:16})}),(0,b.jsx)("button",{onClick:()=>{R(a),J(!0)},className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/50 rounded-full transition-colors",children:(0,b.jsx)(k.Trash2,{size:16})})]})]})]},a._id))}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:justify-center items-center gap-3 mt-8",children:[(0,b.jsx)(d.Button,{onClick:()=>ah(C-1),disabled:1===C,variant:"outline",children:"Previous"}),(0,b.jsxs)("span",{className:"text-gray-600 dark:text-gray-300 px-4",children:["Page ",C," of ",A]}),(0,b.jsx)(d.Button,{onClick:()=>ah(C+1),disabled:C===A,variant:"outline",children:"Next"})]})]})})]}),G&&Q&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,b.jsx)("h3",{className:"text-xl font-bold dark:text-white",children:"Edit Trainer"}),(0,b.jsx)("button",{onClick:()=>{H(!1),R(null),ac()},className:"text-gray-500 hover:text-gray-700 dark:text-gray-400",children:(0,b.jsx)(h.X,{size:24})})]}),(0,b.jsxs)("form",{onSubmit:ae,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col items-center",children:[(0,b.jsxs)("div",{className:"relative",children:[(0,b.jsx)("div",{onClick:()=>X.current?.click(),className:"w-32 h-32 rounded-full border-2 border-dashed border-gray-300 dark:border-gray-600 flex items-center justify-center cursor-pointer hover:border-blue-500 transition-colors overflow-hidden bg-gray-100 dark:bg-gray-800",children:U?(0,b.jsx)("img",{src:U,alt:"Preview",className:"w-full h-full object-cover"}):(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)(o,{className:"w-8 h-8 mx-auto text-gray-400"}),(0,b.jsx)("span",{className:"text-xs text-gray-500 mt-1",children:"Upload Photo"})]})}),O&&(0,b.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-full flex items-center justify-center",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})]}),(0,b.jsx)("input",{ref:X,type:"file",accept:"image/*",onChange:a=>ab(a,!0),className:"hidden"}),(0,b.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Click to change photo"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"edit-name",children:"Name *"}),(0,b.jsx)(f.Input,{id:"edit-name",name:"name",value:Y.name,onChange:_,className:"mt-1",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"edit-email",children:"Email *"}),(0,b.jsx)(f.Input,{id:"edit-email",name:"email",type:"email",value:Y.email,onChange:_,className:"mt-1",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"edit-phone",children:"Phone"}),(0,b.jsx)(f.Input,{id:"edit-phone",name:"phone",value:Y.phone,onChange:_,className:"mt-1"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"edit-expertise",children:"Specialty/Expertise"}),(0,b.jsx)(f.Input,{id:"edit-expertise",name:"expertise",value:Y.expertise,onChange:_,className:"mt-1"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"edit-experience",children:"Experience"}),(0,b.jsx)(f.Input,{id:"edit-experience",name:"experience",value:Y.experience,onChange:_,className:"mt-1",placeholder:"e.g., 3+ years"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"edit-studentsTaught",children:"Students Taught"}),(0,b.jsx)(f.Input,{id:"edit-studentsTaught",name:"studentsTaught",value:Y.studentsTaught,onChange:_,className:"mt-1",placeholder:"e.g., 1350+"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"edit-rating",children:"Rating (0-5)"}),(0,b.jsx)(f.Input,{id:"edit-rating",name:"rating",type:"number",step:"0.1",min:"0",max:"5",value:Y.rating,onChange:_,className:"mt-1"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)(e.Label,{htmlFor:"edit-bio",children:"Bio"}),(0,b.jsx)("textarea",{id:"edit-bio",name:"bio",value:Y.bio,onChange:_,rows:3,className:"w-full mt-1 px-3 py-2 border rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-white"})]}),(0,b.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,b.jsx)(d.Button,{type:"button",variant:"outline",onClick:()=>{H(!1),R(null),ac()},children:"Cancel"}),(0,b.jsx)(d.Button,{type:"submit",className:"bg-blue-600 hover:bg-blue-700 text-white",disabled:O,children:"Update Trainer"})]})]})]})}),I&&Q&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,b.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-6 w-full max-w-md",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 dark:bg-red-900/50 flex items-center justify-center",children:(0,b.jsx)(k.Trash2,{className:"w-8 h-8 text-red-600"})}),(0,b.jsx)("h3",{className:"text-xl font-bold mb-2 dark:text-white",children:"Delete Trainer"}),(0,b.jsxs)("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:["Are you sure you want to delete"," ",(0,b.jsx)("strong",{children:Q.name}),"? This action cannot be undone."]})]}),(0,b.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,b.jsx)(d.Button,{variant:"outline",onClick:()=>{J(!1),R(null)},children:"Cancel"}),(0,b.jsx)(d.Button,{onClick:af,className:"bg-red-600 hover:bg-red-700 text-white",children:"Delete"})]})]})})]})}],62982)}];

//# sourceMappingURL=client_components_admin_TrainersList_tsx_a6303699._.js.map