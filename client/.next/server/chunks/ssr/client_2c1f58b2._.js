module.exports=[30246,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(91981);let e=c.forwardRef(({className:a,type:c,...e},f)=>(0,b.jsx)("input",{type:c,className:(0,d.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:f,...e}));e.displayName="Input",a.s(["Input",()=>e])},94141,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(77210),e=c.forwardRef((a,c)=>(0,b.jsx)(d.Primitive.label,{...a,ref:c,onMouseDown:b=>{b.target.closest("button, input, select, textarea")||(a.onMouseDown?.(b),!b.defaultPrevented&&b.detail>1&&b.preventDefault())}}));e.displayName="Label";var f=a.i(95019),g=a.i(91981);let h=(0,f.cva)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=c.forwardRef(({className:a,...c},d)=>(0,b.jsx)(e,{ref:d,className:(0,g.cn)(h(),a),...c}));i.displayName=e.displayName,a.s(["Label",()=>i],94141)},99447,a=>{"use strict";let b=(0,a.i(31276).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);a.s(["Trash2",()=>b],99447)},69534,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(15723),e=a.i(94141),f=a.i(99447),g=a.i(30246),h=a.i(85200);a.s(["default",0,()=>{let[a,i]=(0,c.useState)([]),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(1),[r,s]=(0,c.useState)(1),[t,u]=(0,c.useState)(null),[v,w]=(0,c.useState)({name:"",email:"",password:"",role:"admin",companyId:""});(0,c.useEffect)(()=>{let a=localStorage.getItem("companyId");a&&(u(a),w(b=>({...b,companyId:a})))},[]),(0,c.useEffect)(()=>{(async()=>{try{let a=await fetch("https://lms-v4tz.onrender.com/companies/all-company"),b=await a.json();a.ok?i(b.companies):h.default.error("Failed to fetch companies.")}catch(a){h.default.error("An error occurred while fetching companies.")}})()},[]);let x=async(a=1)=>{o(!0);try{let b=await fetch(`https://lms-v4tz.onrender.com/users/admins?page=${a}&limit=10`,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}});if(!b.ok)throw Error("Failed to fetch data");let c=await b.json();m(c.admins),s(c.totalPages),q(c.currentPage)}catch(a){h.default.error(a.message)}finally{o(!1)}};(0,c.useEffect)(()=>{x(p)},[p]);let y=a=>{let{name:b,value:c}=a.target;w(a=>({...a,[b]:c}))},z=async a=>{if(a.preventDefault(),l.some(a=>a.email.toLowerCase()===v.email.toLowerCase()))return void h.default.error("Email is already registered");try{let a=await fetch("https://lms-v4tz.onrender.com/users/addAdmin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)}),b=await a.json();a.ok&&b._id?(await x(),w({name:"",email:"",password:"",role:"admin",companyId:t||""}),k(!1),h.default.success(`User added as ${v.role}`)):h.default.error("Failed to add user")}catch(a){h.default.error("An error occurred while adding the user.")}},A=async a=>{try{if(!(await fetch(`https://lms-v4tz.onrender.com/users/admin/${a}`,{method:"DELETE"})).ok)throw Error("Failed to delete admin");h.default.success("Admin deleted successfully"),x()}catch(a){h.default.error("Error deleting admin")}};return n?(0,b.jsx)("div",{children:"Loading..."}):(0,b.jsxs)("div",{className:"p-6 space-y-8 bg-card rounded-xl ",children:[(0,b.jsxs)("div",{className:"flex justify-between",children:[(0,b.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 dark:text-white",children:"Admin List"}),(0,b.jsx)(d.Button,{onClick:()=>k(a=>!a),children:j?"Cancel":"Add Admin"})]}),j&&(0,b.jsxs)("div",{className:"mt-6 space-y-6 ",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)(e.Label,{htmlFor:"name",children:"Name"}),(0,b.jsx)(g.Input,{id:"name",type:"text",name:"name",value:v.name,onChange:y,className:"mt-1 block w-full px-4 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)(e.Label,{htmlFor:"email",children:"Email"}),(0,b.jsx)(g.Input,{id:"email",type:"email",name:"email",value:v.email,onChange:y,className:"mt-1 block w-full px-4 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)(e.Label,{htmlFor:"password",children:"Password"}),(0,b.jsx)(g.Input,{id:"password",type:"password",name:"password",value:v.password,onChange:y,className:"mt-1 block w-full px-4 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,b.jsxs)("div",{className:"flex flex-col",children:[(0,b.jsx)(e.Label,{htmlFor:"companyId",children:"Company"}),(0,b.jsxs)("select",{id:"companyId",name:"companyId",value:v.companyId||"",onChange:a=>{w(b=>({...b,companyId:a.target.value}))},className:"mt-1 block w-full px-4 py-2 border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-gray-500 bg-card text-gray-500 dark:text-white",children:[(0,b.jsx)("option",{value:"",children:"Select a company"}),a.map(a=>(0,b.jsx)("option",{value:a._id,children:a.name},a._id))]})]})]}),(0,b.jsx)(d.Button,{onClick:z,children:"Add Admin"})]}),(0,b.jsx)("div",{className:"overflow-x-auto mt-4",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left text-gray-600",children:[(0,b.jsx)("thead",{className:"bg-gray-100 dark:text-gray-400 dark:bg-navBackground",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"py-3 px-4",children:"Name"}),(0,b.jsx)("th",{className:"py-3 px-4",children:"Email"}),(0,b.jsx)("th",{className:"py-3 px-4",children:"Role"}),(0,b.jsx)("th",{className:"py-3 px-4",children:"Company"}),(0,b.jsx)("th",{className:"py-3 px-4 text-center",children:"Action"})]})}),(0,b.jsx)("tbody",{children:Array.isArray(l)&&l.length>0?l.map(a=>(0,b.jsxs)("tr",{className:"border-t dark:text-white",children:[(0,b.jsx)("td",{className:"py-3 px-4",children:a.name}),(0,b.jsx)("td",{className:"py-3 px-4",children:a.email}),(0,b.jsx)("td",{className:"py-3 px-4",children:a.role}),(0,b.jsx)("td",{className:"py-3 px-4",children:a.companyId?(0,b.jsx)("span",{children:a.companyId.name}):"No company"}),(0,b.jsx)("td",{className:"py-3 px-4 text-center",children:(0,b.jsx)(d.Button,{variant:"ghost",onClick:()=>A(a._id),className:"text-red-500 hover:text-red-700",children:(0,b.jsx)(f.Trash2,{size:18})})})]},a._id)):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:4,className:"py-3 px-4 text-center",children:"No admins found"})})})]})})]})}])}];

//# sourceMappingURL=client_2c1f58b2._.js.map