module.exports=[39075,a=>{"use strict";let b=(0,a.i(31276).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);a.s(["Search",()=>b],39075)},22807,a=>{"use strict";var b=a.i(16547),c=a.i(9651),d=a.i(39075),e=a.i(23752),f=a.i(52893);function g(){let[a,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)({}),[r,s]=(0,c.useState)(null),[t,u]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(1),[z,A]=(0,c.useState)(!1),[B,C]=(0,c.useState)({name:"",email:"",whatsappNo:"",type:""}),[D,E]=(0,c.useState)(!1);(0,c.useEffect)(()=>{E(!0),k("chat"),w("chat"),F()},[]);let F=async()=>{try{let a=await fetch("https://lms-v4tz.onrender.com/enquiry"),b=await a.json();g(b)}catch(a){console.error("Error fetching enquiries",a)}finally{i(!1)}},G=async()=>{try{let a=await fetch("https://lms-v4tz.onrender.com/live-session"),b=await a.json();m(b)}catch(a){console.error("Error fetching live sessions",a)}},H=async a=>{if(!p[a]){s(a);try{let b=await fetch(`https://lms-v4tz.onrender.com/live-session/${a}/enrolled-students`),c=await b.json();q(b=>({...b,[a]:c.students||[]}))}catch(a){console.error("Error fetching students",a)}finally{s(null)}}},I=async(a,b)=>{await fetch(`https://lms-v4tz.onrender.com/enquiry/${a}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:b})}),g(c=>c.map(c=>c._id===a?{...c,status:b}:c))},J=a.filter(a=>{let b=(a.name||a.nmae||"").toLowerCase().includes(t.toLowerCase()),c=!v||a.type.toLowerCase()===v;return b&&c}),K=Math.ceil(J.length/10),L=(x-1)*10,M=J.slice(L,L+10),N=(0,c.useMemo)(()=>{if(!D)return 0;let a=0;return"live"===j?l.forEach(b=>{let c=p[b._id]||[],d=Number(b.price??0);a+=c.length*d}):J.forEach(b=>{a+=Number(b.amount??0)}),a},[j,J,l,p,D]),O=a=>a&&D?Number(a).toLocaleString("en-IN",{style:"currency",currency:"INR"}):"₹0";return h||!j?(0,b.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,b.jsx)("div",{className:"text-center",children:"Loading..."})}):(0,b.jsxs)("div",{className:"min-h-screen bg-slate-50/50 p-4 md:p-6 lg:p-8",children:[(0,b.jsxs)("div",{className:"mx-auto w-full max-w-[1600px] space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"Sales Management"}),(0,b.jsx)("p",{className:"text-slate-500 text-sm mt-1",children:"Manage your enquiries, students, and live sessions."})]}),(0,b.jsx)("div",{className:"flex items-center gap-4 bg-white px-5 py-3 rounded-xl border border-slate-200 shadow-sm",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs font-semibold text-slate-500 uppercase tracking-wide",children:"Total Revenue"}),(0,b.jsx)("p",{className:"text-xl font-bold text-slate-800",children:O(N.toString())})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-xl border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[(0,b.jsxs)("div",{className:"p-4 border-b border-slate-100 flex flex-col lg:flex-row gap-4 justify-between lg:items-center bg-white",children:[(0,b.jsx)("div",{className:"flex bg-slate-100/80 p-1 rounded-lg w-full lg:w-auto overflow-x-auto no-scrollbar",children:[{label:"Chat",value:"chat"},{label:"Counselling",value:"counselling"},{label:"Live Session",value:"live"}].map(a=>(0,b.jsx)("button",{onClick:()=>{k(a.value),y(1),"live"===a.value?G():w("all"===a.value?"":a.value)},className:`px-4 py-2 rounded-md text-sm font-medium transition-all whitespace-nowrap ${j===a.value?"bg-white text-blue-600 shadow-sm":"text-slate-600 hover:text-slate-900 hover:bg-slate-200/50"}`,children:a.label},a.value))}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 w-full lg:w-auto",children:[(0,b.jsxs)("div",{className:"relative flex-1 sm:w-64",children:[(0,b.jsx)(d.Search,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400 w-4 h-4"}),(0,b.jsx)("input",{type:"text",placeholder:"Search name...",value:t,onChange:a=>{u(a.target.value),y(1)},className:"w-full pl-9 pr-4 py-2 text-sm border border-slate-200 rounded-lg focus:ring-2 focus:ring-blue-500/20 focus:border-blue-500 outline-none transition-all"})]}),(0,b.jsxs)("button",{onClick:()=>A(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium flex items-center justify-center gap-2 transition-colors shadow-sm hover:shadow",children:[(0,b.jsx)(e.Plus,{className:"w-4 h-4"}),(0,b.jsx)("span",{className:"hidden sm:inline",children:"Add Enquiry"}),(0,b.jsx)("span",{className:"sm:hidden",children:"Add"})]})]})]}),(0,b.jsx)("div",{className:"flex-1 min-h-[400px]",children:"live"!==j?(0,b.jsx)("div",{className:"overflow-x-auto w-full",children:(0,b.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,b.jsx)("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50/50 border-b border-slate-100",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Name"}),(0,b.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Email"}),(0,b.jsx)("th",{className:"px-4 py-3 font-semibold",children:"WhatsApp"}),"chat"===j&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Buddy"}),(0,b.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Pref. Call"})]}),"counselling"===j&&(0,b.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Pref. Call"}),(0,b.jsx)("th",{className:"px-4 py-3 font-semibold",children:"Status"}),(0,b.jsx)("th",{className:"px-4 py-3 font-semibold text-right",children:"Amount"}),(0,b.jsx)("th",{className:"px-4 py-3 font-semibold text-right",children:"Created"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-slate-100",children:M.length>0?M.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-slate-50/80 transition-colors group",children:[(0,b.jsx)("td",{className:"px-4 py-3 font-medium text-slate-900 whitespace-nowrap",children:a.name||a.nmae}),(0,b.jsx)("td",{className:"px-4 py-3 text-slate-600 max-w-[200px] truncate",title:a.email,children:a.email}),(0,b.jsx)("td",{className:"px-4 py-3 text-slate-600 whitespace-nowrap",children:a.whatsapp}),"chat"===j&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("td",{className:"px-4 py-3 text-slate-600 whitespace-nowrap",children:a?.chatBuddyId?.name||"-"}),(0,b.jsx)("td",{className:"px-4 py-3 text-slate-600 whitespace-nowrap",children:a.preferredTimeToCall||"-"})]}),"counselling"===j&&(0,b.jsx)("td",{className:"px-4 py-3 text-slate-600",children:a.preferredTimeToCall||"-"}),(0,b.jsx)("td",{className:"px-4 py-2",children:(0,b.jsxs)("select",{value:a.status,onChange:b=>I(a._id,b.target.value),className:`px-3 py-1 rounded-full text-xs font-semibold border-0 ring-1 ring-inset cursor-pointer focus:ring-2 focus:ring-blue-500 outline-none bg-transparent ${(a=>{switch(a){case"pending":return"bg-amber-100 text-amber-700 border-amber-200";case"inprocess":return"bg-blue-100 text-blue-700 border-blue-200";case"done":return"bg-emerald-100 text-emerald-700 border-emerald-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}})(a.status)}`,children:[(0,b.jsx)("option",{value:"pending",children:"Pending"}),(0,b.jsx)("option",{value:"inprocess",children:"In Process"}),(0,b.jsx)("option",{value:"done",children:"Done"})]})}),(0,b.jsx)("td",{className:"px-4 py-3 text-right font-medium text-slate-900 whitespace-nowrap",children:D?O(a.amount):"₹0"}),(0,b.jsx)("td",{className:"px-4 py-3 text-slate-600",children:a.createdAt?new Date(a.createdAt).toLocaleString("en-IN",{day:"2-digit",month:"short",year:"numeric"}):"-"})]},a._id)):(0,b.jsx)("tr",{children:(0,b.jsx)("td",{colSpan:10,className:"px-4 py-12 text-center text-slate-400",children:"No enquiries found matching your filters."})})})]})}):(0,b.jsx)("div",{className:"p-4 space-y-4 bg-slate-50/30 h-full",children:0===l.length?(0,b.jsx)("div",{className:"text-center py-10 text-slate-500",children:"No live sessions found"}):(0,b.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:l.map(a=>(0,b.jsxs)("div",{className:"border border-slate-200 rounded-lg bg-white shadow-sm overflow-hidden",children:[(0,b.jsxs)("div",{className:"p-4 flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-semibold text-slate-800",children:a.title}),(0,b.jsxs)("p",{className:"text-slate-500 text-sm mt-1",children:["Price: ",(0,b.jsx)("span",{className:"font-medium text-slate-900",children:D?O(a.price?.toString()):"₹0"})]})]}),(0,b.jsx)("button",{onClick:()=>{let b=n===a._id;o(b?null:a._id),b||H(a._id)},className:`px-3 py-1 text-xs font-medium rounded-md border transition-colors ${n===a._id?"bg-slate-100 text-slate-700 border-slate-300":"bg-blue-50 text-blue-700 border-blue-200 hover:bg-blue-100"}`,children:n===a._id?"Close":"View Students"})]}),n===a._id&&(0,b.jsx)("div",{className:"bg-slate-50 border-t border-slate-100 max-h-[300px] overflow-y-auto p-3",children:r===a._id?(0,b.jsx)("p",{className:"text-xs text-center py-4 text-slate-500",children:"Loading..."}):p[a._id]?.length?(0,b.jsx)("div",{className:"space-y-2",children:p[a._id].map(a=>(0,b.jsx)("div",{className:"flex justify-between items-center bg-white p-2 rounded border border-slate-200 shadow-sm",children:(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-slate-700",children:a.name}),(0,b.jsx)("p",{className:"text-xs text-slate-400",children:a.email})]})},a._id))}):(0,b.jsx)("p",{className:"text-xs text-center py-4 text-slate-500",children:"No students enrolled yet."})})]},a._id))})})}),K>1&&(0,b.jsxs)("div",{className:"p-4 border-t border-slate-100 flex justify-between items-center bg-white",children:[(0,b.jsxs)("span",{className:"text-xs text-slate-500",children:["Page ",x," of ",K]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>y(a=>Math.max(a-1,1)),disabled:1===x,className:"px-3 py-1.5 text-xs font-medium rounded border border-slate-200 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),(0,b.jsx)("button",{onClick:()=>y(a=>Math.min(a+1,K)),disabled:x===K,className:"px-3 py-1.5 text-xs font-medium rounded border border-slate-200 hover:bg-slate-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})]}),z&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/50 z-50 flex items-center justify-center p-4",children:(0,b.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full relative",children:[(0,b.jsx)("button",{onClick:()=>A(!1),className:"absolute right-4 top-4 text-slate-400 hover:text-slate-600",children:(0,b.jsx)(f.X,{className:"w-5 h-5"})}),(0,b.jsx)("h2",{className:"text-lg font-bold mb-4",children:"Add New Enquiry"}),(0,b.jsx)("div",{className:"h-32 bg-slate-100 rounded flex items-center justify-center text-slate-400",children:"Form Content Placeholder"})]})})]})}a.s(["default",()=>g])}];

//# sourceMappingURL=client_82cda54a._.js.map